

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. email — An email and MIME handling package &mdash; Python Standard Library</title>
  

  
  
    <link rel="shortcut icon" href="../_static/py.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library" href="../index.html"/>
        <link rel="up" title="18 Internet Data Handling" href="18.html"/>
        <link rel="next" title="2. json — JSON encoder and decoder" href="json.html"/>
        <link rel="prev" title="18 Internet Data Handling" href="18.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python Standard Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01to10.html">Ch 01 - 10</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../11to20.html">Ch 11 - 20</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../11_data_persistence/11.html">11. Data Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_archiving/12.html">12 Data Compression and Archiving</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_fileformats/13.html">13 File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_crypto/14.html">14 Cryptographic Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_allos/15.html">15 Generic Operating System Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../16_someos/16.html">16 Optional Operating System Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../17_ipc/17.html">17 Interprocess Communication and Networking</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="18.html">18 Internet Data Handling</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">1. <code class="docutils literal"><span class="pre">email</span></code> &#8212; An email and MIME handling package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-history">1.1. Package History</a></li>
<li class="toctree-l4"><a class="reference internal" href="#differences-from-mimelib">1.2. Differences from <code class="docutils literal"><span class="pre">mimelib</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="json.html">2. <code class="docutils literal"><span class="pre">json</span></code> &#8212; JSON encoder and decoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailcap.html">3. <code class="docutils literal"><span class="pre">mailcap</span></code> &#8212; Mailcap file handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailbox.html">4. <code class="docutils literal"><span class="pre">mailbox</span></code> &#8212; Manipulate mailboxes in various formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="mhlib.html">5. (depr) <code class="docutils literal"><span class="pre">mhlib</span></code> &#8212; Access to MH mailboxes</a></li>
<li class="toctree-l3"><a class="reference internal" href="mimetools.html">6. (depr) <code class="docutils literal"><span class="pre">mimetools</span></code> &#8212; Tools for parsing MIME messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="mimetypes.html">7. <code class="docutils literal"><span class="pre">mimetypes</span></code> &#8212; Map filenames to MIME types</a></li>
<li class="toctree-l3"><a class="reference internal" href="mimewriter.html">8. (depr) <code class="docutils literal"><span class="pre">MimeWriter</span></code> &#8212; Generic MIME file writer</a></li>
<li class="toctree-l3"><a class="reference internal" href="mimify.html">9. (depr) <code class="docutils literal"><span class="pre">mimify</span></code> &#8212; MIME processing of mail messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="multifile.html">10. (depr) <code class="docutils literal"><span class="pre">multifile</span></code> &#8212; Support for files containing distinct parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc822.html">11. (depr) <code class="docutils literal"><span class="pre">rfc822</span></code> &#8212; Parse RFC 2822 mail headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="base64.html">12. <code class="docutils literal"><span class="pre">base64</span></code> &#8212; RFC 3548: Base16, Base32, Base64 Data Encodings</a></li>
<li class="toctree-l3"><a class="reference internal" href="binhex.html">13. <code class="docutils literal"><span class="pre">binhex</span></code> &#8212; Encode and decode binhex4 files</a></li>
<li class="toctree-l3"><a class="reference internal" href="binascii.html">14. <code class="docutils literal"><span class="pre">binascii</span></code> &#8212; Convert between binary and ASCII</a></li>
<li class="toctree-l3"><a class="reference internal" href="quopri.html">15. <code class="docutils literal"><span class="pre">quopri</span></code> &#8212; Encode and decode MIME quoted-printable data</a></li>
<li class="toctree-l3"><a class="reference internal" href="uu.html">16. <code class="docutils literal"><span class="pre">uu</span></code> &#8212; Encode and decode uuencode files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../19_markup/19.html">19 Structured Markup Processing Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../20_internet/20_part1.html">20a Internet Protocols and Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../20_internet/20_part2.html">20b Internet Protocols and Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../21to30.html">Ch 21 - 30</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31to37.html">Ch 31 - 37</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_all.html">api</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Standard Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../11to20.html">Ch 11 - 20</a> &raquo;</li>
        
          <li><a href="18.html">18 Internet Data Handling</a> &raquo;</li>
        
      <li>1. <code class="docutils literal"><span class="pre">email</span></code> &#8212; An email and MIME handling package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/18_netdata/email.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="email-an-email-and-mime-handling-package">
<h1>1. <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> &#8212; An email and MIME handling package<a class="headerlink" href="#email-an-email-and-mime-handling-package" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first"><cite>Contents</cite></p>
<ul class="simple">
<li><a class="reference internal" href="#package-history" id="id3">Package History</a></li>
<li><a class="reference internal" href="#differences-from-mimelib" id="id4">Differences from <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code></a></li>
</ul>
</div>
<span class="target" id="module-email"></span><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>The <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package is a library for managing email messages, including
MIME and other <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>-based message documents.  It subsumes most of the
functionality in several older standard modules such as <a class="reference internal" href="../generated/rfc822.html#module-rfc822" title="rfc822"><code class="xref py py-mod docutils literal"><span class="pre">rfc822</span></code></a>,
<a class="reference internal" href="../generated/mimetools.html#module-mimetools" title="mimetools"><code class="xref py py-mod docutils literal"><span class="pre">mimetools</span></code></a>, <a class="reference internal" href="../generated/multifile.html#module-multifile" title="multifile"><code class="xref py py-mod docutils literal"><span class="pre">multifile</span></code></a>, and other non-standard packages such as
<code class="xref py py-mod docutils literal"><span class="pre">mimecntl</span></code>.  It is specifically <em>not</em> designed to do any sending of email
messages to SMTP (<span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2821.html"><strong>RFC 2821</strong></a>), NNTP, or other servers; those are functions of
modules such as <a class="reference internal" href="../generated/smtplib.html#module-smtplib" title="smtplib"><code class="xref py py-mod docutils literal"><span class="pre">smtplib</span></code></a> and <a class="reference internal" href="../generated/nntplib.html#module-nntplib" title="nntplib"><code class="xref py py-mod docutils literal"><span class="pre">nntplib</span></code></a>. The <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package
attempts to be as RFC-compliant as possible, supporting in addition to
<span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>, such MIME-related RFCs as <span class="target" id="index-3"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2045.html"><strong>RFC 2045</strong></a>, <span class="target" id="index-4"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2046.html"><strong>RFC 2046</strong></a>, <span class="target" id="index-5"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2047.html"><strong>RFC 2047</strong></a>,
and <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2231.html"><strong>RFC 2231</strong></a>.</p>
<p>The primary distinguishing feature of the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package is that it splits
the parsing and generating of email messages from the internal <em>object model</em>
representation of email.  Applications using the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package deal
primarily with objects; you can add sub-objects to messages, remove sub-objects
from messages, completely re-arrange the contents, etc.  There is a separate
parser and a separate generator which handles the transformation from flat text
to the object model, and then back to flat text again.  There are also handy
subclasses for some common MIME object types, and a few miscellaneous utilities
that help with such common tasks as extracting and parsing message field values,
creating RFC-compliant dates, etc.</p>
<p>The following sections describe the functionality of the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package.
The ordering follows a progression that should be common in applications: an
email message is read as flat text from a file or other source, the text is
parsed to produce the object structure of the email message, this structure is
manipulated, and finally, the object tree is rendered back into flat text.</p>
<p>It is perfectly feasible to create the object structure out of whole cloth &#8212;
i.e. completely from scratch.  From there, a similar progression can be taken as
above.</p>
<p>Also included are detailed specifications of all the classes and modules that
the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package provides, the exception classes you might encounter
while using the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package, some auxiliary utilities, and a few
examples.  For users of the older <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> package, or previous versions
of the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package, a section on differences and porting is provided.</p>
<p>Contents of the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package documentation:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Module <a class="reference internal" href="../generated/smtplib.html#module-smtplib" title="smtplib"><code class="xref py py-mod docutils literal"><span class="pre">smtplib</span></code></a></dt>
<dd>SMTP protocol client</dd>
<dt>Module <a class="reference internal" href="../generated/nntplib.html#module-nntplib" title="nntplib"><code class="xref py py-mod docutils literal"><span class="pre">nntplib</span></code></a></dt>
<dd>NNTP protocol client</dd>
</dl>
</div>
<div class="section" id="package-history">
<span id="email-pkg-history"></span><h2><a class="toc-backref" href="#id3">1.1. Package History</a><a class="headerlink" href="#package-history" title="Permalink to this headline">¶</a></h2>
<p>This table describes the release history of the email package, corresponding to
the version of Python that the package was released with.  For purposes of this
document, when you see a note about change or added versions, these refer to the
Python version the change was made in, <em>not</em> the email package version.  This
table also describes the Python compatibility of each version of the package.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="44%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">email version</th>
<th class="head">distributed with</th>
<th class="head">compatible with</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="xref py py-const docutils literal"><span class="pre">1.x</span></code></td>
<td>Python 2.2.0 to Python 2.2.1</td>
<td><em>no longer supported</em></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-const docutils literal"><span class="pre">2.5</span></code></td>
<td>Python 2.2.2+ and Python 2.3</td>
<td>Python 2.1 to 2.5</td>
</tr>
<tr class="row-even"><td><code class="xref py py-const docutils literal"><span class="pre">3.0</span></code></td>
<td>Python 2.4</td>
<td>Python 2.3 to 2.5</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-const docutils literal"><span class="pre">4.0</span></code></td>
<td>Python 2.5</td>
<td>Python 2.3 to 2.5</td>
</tr>
</tbody>
</table>
<p>Here are the major differences between <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 4 and version 3:</p>
<ul>
<li><p class="first">All modules have been renamed according to <span class="target" id="index-7"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> standards.  For example,
the version 3 module <code class="xref py py-mod docutils literal"><span class="pre">email.Message</span></code> was renamed to <code class="xref py py-mod docutils literal"><span class="pre">email.message</span></code> in
version 4.</p>
</li>
<li><p class="first">A new subpackage <code class="xref py py-mod docutils literal"><span class="pre">email.mime</span></code> was added and all the version 3
<code class="xref py py-mod docutils literal"><span class="pre">email.MIME*</span></code> modules were renamed and situated into the <code class="xref py py-mod docutils literal"><span class="pre">email.mime</span></code>
subpackage.  For example, the version 3 module <code class="xref py py-mod docutils literal"><span class="pre">email.MIMEText</span></code> was renamed
to <code class="xref py py-mod docutils literal"><span class="pre">email.mime.text</span></code>.</p>
<p><em>Note that the version 3 names will continue to work until Python 2.6</em>.</p>
</li>
<li><p class="first">The <code class="xref py py-mod docutils literal"><span class="pre">email.mime.application</span></code> module was added, which contains the
<code class="xref py py-class docutils literal"><span class="pre">MIMEApplication</span></code> class.</p>
</li>
<li><p class="first">Methods that were deprecated in version 3 have been removed.  These include
<code class="xref py py-meth docutils literal"><span class="pre">Generator.__call__()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">Message.get_type()</span></code>,
<code class="xref py py-meth docutils literal"><span class="pre">Message.get_main_type()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">Message.get_subtype()</span></code>.</p>
</li>
<li><p class="first">Fixes have been added for <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2231.html"><strong>RFC 2231</strong></a> support which can change some of the
return types for <code class="xref py py-func docutils literal"><span class="pre">Message.get_param</span></code>
and friends.  Under some
circumstances, values which used to return a 3-tuple now return simple strings
(specifically, if all extended parameter segments were unencoded, there is no
language and charset designation expected, so the return type is now a simple
string).  Also, %-decoding used to be done for both encoded and unencoded
segments; this decoding is now done only for encoded segments.</p>
</li>
</ul>
<p>Here are the major differences between <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 3 and version 2:</p>
<ul class="simple">
<li>The <code class="xref py py-class docutils literal"><span class="pre">FeedParser</span></code> class was introduced, and the
<code class="xref py py-class docutils literal"><span class="pre">Parser</span></code> class was implemented in terms of the
<code class="xref py py-class docutils literal"><span class="pre">FeedParser</span></code>.  All parsing therefore is
non-strict, and parsing will make a best effort never to raise an exception.
Problems found while parsing messages are stored in the message&#8217;s <em>defect</em>
attribute.</li>
<li>All aspects of the API which raised <a class="reference internal" href="../generated/exceptions.DeprecationWarning.html#exceptions.DeprecationWarning" title="exceptions.DeprecationWarning"><code class="xref py py-exc docutils literal"><span class="pre">DeprecationWarning</span></code></a>s in version 2
have been removed.  These include the <em>_encoder</em> argument to the
<code class="xref py py-class docutils literal"><span class="pre">MIMEText</span></code> constructor, the
<code class="xref py py-meth docutils literal"><span class="pre">Message.add_payload()</span></code> method, the <code class="xref py py-func docutils literal"><span class="pre">Utils.dump_address_pair()</span></code>
function, and the functions <code class="xref py py-func docutils literal"><span class="pre">Utils.decode()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">Utils.encode()</span></code>.</li>
<li>New <a class="reference internal" href="../generated/exceptions.DeprecationWarning.html#exceptions.DeprecationWarning" title="exceptions.DeprecationWarning"><code class="xref py py-exc docutils literal"><span class="pre">DeprecationWarning</span></code></a>s have been added to:
<code class="xref py py-meth docutils literal"><span class="pre">Generator.__call__()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">Message.get_type()</span></code>,
<code class="xref py py-meth docutils literal"><span class="pre">Message.get_main_type()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">Message.get_subtype()</span></code>, and the <em>strict</em>
argument to the <code class="xref py py-class docutils literal"><span class="pre">Parser</span></code> class.  These are expected to
be removed in future versions.</li>
<li>Support for Pythons earlier than 2.3 has been removed.</li>
</ul>
<p>Here are the differences between <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 2 and version 1:</p>
<ul>
<li><p class="first">The <code class="xref py py-mod docutils literal"><span class="pre">email.Header</span></code> and <code class="xref py py-mod docutils literal"><span class="pre">email.Charset</span></code> modules have been added.</p>
</li>
<li><p class="first">The pickle format for <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instances has changed.
Since this was never (and still isn&#8217;t) formally defined, this isn&#8217;t
considered a backward incompatibility.  However if your application pickles
and unpickles <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instances, be aware that in
<a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 2, <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instances now have
private variables <em>_charset</em> and <em>_default_type</em>.</p>
</li>
<li><p class="first">Several methods in the <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> class have been
deprecated, or their signatures changed.  Also, many new methods have been
added.  See the documentation for the <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> class
for details.  The changes should be completely backward compatible.</p>
</li>
<li><p class="first">The object structure has changed in the face of <em class="mimetype">message/rfc822</em>
content types.  In <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 1, such a type would be represented
by a scalar payload, i.e. the container message&#8217;s
<code class="xref py py-meth docutils literal"><span class="pre">is_multipart()</span></code> returned false,
<code class="xref py py-meth docutils literal"><span class="pre">get_payload()</span></code> was not a list object, but a
single <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instance.</p>
<p>This structure was inconsistent with the rest of the package, so the object
representation for <em class="mimetype">message/rfc822</em> content types was changed.  In
<a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> version 2, the container <em>does</em> return <code class="docutils literal"><span class="pre">True</span></code> from
<code class="xref py py-meth docutils literal"><span class="pre">is_multipart()</span></code>, and
<code class="xref py py-meth docutils literal"><span class="pre">get_payload()</span></code> returns a list containing a single
<code class="xref py py-class docutils literal"><span class="pre">Message</span></code> item.</p>
<p>Note that this is one place that backward compatibility could not be
completely maintained.  However, if you&#8217;re already testing the return type of
<code class="xref py py-meth docutils literal"><span class="pre">get_payload()</span></code>, you should be fine.  You just need
to make sure your code doesn&#8217;t do a <code class="xref py py-meth docutils literal"><span class="pre">set_payload()</span></code>
with a <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instance on a container with a content
type of <em class="mimetype">message/rfc822</em>.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal"><span class="pre">Parser</span></code> constructor&#8217;s <em>strict</em> argument was added,
and its <code class="xref py py-meth docutils literal"><span class="pre">parse()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">parsestr()</span></code> methods grew a <em>headersonly</em> argument.
The <em>strict</em> flag was also added to functions <a class="reference internal" href="../generated/email.message_from_file.html#email.message_from_file" title="email.message_from_file"><code class="xref py py-func docutils literal"><span class="pre">email.message_from_file()</span></code></a>
and <a class="reference internal" href="../generated/email.message_from_string.html#email.message_from_string" title="email.message_from_string"><code class="xref py py-func docutils literal"><span class="pre">email.message_from_string()</span></code></a>.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">Generator.__call__()</span></code> is deprecated; use <code class="xref py py-meth docutils literal"><span class="pre">Generator.flatten</span></code> instead.  The
<code class="xref py py-class docutils literal"><span class="pre">Generator</span></code> class has also grown the
<code class="xref py py-meth docutils literal"><span class="pre">clone()</span></code> method.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal"><span class="pre">DecodedGenerator</span></code> class in the
<code class="xref py py-mod docutils literal"><span class="pre">email.generator</span></code> module was added.</p>
</li>
<li><p class="first">The intermediate base classes
<code class="xref py py-class docutils literal"><span class="pre">MIMENonMultipart</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">MIMEMultipart</span></code> have been added, and interposed
in the class hierarchy for most of the other MIME-related derived classes.</p>
</li>
<li><p class="first">The <em>_encoder</em> argument to the <code class="xref py py-class docutils literal"><span class="pre">MIMEText</span></code> constructor
has been deprecated.  Encoding  now happens implicitly based on the
<em>_charset</em> argument.</p>
</li>
<li><p class="first">The following functions in the <code class="xref py py-mod docutils literal"><span class="pre">email.Utils</span></code> module have been deprecated:
<code class="xref py py-func docutils literal"><span class="pre">dump_address_pairs()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">decode()</span></code>, and <code class="xref py py-func docutils literal"><span class="pre">encode()</span></code>.  The following
functions have been added to the module: <code class="xref py py-func docutils literal"><span class="pre">make_msgid()</span></code>,
<code class="xref py py-func docutils literal"><span class="pre">decode_rfc2231()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">encode_rfc2231()</span></code>, and <code class="xref py py-func docutils literal"><span class="pre">decode_params()</span></code>.</p>
</li>
<li><p class="first">The non-public function <code class="xref py py-func docutils literal"><span class="pre">email.Iterators._structure()</span></code> was added.</p>
</li>
</ul>
</div>
<div class="section" id="differences-from-mimelib">
<h2><a class="toc-backref" href="#id4">1.2. Differences from <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code></a><a class="headerlink" href="#differences-from-mimelib" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package was originally prototyped as a separate library called
<a class="reference external" href="http://mimelib.sourceforge.net/">mimelib</a>. Changes have been made so that method names
are more consistent, and some methods or modules have either been added or
removed.  The semantics of some of the methods have also changed.  For the most
part, any functionality available in <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> is still available in the
<a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package, albeit often in a different way.  Backward compatibility
between the <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> package and the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> package was not a
priority.</p>
<p>Here is a brief description of the differences between the <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> and
the <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a> packages, along with hints on how to port your applications.</p>
<p>Of course, the most visible difference between the two packages is that the
package name has been changed to <a class="reference internal" href="../generated/email.html#module-email" title="email"><code class="xref py py-mod docutils literal"><span class="pre">email</span></code></a>.  In addition, the top-level
package has the following differences:</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal"><span class="pre">messageFromString()</span></code> has been renamed to <a class="reference internal" href="../generated/email.message_from_string.html#email.message_from_string" title="email.message_from_string"><code class="xref py py-func docutils literal"><span class="pre">message_from_string()</span></code></a>.</li>
<li><code class="xref py py-func docutils literal"><span class="pre">messageFromFile()</span></code> has been renamed to <a class="reference internal" href="../generated/email.message_from_file.html#email.message_from_file" title="email.message_from_file"><code class="xref py py-func docutils literal"><span class="pre">message_from_file()</span></code></a>.</li>
</ul>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Message</span></code> class has the following differences:</p>
<ul class="simple">
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">asString()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">as_string()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">ismultipart()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">is_multipart()</span></code>.</li>
<li>The <code class="xref py py-meth docutils literal"><span class="pre">get_payload()</span></code> method has grown a <em>decode</em>
optional argument.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getall()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_all()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">addheader()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">add_header()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">gettype()</span></code> was renamed to <code class="xref py py-meth docutils literal"><span class="pre">get_type()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getmaintype()</span></code> was renamed to <code class="xref py py-meth docutils literal"><span class="pre">get_main_type()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getsubtype()</span></code> was renamed to <code class="xref py py-meth docutils literal"><span class="pre">get_subtype()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getparams()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_params()</span></code>. Also, whereas <code class="xref py py-meth docutils literal"><span class="pre">getparams()</span></code>
returned a list of strings, <code class="xref py py-meth docutils literal"><span class="pre">get_params()</span></code> returns
a list of 2-tuples, effectively the key/value pairs of the parameters, split
on the <code class="docutils literal"><span class="pre">'='</span></code> sign.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getparam()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_param()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getcharsets()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_charsets()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getfilename()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_filename()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getboundary()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">get_boundary()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">setboundary()</span></code> was renamed to
<code class="xref py py-meth docutils literal"><span class="pre">set_boundary()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getdecodedpayload()</span></code> was removed.  To get similar
functionality, pass the value 1 to the <em>decode</em> flag of the
<code class="xref py py-meth docutils literal"><span class="pre">get_payload()</span></code> method.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getpayloadastext()</span></code> was removed.  Similar functionality is
supported by the <code class="xref py py-class docutils literal"><span class="pre">DecodedGenerator</span></code> class in the
<code class="xref py py-mod docutils literal"><span class="pre">email.generator</span></code> module.</li>
<li>The method <code class="xref py py-meth docutils literal"><span class="pre">getbodyastext()</span></code> was removed.  You can get similar
functionality by creating an iterator with
<code class="xref py py-func docutils literal"><span class="pre">typed_subpart_iterator()</span></code> in the <code class="xref py py-mod docutils literal"><span class="pre">email.iterators</span></code>
module.</li>
</ul>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Parser</span></code> class has no differences in its public
interface. It does have some additional smarts to recognize
<em class="mimetype">message/delivery-status</em> type messages, which it represents as a
<code class="xref py py-class docutils literal"><span class="pre">Message</span></code> instance containing separate
<code class="xref py py-class docutils literal"><span class="pre">Message</span></code> subparts for each header block in the delivery
status notification <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Generator</span></code> class has no differences in its public
interface.  There is a new class in the <code class="xref py py-mod docutils literal"><span class="pre">email.generator</span></code> module though,
called <code class="xref py py-class docutils literal"><span class="pre">DecodedGenerator</span></code> which provides most of the
functionality previously available in the <code class="xref py py-meth docutils literal"><span class="pre">Message.getpayloadastext()</span></code>
method.</p>
<p>The following modules and classes have been changed:</p>
<ul>
<li><p class="first">The <code class="xref py py-class docutils literal"><span class="pre">MIMEBase</span></code> class constructor arguments <em>_major</em>
and <em>_minor</em> have changed to <em>_maintype</em> and <em>_subtype</em> respectively.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">Image</span></code> class/module has been renamed to <code class="docutils literal"><span class="pre">MIMEImage</span></code>.  The <em>_minor</em>
argument has been renamed to <em>_subtype</em>.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">Text</span></code> class/module has been renamed to <code class="docutils literal"><span class="pre">MIMEText</span></code>.  The <em>_minor</em>
argument has been renamed to <em>_subtype</em>.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">MessageRFC822</span></code> class/module has been renamed to <code class="docutils literal"><span class="pre">MIMEMessage</span></code>.  Note
that an earlier version of <code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> called this class/module <code class="docutils literal"><span class="pre">RFC822</span></code>,
but that clashed with the Python standard library module <a class="reference internal" href="../generated/rfc822.html#module-rfc822" title="rfc822"><code class="xref py py-mod docutils literal"><span class="pre">rfc822</span></code></a> on some
case-insensitive file systems.</p>
<p>Also, the <code class="xref py py-class docutils literal"><span class="pre">MIMEMessage</span></code> class now represents any
kind of MIME message
with main type <em class="mimetype">message</em>.  It takes an optional argument <em>_subtype</em>
which is used to set the MIME subtype.  <em>_subtype</em> defaults to
<em class="mimetype">rfc822</em>.</p>
</li>
</ul>
<p><code class="xref py py-mod docutils literal"><span class="pre">mimelib</span></code> provided some utility functions in its <code class="xref py py-mod docutils literal"><span class="pre">address</span></code> and
<code class="xref py py-mod docutils literal"><span class="pre">date</span></code> modules.  All of these functions have been moved to the
<code class="xref py py-mod docutils literal"><span class="pre">email.utils</span></code> module.</p>
<p>The <code class="docutils literal"><span class="pre">MsgReader</span></code> class/module has been removed.  Its functionality is most
closely supported in the <code class="xref py py-func docutils literal"><span class="pre">body_line_iterator()</span></code> function
in the <code class="xref py py-mod docutils literal"><span class="pre">email.iterators</span></code> module.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Delivery Status Notifications (DSN) are defined in <span class="target" id="index-9"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1894.html"><strong>RFC 1894</strong></a>.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="json.html" class="btn btn-neutral float-right" title="2. json — JSON encoder and decoder" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="18.html" class="btn btn-neutral" title="18 Internet Data Handling" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>