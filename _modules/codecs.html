

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>codecs &mdash; Python Standard Library</title>
  

  
  
    <link rel="shortcut icon" href="../_static/py.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python Standard Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01to10.html">Ch 01 - 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11to20.html">Ch 11 - 20</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21to30.html">Ch 21 - 30</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31to37.html">Ch 31 - 37</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_all.html">api</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Standard Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>codecs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for codecs</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; codecs -- Python Codec Registry, API and helpers.</span>


<span class="sd">Written by Marc-Andre Lemburg (mal@lemburg.com).</span>

<span class="sd">(c) Copyright CNRI, All Rights Reserved. NO WARRANTY.</span>

<span class="sd">&quot;&quot;&quot;</span><span class="c1">#&quot;</span>

<span class="kn">import</span> <span class="nn">__builtin__</span><span class="o">,</span> <span class="nn">sys</span>

<span class="c1">### Registry and builtin stateless codec functions</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">_codecs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="n">why</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">(</span><span class="s1">&#39;Failed to load the builtin codecs: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">why</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="s2">&quot;lookup&quot;</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;EncodedFile&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_BE&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOM_LE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM32_BE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM32_LE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM64_BE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM64_LE&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOM_UTF8&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_UTF16&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_UTF16_LE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_UTF16_BE&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOM_UTF32&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_UTF32_LE&quot;</span><span class="p">,</span> <span class="s2">&quot;BOM_UTF32_BE&quot;</span><span class="p">,</span>
           <span class="s2">&quot;CodecInfo&quot;</span><span class="p">,</span> <span class="s2">&quot;Codec&quot;</span><span class="p">,</span> <span class="s2">&quot;IncrementalEncoder&quot;</span><span class="p">,</span> <span class="s2">&quot;IncrementalDecoder&quot;</span><span class="p">,</span>
           <span class="s2">&quot;StreamReader&quot;</span><span class="p">,</span> <span class="s2">&quot;StreamWriter&quot;</span><span class="p">,</span>
           <span class="s2">&quot;StreamReaderWriter&quot;</span><span class="p">,</span> <span class="s2">&quot;StreamRecoder&quot;</span><span class="p">,</span>
           <span class="s2">&quot;getencoder&quot;</span><span class="p">,</span> <span class="s2">&quot;getdecoder&quot;</span><span class="p">,</span> <span class="s2">&quot;getincrementalencoder&quot;</span><span class="p">,</span>
           <span class="s2">&quot;getincrementaldecoder&quot;</span><span class="p">,</span> <span class="s2">&quot;getreader&quot;</span><span class="p">,</span> <span class="s2">&quot;getwriter&quot;</span><span class="p">,</span>
           <span class="s2">&quot;encode&quot;</span><span class="p">,</span> <span class="s2">&quot;decode&quot;</span><span class="p">,</span> <span class="s2">&quot;iterencode&quot;</span><span class="p">,</span> <span class="s2">&quot;iterdecode&quot;</span><span class="p">,</span>
           <span class="s2">&quot;strict_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;ignore_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;replace_errors&quot;</span><span class="p">,</span>
           <span class="s2">&quot;xmlcharrefreplace_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;backslashreplace_errors&quot;</span><span class="p">,</span>
           <span class="s2">&quot;register_error&quot;</span><span class="p">,</span> <span class="s2">&quot;lookup_error&quot;</span><span class="p">]</span>

<span class="c1">### Constants</span>

<span class="c1">#</span>
<span class="c1"># Byte Order Mark (BOM = ZERO WIDTH NO-BREAK SPACE = U+FEFF)</span>
<span class="c1"># and its possible byte string values</span>
<span class="c1"># for UTF8/UTF16/UTF32 output and little/big endian machines</span>
<span class="c1">#</span>

<span class="c1"># UTF-8</span>
<span class="n">BOM_UTF8</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\xef\xbb\xbf</span><span class="s1">&#39;</span>

<span class="c1"># UTF-16, little endian</span>
<span class="n">BOM_LE</span> <span class="o">=</span> <span class="n">BOM_UTF16_LE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\xff\xfe</span><span class="s1">&#39;</span>

<span class="c1"># UTF-16, big endian</span>
<span class="n">BOM_BE</span> <span class="o">=</span> <span class="n">BOM_UTF16_BE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\xfe\xff</span><span class="s1">&#39;</span>

<span class="c1"># UTF-32, little endian</span>
<span class="n">BOM_UTF32_LE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\xff\xfe\x00\x00</span><span class="s1">&#39;</span>

<span class="c1"># UTF-32, big endian</span>
<span class="n">BOM_UTF32_BE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\x00\x00\xfe\xff</span><span class="s1">&#39;</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">byteorder</span> <span class="o">==</span> <span class="s1">&#39;little&#39;</span><span class="p">:</span>

    <span class="c1"># UTF-16, native endianness</span>
    <span class="n">BOM</span> <span class="o">=</span> <span class="n">BOM_UTF16</span> <span class="o">=</span> <span class="n">BOM_UTF16_LE</span>

    <span class="c1"># UTF-32, native endianness</span>
    <span class="n">BOM_UTF32</span> <span class="o">=</span> <span class="n">BOM_UTF32_LE</span>

<span class="k">else</span><span class="p">:</span>

    <span class="c1"># UTF-16, native endianness</span>
    <span class="n">BOM</span> <span class="o">=</span> <span class="n">BOM_UTF16</span> <span class="o">=</span> <span class="n">BOM_UTF16_BE</span>

    <span class="c1"># UTF-32, native endianness</span>
    <span class="n">BOM_UTF32</span> <span class="o">=</span> <span class="n">BOM_UTF32_BE</span>

<span class="c1"># Old broken names (don&#39;t use in new code)</span>
<span class="n">BOM32_LE</span> <span class="o">=</span> <span class="n">BOM_UTF16_LE</span>
<span class="n">BOM32_BE</span> <span class="o">=</span> <span class="n">BOM_UTF16_BE</span>
<span class="n">BOM64_LE</span> <span class="o">=</span> <span class="n">BOM_UTF32_LE</span>
<span class="n">BOM64_BE</span> <span class="o">=</span> <span class="n">BOM_UTF32_BE</span>


<span class="c1">### Codec base classes (defining the API)</span>

<div class="viewcode-block" id="CodecInfo"><a class="viewcode-back" href="../generated/generated/codecs.CodecInfo.html#codecs.CodecInfo">[docs]</a><span class="k">class</span> <span class="nc">CodecInfo</span><span class="p">(</span><span class="nb">tuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Codec details when looking up the codec registry&quot;&quot;&quot;</span>

    <span class="c1"># Private API to allow Python to blacklist the known non-Unicode</span>
    <span class="c1"># codecs in the standard library. A more general mechanism to</span>
    <span class="c1"># reliably distinguish test encodings from other codecs will hopefully</span>
    <span class="c1"># be defined for Python 3.5</span>
    <span class="c1">#</span>
    <span class="c1"># See http://bugs.python.org/issue19619</span>
    <span class="n">_is_text_encoding</span> <span class="o">=</span> <span class="bp">True</span> <span class="c1"># Assume codecs are text encodings by default</span>

<div class="viewcode-block" id="CodecInfo.__new__"><a class="viewcode-back" href="../generated/generated/codecs.CodecInfo.__new__.html#codecs.CodecInfo.__new__">[docs]</a>    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">encode</span><span class="p">,</span> <span class="n">decode</span><span class="p">,</span> <span class="n">streamreader</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">streamwriter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">incrementalencoder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">incrementaldecoder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">_is_text_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="nb">tuple</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="p">(</span><span class="n">encode</span><span class="p">,</span> <span class="n">decode</span><span class="p">,</span> <span class="n">streamreader</span><span class="p">,</span> <span class="n">streamwriter</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encode</span> <span class="o">=</span> <span class="n">encode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decode</span> <span class="o">=</span> <span class="n">decode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incrementalencoder</span> <span class="o">=</span> <span class="n">incrementalencoder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incrementaldecoder</span> <span class="o">=</span> <span class="n">incrementaldecoder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streamwriter</span> <span class="o">=</span> <span class="n">streamwriter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streamreader</span> <span class="o">=</span> <span class="n">streamreader</span>
        <span class="k">if</span> <span class="n">_is_text_encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_text_encoding</span> <span class="o">=</span> <span class="n">_is_text_encoding</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="CodecInfo.__repr__"><a class="viewcode-back" href="../generated/generated/codecs.CodecInfo.__repr__.html#codecs.CodecInfo.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2"> object for encoding </span><span class="si">%s</span><span class="s2"> at 0x</span><span class="si">%x</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="Codec"><a class="viewcode-back" href="../generated/generated/codecs.Codec.html#codecs.Codec">[docs]</a><span class="k">class</span> <span class="nc">Codec</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot; Defines the interface for stateless encoders/decoders.</span>

<span class="sd">        The .encode()/.decode() methods may use different error</span>
<span class="sd">        handling schemes by providing the errors argument. These</span>
<span class="sd">        string values are predefined:</span>

<span class="sd">         &#39;strict&#39; - raise a ValueError error (or a subclass)</span>
<span class="sd">         &#39;ignore&#39; - ignore the character and continue with the next</span>
<span class="sd">         &#39;replace&#39; - replace with a suitable replacement character;</span>
<span class="sd">                    Python will use the official U+FFFD REPLACEMENT</span>
<span class="sd">                    CHARACTER for the builtin Unicode codecs on</span>
<span class="sd">                    decoding and &#39;?&#39; on encoding.</span>
<span class="sd">         &#39;xmlcharrefreplace&#39; - Replace with the appropriate XML</span>
<span class="sd">                               character reference (only for encoding).</span>
<span class="sd">         &#39;backslashreplace&#39;  - Replace with backslashed escape sequences</span>
<span class="sd">                               (only for encoding).</span>

<span class="sd">        The set of allowed values can be extended via register_error.</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Codec.encode"><a class="viewcode-back" href="../generated/generated/codecs.Codec.encode.html#codecs.Codec.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Encodes the object input and returns a tuple (output</span>
<span class="sd">            object, length consumed).</span>

<span class="sd">            errors defines the error handling to apply. It defaults to</span>
<span class="sd">            &#39;strict&#39; handling.</span>

<span class="sd">            The method may not store state in the Codec instance. Use</span>
<span class="sd">            StreamWriter for codecs which have to keep state in order to</span>
<span class="sd">            make encoding efficient.</span>

<span class="sd">            The encoder must be able to handle zero length input and</span>
<span class="sd">            return an empty object of the output object type in this</span>
<span class="sd">            situation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Codec.decode"><a class="viewcode-back" href="../generated/generated/codecs.Codec.decode.html#codecs.Codec.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Decodes the object input and returns a tuple (output</span>
<span class="sd">            object, length consumed).</span>

<span class="sd">            input must be an object which provides the bf_getreadbuf</span>
<span class="sd">            buffer slot. Python strings, buffer objects and memory</span>
<span class="sd">            mapped files are examples of objects providing this slot.</span>

<span class="sd">            errors defines the error handling to apply. It defaults to</span>
<span class="sd">            &#39;strict&#39; handling.</span>

<span class="sd">            The method may not store state in the Codec instance. Use</span>
<span class="sd">            StreamReader for codecs which have to keep state in order to</span>
<span class="sd">            make decoding efficient.</span>

<span class="sd">            The decoder must be able to handle zero length input and</span>
<span class="sd">            return an empty object of the output object type in this</span>
<span class="sd">            situation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>

<div class="viewcode-block" id="IncrementalEncoder"><a class="viewcode-back" href="../generated/generated/codecs.IncrementalEncoder.html#codecs.IncrementalEncoder">[docs]</a><span class="k">class</span> <span class="nc">IncrementalEncoder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An IncrementalEncoder encodes an input in multiple steps. The input can be</span>
<span class="sd">    passed piece by piece to the encode() method. The IncrementalEncoder remembers</span>
<span class="sd">    the state of the Encoding process between calls to encode().</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="IncrementalEncoder.__init__"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalEncoder.__init__.html#codecs.IncrementalEncoder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an IncrementalEncoder instance.</span>

<span class="sd">        The IncrementalEncoder may use different error handling schemes by</span>
<span class="sd">        providing the errors keyword argument. See the module docstring</span>
<span class="sd">        for a list of possible values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="IncrementalEncoder.encode"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalEncoder.encode.html#codecs.IncrementalEncoder.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">final</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encodes input and returns the resulting object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="IncrementalEncoder.reset"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalEncoder.reset.html#codecs.IncrementalEncoder.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the encoder to the initial state.</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="IncrementalEncoder.getstate"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalEncoder.getstate.html#codecs.IncrementalEncoder.getstate">[docs]</a>    <span class="k">def</span> <span class="nf">getstate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current state of the encoder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="IncrementalEncoder.setstate"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalEncoder.setstate.html#codecs.IncrementalEncoder.setstate">[docs]</a>    <span class="k">def</span> <span class="nf">setstate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current state of the encoder. state must have been</span>
<span class="sd">        returned by getstate().</span>
<span class="sd">        &quot;&quot;&quot;</span></div></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.html#codecs.BufferedIncrementalEncoder">[docs]</a><span class="k">class</span> <span class="nc">BufferedIncrementalEncoder</span><span class="p">(</span><span class="n">IncrementalEncoder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This subclass of IncrementalEncoder can be used as the baseclass for an</span>
<span class="sd">    incremental encoder if the encoder must keep some of the output in a</span>
<span class="sd">    buffer between calls to encode().</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="BufferedIncrementalEncoder.__init__"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.__init__.html#codecs.BufferedIncrementalEncoder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
        <span class="n">IncrementalEncoder</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1"># unencoded input that is kept between calls to encode()</span></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder._buffer_encode"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder._buffer_encode.html#codecs.BufferedIncrementalEncoder._buffer_encode">[docs]</a>    <span class="k">def</span> <span class="nf">_buffer_encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">final</span><span class="p">):</span>
        <span class="c1"># Overwrite this method in subclasses: It must encode input</span>
        <span class="c1"># and return an (output, length consumed) tuple</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder.encode"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.encode.html#codecs.BufferedIncrementalEncoder.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">final</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="c1"># encode input (taking the buffer into account)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">+</span> <span class="nb">input</span>
        <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">consumed</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">final</span><span class="p">)</span>
        <span class="c1"># keep unencoded input until the next call</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">consumed</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder.reset"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.reset.html#codecs.BufferedIncrementalEncoder.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">IncrementalEncoder</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder.getstate"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.getstate.html#codecs.BufferedIncrementalEncoder.getstate">[docs]</a>    <span class="k">def</span> <span class="nf">getstate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">or</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="BufferedIncrementalEncoder.setstate"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalEncoder.setstate.html#codecs.BufferedIncrementalEncoder.setstate">[docs]</a>    <span class="k">def</span> <span class="nf">setstate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">state</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span></div></div>

<div class="viewcode-block" id="IncrementalDecoder"><a class="viewcode-back" href="../generated/generated/codecs.IncrementalDecoder.html#codecs.IncrementalDecoder">[docs]</a><span class="k">class</span> <span class="nc">IncrementalDecoder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An IncrementalDecoder decodes an input in multiple steps. The input can be</span>
<span class="sd">    passed piece by piece to the decode() method. The IncrementalDecoder</span>
<span class="sd">    remembers the state of the decoding process between calls to decode().</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="IncrementalDecoder.__init__"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalDecoder.__init__.html#codecs.IncrementalDecoder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a IncrementalDecoder instance.</span>

<span class="sd">        The IncrementalDecoder may use different error handling schemes by</span>
<span class="sd">        providing the errors keyword argument. See the module docstring</span>
<span class="sd">        for a list of possible values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span></div>

<div class="viewcode-block" id="IncrementalDecoder.decode"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.IncrementalDecoder.decode.html#codecs.IncrementalDecoder.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">final</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decodes input and returns the resulting object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="IncrementalDecoder.reset"><a class="viewcode-back" href="../generated/generated/encodings.idna.IncrementalDecoder.reset.html#codecs.IncrementalDecoder.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resets the decoder to the initial state.</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="IncrementalDecoder.getstate"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.IncrementalDecoder.getstate.html#codecs.IncrementalDecoder.getstate">[docs]</a>    <span class="k">def</span> <span class="nf">getstate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current state of the decoder.</span>

<span class="sd">        This must be a (buffered_input, additional_state_info) tuple.</span>
<span class="sd">        buffered_input must be a bytes object containing bytes that</span>
<span class="sd">        were passed to decode() that have not yet been converted.</span>
<span class="sd">        additional_state_info must be a non-negative integer</span>
<span class="sd">        representing the state of the decoder WITHOUT yet having</span>
<span class="sd">        processed the contents of buffered_input.  In the initial state</span>
<span class="sd">        and after reset(), getstate() must return (b&quot;&quot;, 0).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="IncrementalDecoder.setstate"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.IncrementalDecoder.setstate.html#codecs.IncrementalDecoder.setstate">[docs]</a>    <span class="k">def</span> <span class="nf">setstate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current state of the decoder.</span>

<span class="sd">        state must have been returned by getstate().  The effect of</span>
<span class="sd">        setstate((b&quot;&quot;, 0)) must be equivalent to reset().</span>
<span class="sd">        &quot;&quot;&quot;</span></div></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.html#codecs.BufferedIncrementalDecoder">[docs]</a><span class="k">class</span> <span class="nc">BufferedIncrementalDecoder</span><span class="p">(</span><span class="n">IncrementalDecoder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This subclass of IncrementalDecoder can be used as the baseclass for an</span>
<span class="sd">    incremental decoder if the decoder must be able to handle incomplete byte</span>
<span class="sd">    sequences.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="BufferedIncrementalDecoder.__init__"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.__init__.html#codecs.BufferedIncrementalDecoder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
        <span class="n">IncrementalDecoder</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1"># undecoded input that is kept between calls to decode()</span></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder._buffer_decode"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder._buffer_decode.html#codecs.BufferedIncrementalDecoder._buffer_decode">[docs]</a>    <span class="k">def</span> <span class="nf">_buffer_decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">final</span><span class="p">):</span>
        <span class="c1"># Overwrite this method in subclasses: It must decode input</span>
        <span class="c1"># and return an (output, length consumed) tuple</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder.decode"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.decode.html#codecs.BufferedIncrementalDecoder.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">final</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="c1"># decode input (taking the buffer into account)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">+</span> <span class="nb">input</span>
        <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">consumed</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">final</span><span class="p">)</span>
        <span class="c1"># keep undecoded input until the next call</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">consumed</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder.reset"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.reset.html#codecs.BufferedIncrementalDecoder.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">IncrementalDecoder</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder.getstate"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.getstate.html#codecs.BufferedIncrementalDecoder.getstate">[docs]</a>    <span class="k">def</span> <span class="nf">getstate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># additional state info is always 0</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="BufferedIncrementalDecoder.setstate"><a class="viewcode-back" href="../generated/generated/codecs.BufferedIncrementalDecoder.setstate.html#codecs.BufferedIncrementalDecoder.setstate">[docs]</a>    <span class="k">def</span> <span class="nf">setstate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="c1"># ignore additional state info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div></div>

<span class="c1">#</span>
<span class="c1"># The StreamWriter and StreamReader class provide generic working</span>
<span class="c1"># interfaces which can be used to implement new encoding submodules</span>
<span class="c1"># very easily. See encodings/utf_8.py for an example on how this is</span>
<span class="c1"># done.</span>
<span class="c1">#</span>

<div class="viewcode-block" id="StreamWriter"><a class="viewcode-back" href="../generated/generated/codecs.StreamWriter.html#codecs.StreamWriter">[docs]</a><span class="k">class</span> <span class="nc">StreamWriter</span><span class="p">(</span><span class="n">Codec</span><span class="p">):</span>

<div class="viewcode-block" id="StreamWriter.__init__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.__init__.html#codecs.StreamWriter.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Creates a StreamWriter instance.</span>

<span class="sd">            stream must be a file-like object open for writing</span>
<span class="sd">            (binary) data.</span>

<span class="sd">            The StreamWriter may use different error handling</span>
<span class="sd">            schemes by providing the errors keyword argument. These</span>
<span class="sd">            parameters are predefined:</span>

<span class="sd">             &#39;strict&#39; - raise a ValueError (or a subclass)</span>
<span class="sd">             &#39;ignore&#39; - ignore the character and continue with the next</span>
<span class="sd">             &#39;replace&#39;- replace with a suitable replacement character</span>
<span class="sd">             &#39;xmlcharrefreplace&#39; - Replace with the appropriate XML</span>
<span class="sd">                                   character reference.</span>
<span class="sd">             &#39;backslashreplace&#39;  - Replace with backslashed escape</span>
<span class="sd">                                   sequences (only for encoding).</span>

<span class="sd">            The set of allowed parameter values can be extended via</span>
<span class="sd">            register_error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span></div>

<div class="viewcode-block" id="StreamWriter.write"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.write.html#codecs.StreamWriter.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Writes the object&#39;s contents encoded to self.stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">consumed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamWriter.writelines"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.writelines.html#codecs.StreamWriter.writelines">[docs]</a>    <span class="k">def</span> <span class="nf">writelines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Writes the concatenated list of strings to the stream</span>
<span class="sd">            using .write().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span></div>

<div class="viewcode-block" id="StreamWriter.reset"><a class="viewcode-back" href="../generated/generated/encodings.idna.StreamWriter.reset.html#codecs.StreamWriter.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Flushes and resets the codec buffers used for keeping state.</span>

<span class="sd">            Calling this method should ensure that the data on the</span>
<span class="sd">            output is put into a clean state, that allows appending</span>
<span class="sd">            of new fresh data without having to rescan the whole</span>
<span class="sd">            stream to recover state.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="StreamWriter.seek"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.seek.html#codecs.StreamWriter.seek">[docs]</a>    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">whence</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">offset</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamWriter.__getattr__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.__getattr__.html#codecs.StreamWriter.__getattr__">[docs]</a>    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="o">=</span><span class="nb">getattr</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Inherit all other methods from the underlying stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamWriter.__enter__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.__enter__.html#codecs.StreamWriter.__enter__">[docs]</a>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamWriter.__exit__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamWriter.__exit__.html#codecs.StreamWriter.__exit__">[docs]</a>    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<span class="c1">###</span>

<div class="viewcode-block" id="StreamReader"><a class="viewcode-back" href="../generated/generated/codecs.StreamReader.html#codecs.StreamReader">[docs]</a><span class="k">class</span> <span class="nc">StreamReader</span><span class="p">(</span><span class="n">Codec</span><span class="p">):</span>

<div class="viewcode-block" id="StreamReader.__init__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.__init__.html#codecs.StreamReader.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Creates a StreamReader instance.</span>

<span class="sd">            stream must be a file-like object open for reading</span>
<span class="sd">            (binary) data.</span>

<span class="sd">            The StreamReader may use different error handling</span>
<span class="sd">            schemes by providing the errors keyword argument. These</span>
<span class="sd">            parameters are predefined:</span>

<span class="sd">             &#39;strict&#39; - raise a ValueError (or a subclass)</span>
<span class="sd">             &#39;ignore&#39; - ignore the character and continue with the next</span>
<span class="sd">             &#39;replace&#39;- replace with a suitable replacement character;</span>

<span class="sd">            The set of allowed parameter values can be extended via</span>
<span class="sd">            register_error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bytebuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># For str-&gt;str decoding this will stay a str</span>
        <span class="c1"># For str-&gt;unicode decoding the first read will promote it to unicode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span> <span class="o">=</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="StreamReader.decode"><a class="viewcode-back" href="../generated/generated/codecs.StreamReader.decode.html#codecs.StreamReader.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="StreamReader.read"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.read.html#codecs.StreamReader.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">chars</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">firstline</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Decodes data from the stream self.stream and returns the</span>
<span class="sd">            resulting object.</span>

<span class="sd">            chars indicates the number of characters to read from the</span>
<span class="sd">            stream. read() will never return more than chars</span>
<span class="sd">            characters, but it might return less, if there are not enough</span>
<span class="sd">            characters available.</span>

<span class="sd">            size indicates the approximate maximum number of bytes to</span>
<span class="sd">            read from the stream for decoding purposes. The decoder</span>
<span class="sd">            can modify this setting as appropriate. The default value</span>
<span class="sd">            -1 indicates to read and decode as much as possible.  size</span>
<span class="sd">            is intended to prevent having to decode huge files in one</span>
<span class="sd">            step.</span>

<span class="sd">            If firstline is true, and a UnicodeDecodeError happens</span>
<span class="sd">            after the first line terminator in the input only the first line</span>
<span class="sd">            will be returned, the rest of the input will be kept until the</span>
<span class="sd">            next call to read().</span>

<span class="sd">            The method should use a greedy read strategy meaning that</span>
<span class="sd">            it should read as much data as is allowed within the</span>
<span class="sd">            definition of the encoding and the given size, e.g.  if</span>
<span class="sd">            optional encoding endings or state markers are available</span>
<span class="sd">            on the stream, these should be read too.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If we have lines cached, first merge them back into characters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># read until we get the required number of characters (if available)</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># can the request be satisfied from the character buffer?</span>
            <span class="k">if</span> <span class="n">chars</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">chars</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="c1"># we need more data</span>
            <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">newdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
            <span class="c1"># decode bytes (those remaining from the last call included)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bytebuffer</span> <span class="o">+</span> <span class="n">newdata</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">newchars</span><span class="p">,</span> <span class="n">decodedbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">firstline</span><span class="p">:</span>
                    <span class="n">newchars</span><span class="p">,</span> <span class="n">decodedbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="n">exc</span><span class="o">.</span><span class="n">start</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
                    <span class="n">lines</span> <span class="o">=</span> <span class="n">newchars</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">raise</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="c1"># keep undecoded bytes until the next call</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bytebuffer</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">decodedbytes</span><span class="p">:]</span>
            <span class="c1"># put new characters in the character buffer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">+=</span> <span class="n">newchars</span>
            <span class="c1"># there was no data available</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">newdata</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">chars</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Return everything we&#39;ve got</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Return the first chars characters</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span><span class="p">[:</span><span class="n">chars</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span><span class="p">[</span><span class="n">chars</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="StreamReader.readline"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.readline.html#codecs.StreamReader.readline">[docs]</a>    <span class="k">def</span> <span class="nf">readline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keepends</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Read one line from the input stream and return the</span>
<span class="sd">            decoded data.</span>

<span class="sd">            size, if given, is passed as size argument to the</span>
<span class="sd">            read() method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If we have lines cached from an earlier read, return</span>
        <span class="c1"># them unconditionally</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># revert to charbuffer mode; we might need more data</span>
                <span class="c1"># next time</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">keepends</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="n">readsize</span> <span class="o">=</span> <span class="n">size</span> <span class="ow">or</span> <span class="mi">72</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># If size is given, we call read() only once</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">readsize</span><span class="p">,</span> <span class="n">firstline</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="c1"># If we&#39;re at a &quot;\r&quot; read one extra character (which might</span>
                <span class="c1"># be a &quot;\n&quot;) to get a proper line ending. If the stream is</span>
                <span class="c1"># temporarily exhausted we return the wrong line ending.</span>
                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="n">data</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chars</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

            <span class="n">line</span> <span class="o">+=</span> <span class="n">data</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">lines</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># More than one line result; the first line is a full line</span>
                    <span class="c1"># to return</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">del</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="c1"># cache the remaining lines</span>
                        <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span> <span class="o">=</span> <span class="n">lines</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># only one remaining line, put it back into charbuffer</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">keepends</span><span class="p">:</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">break</span>
                <span class="n">line0withend</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">line0withoutend</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">line0withend</span> <span class="o">!=</span> <span class="n">line0withoutend</span><span class="p">:</span> <span class="c1"># We really have a line end</span>
                    <span class="c1"># Put the rest back together and keep it until the next call</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span>
                    <span class="k">if</span> <span class="n">keepends</span><span class="p">:</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">line0withend</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">line0withoutend</span>
                    <span class="k">break</span>
            <span class="c1"># we didn&#39;t get anything or this was our only try</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="ow">or</span> <span class="n">size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">line</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keepends</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">readsize</span><span class="o">&lt;</span><span class="mi">8000</span><span class="p">:</span>
                <span class="n">readsize</span> <span class="o">*=</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">line</span></div>

<div class="viewcode-block" id="StreamReader.readlines"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.readlines.html#codecs.StreamReader.readlines">[docs]</a>    <span class="k">def</span> <span class="nf">readlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sizehint</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keepends</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Read all lines available on the input stream</span>
<span class="sd">            and return them as list of lines.</span>

<span class="sd">            Line breaks are implemented using the codec&#39;s decoder</span>
<span class="sd">            method and are included in the list entries.</span>

<span class="sd">            sizehint, if given, is ignored since there is no efficient</span>
<span class="sd">            way to finding the true end-of-line.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">keepends</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReader.reset"><a class="viewcode-back" href="../generated/generated/encodings.idna.StreamReader.reset.html#codecs.StreamReader.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Resets the codec buffers used for keeping state.</span>

<span class="sd">            Note that no stream repositioning should take place.</span>
<span class="sd">            This method is primarily intended to be able to recover</span>
<span class="sd">            from decoding errors.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bytebuffer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">charbuffer</span> <span class="o">=</span> <span class="s2">u&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linebuffer</span> <span class="o">=</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="StreamReader.seek"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.seek.html#codecs.StreamReader.seek">[docs]</a>    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the input stream&#39;s current position.</span>

<span class="sd">            Resets the codec buffers used for keeping state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamReader.next"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.next.html#codecs.StreamReader.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the next decoded line from the input stream.&quot;&quot;&quot;</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">line</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span></div>

<div class="viewcode-block" id="StreamReader.__iter__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.__iter__.html#codecs.StreamReader.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamReader.__getattr__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.__getattr__.html#codecs.StreamReader.__getattr__">[docs]</a>    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="o">=</span><span class="nb">getattr</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Inherit all other methods from the underlying stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReader.__enter__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.__enter__.html#codecs.StreamReader.__enter__">[docs]</a>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamReader.__exit__"><a class="viewcode-back" href="../generated/generated/encodings.utf_8_sig.StreamReader.__exit__.html#codecs.StreamReader.__exit__">[docs]</a>    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<span class="c1">###</span>

<div class="viewcode-block" id="StreamReaderWriter"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.html#codecs.StreamReaderWriter">[docs]</a><span class="k">class</span> <span class="nc">StreamReaderWriter</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot; StreamReaderWriter instances allow wrapping streams which</span>
<span class="sd">        work in both read and write modes.</span>

<span class="sd">        The design is such that one can use the factory functions</span>
<span class="sd">        returned by the codec.lookup() function to construct the</span>
<span class="sd">        instance.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Optional attributes set by the file wrappers below</span>
    <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>

<div class="viewcode-block" id="StreamReaderWriter.__init__"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.__init__.html#codecs.StreamReaderWriter.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Writer</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Creates a StreamReaderWriter instance.</span>

<span class="sd">            stream must be a Stream-like object.</span>

<span class="sd">            Reader, Writer must be factory functions or classes</span>
<span class="sd">            providing the StreamReader, StreamWriter interface resp.</span>

<span class="sd">            Error handling is done in the same way as defined for the</span>
<span class="sd">            StreamWriter/Readers.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">Writer</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span></div>

<div class="viewcode-block" id="StreamReaderWriter.read"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.read.html#codecs.StreamReaderWriter.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReaderWriter.readline"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.readline.html#codecs.StreamReaderWriter.readline">[docs]</a>    <span class="k">def</span> <span class="nf">readline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="n">size</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReaderWriter.readlines"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.readlines.html#codecs.StreamReaderWriter.readlines">[docs]</a>    <span class="k">def</span> <span class="nf">readlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sizehint</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">readlines</span><span class="p">(</span><span class="n">sizehint</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReaderWriter.next"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.next.html#codecs.StreamReaderWriter.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the next decoded line from the input stream.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamReaderWriter.__iter__"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.__iter__.html#codecs.StreamReaderWriter.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamReaderWriter.write"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.write.html#codecs.StreamReaderWriter.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReaderWriter.writelines"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.writelines.html#codecs.StreamReaderWriter.writelines">[docs]</a>    <span class="k">def</span> <span class="nf">writelines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamReaderWriter.reset"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.reset.html#codecs.StreamReaderWriter.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamReaderWriter.seek"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.seek.html#codecs.StreamReaderWriter.seek">[docs]</a>    <span class="k">def</span> <span class="nf">seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">whence</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">whence</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">offset</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamReaderWriter.__getattr__"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.__getattr__.html#codecs.StreamReaderWriter.__getattr__">[docs]</a>    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="o">=</span><span class="nb">getattr</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Inherit all other methods from the underlying stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="c1"># these are needed to make &quot;with codecs.open(...)&quot; work properly</span>

<div class="viewcode-block" id="StreamReaderWriter.__enter__"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.__enter__.html#codecs.StreamReaderWriter.__enter__">[docs]</a>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamReaderWriter.__exit__"><a class="viewcode-back" href="../generated/generated/codecs.StreamReaderWriter.__exit__.html#codecs.StreamReaderWriter.__exit__">[docs]</a>    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<span class="c1">###</span>

<div class="viewcode-block" id="StreamRecoder"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.html#codecs.StreamRecoder">[docs]</a><span class="k">class</span> <span class="nc">StreamRecoder</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot; StreamRecoder instances provide a frontend - backend</span>
<span class="sd">        view of encoding data.</span>

<span class="sd">        They use the complete set of APIs returned by the</span>
<span class="sd">        codecs.lookup() function to implement their task.</span>

<span class="sd">        Data written to the stream is first decoded into an</span>
<span class="sd">        intermediate format (which is dependent on the given codec</span>
<span class="sd">        combination) and then written to the stream using an instance</span>
<span class="sd">        of the provided Writer class.</span>

<span class="sd">        In the other direction, data is read from the stream using a</span>
<span class="sd">        Reader instance and then return encoded data to the caller.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Optional attributes set by the file wrappers below</span>
    <span class="n">data_encoding</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
    <span class="n">file_encoding</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>

<div class="viewcode-block" id="StreamRecoder.__init__"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.__init__.html#codecs.StreamRecoder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">encode</span><span class="p">,</span> <span class="n">decode</span><span class="p">,</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Writer</span><span class="p">,</span>
                 <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Creates a StreamRecoder instance which implements a two-way</span>
<span class="sd">            conversion: encode and decode work on the frontend (the</span>
<span class="sd">            input to .read() and output of .write()) while</span>
<span class="sd">            Reader and Writer work on the backend (reading and</span>
<span class="sd">            writing to the stream).</span>

<span class="sd">            You can use these objects to do transparent direct</span>
<span class="sd">            recodings from e.g. latin-1 to utf-8 and back.</span>

<span class="sd">            stream must be a file-like object.</span>

<span class="sd">            encode, decode must adhere to the Codec interface, Reader,</span>
<span class="sd">            Writer must be factory functions or classes providing the</span>
<span class="sd">            StreamReader, StreamWriter interface resp.</span>

<span class="sd">            encode and decode are needed for the frontend translation,</span>
<span class="sd">            Reader and Writer for the backend translation. Unicode is</span>
<span class="sd">            used as intermediate encoding.</span>

<span class="sd">            Error handling is done in the same way as defined for the</span>
<span class="sd">            StreamWriter/Readers.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encode</span> <span class="o">=</span> <span class="n">encode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decode</span> <span class="o">=</span> <span class="n">decode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">Writer</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="n">errors</span></div>

<div class="viewcode-block" id="StreamRecoder.read"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.read.html#codecs.StreamRecoder.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">bytesencoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="StreamRecoder.readline"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.readline.html#codecs.StreamRecoder.readline">[docs]</a>    <span class="k">def</span> <span class="nf">readline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">bytesencoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="StreamRecoder.readlines"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.readlines.html#codecs.StreamRecoder.readlines">[docs]</a>    <span class="k">def</span> <span class="nf">readlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sizehint</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">bytesencoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamRecoder.next"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.next.html#codecs.StreamRecoder.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Return the next decoded line from the input stream.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">bytesencoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="StreamRecoder.__iter__"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.__iter__.html#codecs.StreamRecoder.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamRecoder.write"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.write.html#codecs.StreamRecoder.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>

        <span class="n">data</span><span class="p">,</span> <span class="n">bytesdecoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamRecoder.writelines"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.writelines.html#codecs.StreamRecoder.writelines">[docs]</a>    <span class="k">def</span> <span class="nf">writelines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">bytesdecoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamRecoder.reset"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.reset.html#codecs.StreamRecoder.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="StreamRecoder.__getattr__"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.__getattr__.html#codecs.StreamRecoder.__getattr__">[docs]</a>    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                    <span class="nb">getattr</span><span class="o">=</span><span class="nb">getattr</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Inherit all other methods from the underlying stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="StreamRecoder.__enter__"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.__enter__.html#codecs.StreamRecoder.__enter__">[docs]</a>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="StreamRecoder.__exit__"><a class="viewcode-back" href="../generated/generated/codecs.StreamRecoder.__exit__.html#codecs.StreamRecoder.__exit__">[docs]</a>    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<span class="c1">### Shortcuts</span>

<div class="viewcode-block" id="open"><a class="viewcode-back" href="../generated/codecs.open.html#codecs.open">[docs]</a><span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="n">buffering</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Open an encoded file using the given mode and return</span>
<span class="sd">        a wrapped version providing transparent encoding/decoding.</span>

<span class="sd">        Note: The wrapped version will only accept the object format</span>
<span class="sd">        defined by the codecs, i.e. Unicode objects for most builtin</span>
<span class="sd">        codecs. Output is also codec dependent and will usually be</span>
<span class="sd">        Unicode as well.</span>

<span class="sd">        Files are always opened in binary mode, even if no binary mode</span>
<span class="sd">        was specified. This is done to avoid data loss due to encodings</span>
<span class="sd">        using 8-bit values. The default file mode is &#39;rb&#39; meaning to</span>
<span class="sd">        open the file in binary read mode.</span>

<span class="sd">        encoding specifies the encoding which is to be used for the</span>
<span class="sd">        file.</span>

<span class="sd">        errors may be given to define the error handling. It defaults</span>
<span class="sd">        to &#39;strict&#39; which causes ValueErrors to be raised in case an</span>
<span class="sd">        encoding error occurs.</span>

<span class="sd">        buffering has the same meaning as for the builtin open() API.</span>
<span class="sd">        It defaults to line buffered.</span>

<span class="sd">        The returned wrapped file object provides an extra attribute</span>
<span class="sd">        .encoding which allows querying the used encoding. This</span>
<span class="sd">        attribute is only available if an encoding was specified as</span>
<span class="sd">        parameter.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;U&#39;</span> <span class="ow">in</span> <span class="n">mode</span><span class="p">:</span>
            <span class="c1"># No automatic conversion of &#39;\n&#39; is done on reading and writing</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mode</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;rwa&#39;</span><span class="p">):</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span> <span class="o">+</span> <span class="n">mode</span>
        <span class="k">if</span> <span class="s1">&#39;b&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mode</span><span class="p">:</span>
            <span class="c1"># Force opening of the file in binary mode</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span> <span class="o">+</span> <span class="s1">&#39;b&#39;</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">__builtin__</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">buffering</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">file</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
    <span class="n">srw</span> <span class="o">=</span> <span class="n">StreamReaderWriter</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">streamreader</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">streamwriter</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Add attributes to simplify introspection</span>
    <span class="n">srw</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span>
    <span class="k">return</span> <span class="n">srw</span></div>

<div class="viewcode-block" id="EncodedFile"><a class="viewcode-back" href="../generated/codecs.EncodedFile.html#codecs.EncodedFile">[docs]</a><span class="k">def</span> <span class="nf">EncodedFile</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">data_encoding</span><span class="p">,</span> <span class="n">file_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Return a wrapped version of file which provides transparent</span>
<span class="sd">        encoding translation.</span>

<span class="sd">        Strings written to the wrapped file are interpreted according</span>
<span class="sd">        to the given data_encoding and then written to the original</span>
<span class="sd">        file as string using file_encoding. The intermediate encoding</span>
<span class="sd">        will usually be Unicode but depends on the specified codecs.</span>

<span class="sd">        Strings are read from the file using file_encoding and then</span>
<span class="sd">        passed back to the caller as string using data_encoding.</span>

<span class="sd">        If file_encoding is not given, it defaults to data_encoding.</span>

<span class="sd">        errors may be given to define the error handling. It defaults</span>
<span class="sd">        to &#39;strict&#39; which causes ValueErrors to be raised in case an</span>
<span class="sd">        encoding error occurs.</span>

<span class="sd">        The returned wrapped file object provides two extra attributes</span>
<span class="sd">        .data_encoding and .file_encoding which reflect the given</span>
<span class="sd">        parameters of the same name. The attributes can be used for</span>
<span class="sd">        introspection by Python programs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_encoding</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">file_encoding</span> <span class="o">=</span> <span class="n">data_encoding</span>
    <span class="n">data_info</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">data_encoding</span><span class="p">)</span>
    <span class="n">file_info</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">file_encoding</span><span class="p">)</span>
    <span class="n">sr</span> <span class="o">=</span> <span class="n">StreamRecoder</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">data_info</span><span class="o">.</span><span class="n">encode</span><span class="p">,</span> <span class="n">data_info</span><span class="o">.</span><span class="n">decode</span><span class="p">,</span>
                       <span class="n">file_info</span><span class="o">.</span><span class="n">streamreader</span><span class="p">,</span> <span class="n">file_info</span><span class="o">.</span><span class="n">streamwriter</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Add attributes to simplify introspection</span>
    <span class="n">sr</span><span class="o">.</span><span class="n">data_encoding</span> <span class="o">=</span> <span class="n">data_encoding</span>
    <span class="n">sr</span><span class="o">.</span><span class="n">file_encoding</span> <span class="o">=</span> <span class="n">file_encoding</span>
    <span class="k">return</span> <span class="n">sr</span></div>

<span class="c1">### Helpers for codec lookup</span>

<div class="viewcode-block" id="getencoder"><a class="viewcode-back" href="../generated/codecs.getencoder.html#codecs.getencoder">[docs]</a><span class="k">def</span> <span class="nf">getencoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its encoder function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span></div>

<div class="viewcode-block" id="getdecoder"><a class="viewcode-back" href="../generated/codecs.getdecoder.html#codecs.getdecoder">[docs]</a><span class="k">def</span> <span class="nf">getdecoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its decoder function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span></div>

<div class="viewcode-block" id="getincrementalencoder"><a class="viewcode-back" href="../generated/codecs.getincrementalencoder.html#codecs.getincrementalencoder">[docs]</a><span class="k">def</span> <span class="nf">getincrementalencoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its IncrementalEncoder class or factory function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found</span>
<span class="sd">        or the codecs doesn&#39;t provide an incremental encoder.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">encoder</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">incrementalencoder</span>
    <span class="k">if</span> <span class="n">encoder</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">encoder</span></div>

<div class="viewcode-block" id="getincrementaldecoder"><a class="viewcode-back" href="../generated/codecs.getincrementaldecoder.html#codecs.getincrementaldecoder">[docs]</a><span class="k">def</span> <span class="nf">getincrementaldecoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its IncrementalDecoder class or factory function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found</span>
<span class="sd">        or the codecs doesn&#39;t provide an incremental decoder.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">incrementaldecoder</span>
    <span class="k">if</span> <span class="n">decoder</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">LookupError</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decoder</span></div>

<div class="viewcode-block" id="getreader"><a class="viewcode-back" href="../generated/codecs.getreader.html#codecs.getreader">[docs]</a><span class="k">def</span> <span class="nf">getreader</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its StreamReader class or factory function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">streamreader</span></div>

<div class="viewcode-block" id="getwriter"><a class="viewcode-back" href="../generated/codecs.getwriter.html#codecs.getwriter">[docs]</a><span class="k">def</span> <span class="nf">getwriter</span><span class="p">(</span><span class="n">encoding</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Lookup up the codec for the given encoding and return</span>
<span class="sd">        its StreamWriter class or factory function.</span>

<span class="sd">        Raises a LookupError in case the encoding cannot be found.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">lookup</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">streamwriter</span></div>

<div class="viewcode-block" id="iterencode"><a class="viewcode-back" href="../generated/codecs.iterencode.html#codecs.iterencode">[docs]</a><span class="k">def</span> <span class="nf">iterencode</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encoding iterator.</span>

<span class="sd">    Encodes the input strings from the iterator using a IncrementalEncoder.</span>

<span class="sd">    errors and kwargs are passed through to the IncrementalEncoder</span>
<span class="sd">    constructor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">encoder</span> <span class="o">=</span> <span class="n">getincrementalencoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">)(</span><span class="n">errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">output</span></div>

<div class="viewcode-block" id="iterdecode"><a class="viewcode-back" href="../generated/codecs.iterdecode.html#codecs.iterdecode">[docs]</a><span class="k">def</span> <span class="nf">iterdecode</span><span class="p">(</span><span class="n">iterator</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decoding iterator.</span>

<span class="sd">    Decodes the input strings from the iterator using a IncrementalDecoder.</span>

<span class="sd">    errors and kwargs are passed through to the IncrementalDecoder</span>
<span class="sd">    constructor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="n">getincrementaldecoder</span><span class="p">(</span><span class="n">encoding</span><span class="p">)(</span><span class="n">errors</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">output</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">output</span></div>

<span class="c1">### Helpers for charmap-based codecs</span>

<div class="viewcode-block" id="make_identity_dict"><a class="viewcode-back" href="../generated/codecs.make_identity_dict.html#codecs.make_identity_dict">[docs]</a><span class="k">def</span> <span class="nf">make_identity_dict</span><span class="p">(</span><span class="n">rng</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; make_identity_dict(rng) -&gt; dict</span>

<span class="sd">        Return a dictionary where elements of the rng sequence are</span>
<span class="sd">        mapped to themselves.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rng</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">i</span>
    <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="make_encoding_map"><a class="viewcode-back" href="../generated/codecs.make_encoding_map.html#codecs.make_encoding_map">[docs]</a><span class="k">def</span> <span class="nf">make_encoding_map</span><span class="p">(</span><span class="n">decoding_map</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Creates an encoding map from a decoding map.</span>

<span class="sd">        If a target mapping in the decoding map occurs multiple</span>
<span class="sd">        times, then that target is mapped to None (undefined mapping),</span>
<span class="sd">        causing an exception when encountered by the charmap codec</span>
<span class="sd">        during translation.</span>

<span class="sd">        One example where this happens is cp875.py which decodes</span>
<span class="sd">        multiple character to \\u001a.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">decoding_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">k</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="n">m</span></div>

<span class="c1">### error handlers</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">strict_errors</span> <span class="o">=</span> <span class="n">lookup_error</span><span class="p">(</span><span class="s2">&quot;strict&quot;</span><span class="p">)</span>
    <span class="n">ignore_errors</span> <span class="o">=</span> <span class="n">lookup_error</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="n">replace_errors</span> <span class="o">=</span> <span class="n">lookup_error</span><span class="p">(</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
    <span class="n">xmlcharrefreplace_errors</span> <span class="o">=</span> <span class="n">lookup_error</span><span class="p">(</span><span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">)</span>
    <span class="n">backslashreplace_errors</span> <span class="o">=</span> <span class="n">lookup_error</span><span class="p">(</span><span class="s2">&quot;backslashreplace&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">LookupError</span><span class="p">:</span>
    <span class="c1"># In --disable-unicode builds, these error handler are missing</span>
    <span class="n">strict_errors</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">ignore_errors</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">replace_errors</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">xmlcharrefreplace_errors</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">backslashreplace_errors</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c1"># Tell modulefinder that using codecs probably needs the encodings</span>
<span class="c1"># package</span>
<span class="n">_false</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">_false</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">encodings</span>

<span class="c1">### Tests</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="c1"># Make stdout translate Latin-1 output into UTF-8 output</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">EncodedFile</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="s1">&#39;latin-1&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="c1"># Have stdin translate Latin-1 input into UTF-8 input</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">EncodedFile</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;latin-1&#39;</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>