

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>webbrowser &mdash; Python Standard Library</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Python Standard Library
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../main1.html">1. Frequently used</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main2.html">2. Somewhat frequently used</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maybe_future.html">3. Misc package I may use in the future</a></li>
<li class="toctree-l1"><a class="reference internal" href="../official_page.html">4. Official page TOC</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Standard Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>webbrowser</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for webbrowser</h1><div class="highlight"><pre>
<span></span><span class="ch">#! /usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;Interfaces for launching and remotely controlling Web browsers.&quot;&quot;&quot;</span>
<span class="c1"># Maintained by Georg Brandl.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shlex</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">stat</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;open_new&quot;</span><span class="p">,</span> <span class="s2">&quot;open_new_tab&quot;</span><span class="p">,</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;register&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="Error"><a class="viewcode-back" href="../generated/webbrowser.Error.html#webbrowser.Error">[docs]</a><span class="k">class</span> <span class="nc">Error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="n">_browsers</span> <span class="o">=</span> <span class="p">{}</span>          <span class="c1"># Dictionary of available browser controllers</span>
<span class="n">_tryorder</span> <span class="o">=</span> <span class="p">[]</span>          <span class="c1"># Preference order of available browsers</span>

<div class="viewcode-block" id="register"><a class="viewcode-back" href="../generated/webbrowser.register.html#webbrowser.register">[docs]</a><span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">klass</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">update_tryorder</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Register a browser connector and, optionally, connection.&quot;&quot;&quot;</span>
    <span class="n">_browsers</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span><span class="n">klass</span><span class="p">,</span> <span class="n">instance</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">update_tryorder</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">_tryorder</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">update_tryorder</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">_tryorder</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="get"><a class="viewcode-back" href="../generated/webbrowser.get.html#webbrowser.get">[docs]</a><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a browser launcher instance appropriate for the environment.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">alternatives</span> <span class="o">=</span> <span class="p">[</span><span class="n">using</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">alternatives</span> <span class="o">=</span> <span class="n">_tryorder</span>
    <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="n">alternatives</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">browser</span><span class="p">:</span>
            <span class="c1"># User gave us a command line, split it into name and args</span>
            <span class="n">browser</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">browser</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="n">browser</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># User gave us a browser name or path.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">_browsers</span><span class="p">[</span><span class="n">browser</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">_synthesize</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">command</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">command</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">]()</span>
    <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;could not locate runnable browser&quot;</span><span class="p">)</span></div>

<span class="c1"># Please note: the following definition hides a builtin function.</span>
<span class="c1"># It is recommended one does &quot;import webbrowser&quot; and uses webbrowser.open(url)</span>
<span class="c1"># instead of &quot;from webbrowser import *&quot;.</span>

<div class="viewcode-block" id="open"><a class="viewcode-back" href="../generated/webbrowser.open.html#webbrowser.open">[docs]</a><span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_tryorder</span><span class="p">:</span>
        <span class="n">browser</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">browser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">autoraise</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="open_new"><a class="viewcode-back" href="../generated/webbrowser.open_new.html#webbrowser.open_new">[docs]</a><span class="k">def</span> <span class="nf">open_new</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="open_new_tab"><a class="viewcode-back" href="../generated/webbrowser.open_new_tab.html#webbrowser.open_new_tab">[docs]</a><span class="k">def</span> <span class="nf">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_synthesize</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">update_tryorder</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attempt to synthesize a controller base on existing controllers.</span>

<span class="sd">    This is useful to create a controller when a user specifies a path to</span>
<span class="sd">    an entry in the BROWSER environment variable -- we can copy a general</span>
<span class="sd">    controller to operate using a specific installation of the desired</span>
<span class="sd">    browser in this way.</span>

<span class="sd">    If we can&#39;t create a controller in this way, or if there is no</span>
<span class="sd">    executable for the requested browser, return [None, None].</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_iscommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">_browsers</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="c1"># now attempt to clone to fit the new name:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">controller</span> <span class="ow">and</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">controller</span><span class="o">.</span><span class="n">basename</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">browser</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>
        <span class="n">register</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">update_tryorder</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">controller</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>


<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;win&quot;</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">_isexecutable</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cmd</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;.exe&quot;</span><span class="p">,</span> <span class="s2">&quot;.bat&quot;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="s2">&quot;.exe&quot;</span><span class="p">,</span> <span class="s2">&quot;.bat&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">cmd</span> <span class="o">+</span> <span class="n">ext</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">_isexecutable</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">cmd</span><span class="p">)[</span><span class="n">stat</span><span class="o">.</span><span class="n">ST_MODE</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">&amp;</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXUSR</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">&amp;</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXGRP</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">&amp;</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXOTH</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">_iscommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return True if cmd is executable or can be found on the executable</span>
<span class="sd">    search path.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">_isexecutable</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PATH&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">):</span>
        <span class="n">exe</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_isexecutable</span><span class="p">(</span><span class="n">exe</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>


<span class="c1"># General parent classes</span>

<div class="viewcode-block" id="BaseBrowser"><a class="viewcode-back" href="../generated/generated/webbrowser.BaseBrowser.html#webbrowser.BaseBrowser">[docs]</a><span class="k">class</span> <span class="nc">BaseBrowser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parent class for all browsers. Do not use directly.&quot;&quot;&quot;</span>

    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="BaseBrowser.__init__"><a class="viewcode-back" href="../generated/generated/webbrowser.BaseBrowser.__init__.html#webbrowser.BaseBrowser.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">basename</span> <span class="o">=</span> <span class="n">name</span></div>

<div class="viewcode-block" id="BaseBrowser.open"><a class="viewcode-back" href="../generated/generated/webbrowser.BaseBrowser.open.html#webbrowser.BaseBrowser.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="BaseBrowser.open_new"><a class="viewcode-back" href="../generated/generated/webbrowser.BaseBrowser.open_new.html#webbrowser.BaseBrowser.open_new">[docs]</a>    <span class="k">def</span> <span class="nf">open_new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseBrowser.open_new_tab"><a class="viewcode-back" href="../generated/generated/webbrowser.BaseBrowser.open_new_tab.html#webbrowser.BaseBrowser.open_new_tab">[docs]</a>    <span class="k">def</span> <span class="nf">open_new_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="GenericBrowser"><a class="viewcode-back" href="../generated/generated/webbrowser.GenericBrowser.html#webbrowser.GenericBrowser">[docs]</a><span class="k">class</span> <span class="nc">GenericBrowser</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for all browsers started with a command</span>
<span class="sd">       and without remote functionality.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="GenericBrowser.__init__"><a class="viewcode-back" href="../generated/generated/webbrowser.GenericBrowser.__init__.html#webbrowser.GenericBrowser.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># name should be a list with arguments</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="GenericBrowser.open"><a class="viewcode-back" href="../generated/generated/webbrowser.GenericBrowser.open.html#webbrowser.GenericBrowser.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">cmdline</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
                                 <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;win&#39;</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdline</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="BackgroundBrowser"><a class="viewcode-back" href="../generated/generated/webbrowser.BackgroundBrowser.html#webbrowser.BackgroundBrowser">[docs]</a><span class="k">class</span> <span class="nc">BackgroundBrowser</span><span class="p">(</span><span class="n">GenericBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for all browsers which are to be started in the</span>
<span class="sd">       background.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BackgroundBrowser.open"><a class="viewcode-back" href="../generated/generated/webbrowser.BackgroundBrowser.open.html#webbrowser.BackgroundBrowser.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">cmdline</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
                                 <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;win&#39;</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdline</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setsid&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">setsid</span><span class="p">:</span>
                    <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setpgrp&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">preexec_fn</span><span class="o">=</span><span class="n">setsid</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="UnixBrowser"><a class="viewcode-back" href="../generated/generated/webbrowser.UnixBrowser.html#webbrowser.UnixBrowser">[docs]</a><span class="k">class</span> <span class="nc">UnixBrowser</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parent class for all Unix browsers with remote functionality.&quot;&quot;&quot;</span>

    <span class="n">raise_opts</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;%action&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">remote_action_newtab</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">redirect_stdout</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">remote</span><span class="p">,</span> <span class="n">autoraise</span><span class="p">):</span>
        <span class="n">raise_opt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">remote</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">raise_opts</span><span class="p">:</span>
            <span class="c1"># use autoraise argument only for remote invocation</span>
            <span class="n">autoraise</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">autoraise</span><span class="p">)</span>
            <span class="n">opt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raise_opts</span><span class="p">[</span><span class="n">autoraise</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">opt</span><span class="p">:</span> <span class="n">raise_opt</span> <span class="o">=</span> <span class="p">[</span><span class="n">opt</span><span class="p">]</span>

        <span class="n">cmdline</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="n">raise_opt</span> <span class="o">+</span> <span class="n">args</span>

        <span class="k">if</span> <span class="n">remote</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="n">inout</span> <span class="o">=</span> <span class="n">file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">devnull</span><span class="p">,</span> <span class="s2">&quot;r+&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for TTY browsers, we need stdin/out</span>
            <span class="n">inout</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># if possible, put browser in separate process group, so</span>
        <span class="c1"># keyboard interrupts don&#39;t affect browser as well as Python</span>
        <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setsid&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">setsid</span><span class="p">:</span>
            <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setpgrp&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">inout</span><span class="p">,</span>
                             <span class="n">stdout</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">redirect_stdout</span> <span class="ow">and</span> <span class="n">inout</span> <span class="ow">or</span> <span class="kc">None</span><span class="p">),</span>
                             <span class="n">stderr</span><span class="o">=</span><span class="n">inout</span><span class="p">,</span> <span class="n">preexec_fn</span><span class="o">=</span><span class="n">setsid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">remote</span><span class="p">:</span>
            <span class="c1"># wait five seconds. If the subprocess is not finished, the</span>
            <span class="c1"># remote invocation has (hopefully) started a new instance.</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">rc</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">rc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
                <span class="n">rc</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">rc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="c1"># if remote call failed, open() will try direct invocation</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">rc</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

<div class="viewcode-block" id="UnixBrowser.open"><a class="viewcode-back" href="../generated/generated/webbrowser.UnixBrowser.open.html#webbrowser.UnixBrowser.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_action</span>
        <span class="k">elif</span> <span class="n">new</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_action_newwin</span>
        <span class="k">elif</span> <span class="n">new</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_action_newtab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_action_newwin</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_action_newtab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;Bad &#39;new&#39; parameter to open(); &quot;</span> <span class="o">+</span>
                        <span class="s2">&quot;expected 0, 1, or 2, got </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">new</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%action&quot;</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">remote_args</span><span class="p">]</span>
        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoke</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">autoraise</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
            <span class="c1"># remote invocation failed, try straight way</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoke</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div></div>


<div class="viewcode-block" id="Mozilla"><a class="viewcode-back" href="../generated/generated/webbrowser.Mozilla.html#webbrowser.Mozilla">[docs]</a><span class="k">class</span> <span class="nc">Mozilla</span><span class="p">(</span><span class="n">UnixBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Launcher class for Mozilla/Netscape browsers.&quot;&quot;&quot;</span>

    <span class="n">raise_opts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-noraise&quot;</span><span class="p">,</span> <span class="s2">&quot;-raise&quot;</span><span class="p">]</span>
    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-remote&#39;</span><span class="p">,</span> <span class="s1">&#39;openURL(</span><span class="si">%s</span><span class="s1">%action)&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="s2">&quot;,new-window&quot;</span>
    <span class="n">remote_action_newtab</span> <span class="o">=</span> <span class="s2">&quot;,new-tab&quot;</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">True</span></div>

<span class="n">Netscape</span> <span class="o">=</span> <span class="n">Mozilla</span>


<div class="viewcode-block" id="Galeon"><a class="viewcode-back" href="../generated/generated/webbrowser.Galeon.html#webbrowser.Galeon">[docs]</a><span class="k">class</span> <span class="nc">Galeon</span><span class="p">(</span><span class="n">UnixBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Launcher class for Galeon/Epiphany browsers.&quot;&quot;&quot;</span>

    <span class="n">raise_opts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-noraise&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;%action&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="s2">&quot;-n&quot;</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="s2">&quot;-w&quot;</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Chrome"><a class="viewcode-back" href="../generated/generated/webbrowser.Chrome.html#webbrowser.Chrome">[docs]</a><span class="k">class</span> <span class="nc">Chrome</span><span class="p">(</span><span class="n">UnixBrowser</span><span class="p">):</span>
    <span class="s2">&quot;Launcher class for Google Chrome browser.&quot;</span>

    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;%action&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="s2">&quot;--new-window&quot;</span>
    <span class="n">remote_action_newtab</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">True</span></div>

<span class="n">Chromium</span> <span class="o">=</span> <span class="n">Chrome</span>


<div class="viewcode-block" id="Opera"><a class="viewcode-back" href="../generated/generated/webbrowser.Opera.html#webbrowser.Opera">[docs]</a><span class="k">class</span> <span class="nc">Opera</span><span class="p">(</span><span class="n">UnixBrowser</span><span class="p">):</span>
    <span class="s2">&quot;Launcher class for Opera browser.&quot;</span>

    <span class="n">raise_opts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-noraise&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-remote&#39;</span><span class="p">,</span> <span class="s1">&#39;openURL(</span><span class="si">%s</span><span class="s1">%action)&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="s2">&quot;,new-window&quot;</span>
    <span class="n">remote_action_newtab</span> <span class="o">=</span> <span class="s2">&quot;,new-page&quot;</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Elinks"><a class="viewcode-back" href="../generated/generated/webbrowser.Elinks.html#webbrowser.Elinks">[docs]</a><span class="k">class</span> <span class="nc">Elinks</span><span class="p">(</span><span class="n">UnixBrowser</span><span class="p">):</span>
    <span class="s2">&quot;Launcher class for Elinks browsers.&quot;</span>

    <span class="n">remote_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-remote&#39;</span><span class="p">,</span> <span class="s1">&#39;openURL(</span><span class="si">%s</span><span class="s1">%action)&#39;</span><span class="p">]</span>
    <span class="n">remote_action</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">remote_action_newwin</span> <span class="o">=</span> <span class="s2">&quot;,new-window&quot;</span>
    <span class="n">remote_action_newtab</span> <span class="o">=</span> <span class="s2">&quot;,new-tab&quot;</span>
    <span class="n">background</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># elinks doesn&#39;t like its stdout to be redirected -</span>
    <span class="c1"># it uses redirected stdout as a signal to do -dump</span>
    <span class="n">redirect_stdout</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Konqueror"><a class="viewcode-back" href="../generated/generated/webbrowser.Konqueror.html#webbrowser.Konqueror">[docs]</a><span class="k">class</span> <span class="nc">Konqueror</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Controller for the KDE File Manager (kfm, or Konqueror).</span>

<span class="sd">    See the output of ``kfmclient --commands``</span>
<span class="sd">    for more information on the Konqueror remote-control interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Konqueror.open"><a class="viewcode-back" href="../generated/generated/webbrowser.Konqueror.open.html#webbrowser.Konqueror.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># XXX Currently I know no way to prevent KFM from opening a new win.</span>
        <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s2">&quot;newTab&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s2">&quot;openURL&quot;</span>

        <span class="n">devnull</span> <span class="o">=</span> <span class="n">file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">devnull</span><span class="p">,</span> <span class="s2">&quot;r+&quot;</span><span class="p">)</span>
        <span class="c1"># if possible, put browser in separate process group, so</span>
        <span class="c1"># keyboard interrupts don&#39;t affect browser as well as Python</span>
        <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setsid&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">setsid</span><span class="p">:</span>
            <span class="n">setsid</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s1">&#39;setpgrp&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;kfmclient&quot;</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">url</span><span class="p">],</span>
                                 <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span>
                                 <span class="n">stdout</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">devnull</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="c1"># fall through to next variant</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="c1"># kfmclient&#39;s return code unfortunately has no meaning as it seems</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;konqueror&quot;</span><span class="p">,</span> <span class="s2">&quot;--silent&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">],</span>
                                 <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span>
                                 <span class="n">stdout</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span>
                                 <span class="n">preexec_fn</span><span class="o">=</span><span class="n">setsid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="c1"># fall through to next variant</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Should be running now.</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;kfm&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">],</span>
                                 <span class="n">close_fds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span>
                                 <span class="n">stdout</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">devnull</span><span class="p">,</span>
                                 <span class="n">preexec_fn</span><span class="o">=</span><span class="n">setsid</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Grail"><a class="viewcode-back" href="../generated/generated/webbrowser.Grail.html#webbrowser.Grail">[docs]</a><span class="k">class</span> <span class="nc">Grail</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
    <span class="c1"># There should be a way to maintain a connection to Grail, but the</span>
    <span class="c1"># Grail remote control protocol doesn&#39;t really allow that at this</span>
    <span class="c1"># point.  It probably never will!</span>
    <span class="k">def</span> <span class="nf">_find_grail_rc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">glob</span>
        <span class="kn">import</span> <span class="nn">pwd</span>
        <span class="kn">import</span> <span class="nn">socket</span>
        <span class="kn">import</span> <span class="nn">tempfile</span>
        <span class="n">tempdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span>
                               <span class="s2">&quot;.grail-unix&quot;</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwuid</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getuid</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempdir</span><span class="p">,</span> <span class="n">user</span> <span class="o">+</span> <span class="s2">&quot;-*&quot;</span><span class="p">)</span>
        <span class="n">maybes</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">maybes</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_UNIX</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">maybes</span><span class="p">:</span>
            <span class="c1"># need to PING each one until we find one that&#39;s live</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
                <span class="c1"># no good; attempt to clean it out, but don&#39;t fail:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_grail_rc</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">1</span>

<div class="viewcode-block" id="Grail.open"><a class="viewcode-back" href="../generated/generated/webbrowser.Grail.open.html#webbrowser.Grail.open">[docs]</a>    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">new</span><span class="p">:</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remote</span><span class="p">(</span><span class="s2">&quot;LOADNEW &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remote</span><span class="p">(</span><span class="s2">&quot;LOAD &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ok</span></div></div>


<span class="c1">#</span>
<span class="c1"># Platform support for Unix</span>
<span class="c1">#</span>

<span class="c1"># These are the right tests because all these Unix browsers require either</span>
<span class="c1"># a console terminal or an X display to run.</span>

<div class="viewcode-block" id="register_X_browsers"><a class="viewcode-back" href="../generated/webbrowser.register_X_browsers.html#webbrowser.register_X_browsers">[docs]</a><span class="k">def</span> <span class="nf">register_X_browsers</span><span class="p">():</span>

    <span class="c1"># use xdg-open if around</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;xdg-open&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;xdg-open&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;xdg-open&quot;</span><span class="p">))</span>

    <span class="c1"># The default GNOME3 browser</span>
    <span class="k">if</span> <span class="s2">&quot;GNOME_DESKTOP_SESSION_ID&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span> <span class="ow">and</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;gvfs-open&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;gvfs-open&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;gvfs-open&quot;</span><span class="p">))</span>

    <span class="c1"># The default GNOME browser</span>
    <span class="k">if</span> <span class="s2">&quot;GNOME_DESKTOP_SESSION_ID&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span> <span class="ow">and</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;gnome-open&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;gnome-open&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;gnome-open&quot;</span><span class="p">))</span>

    <span class="c1"># The default KDE browser</span>
    <span class="k">if</span> <span class="s2">&quot;KDE_FULL_SESSION&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span> <span class="ow">and</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;kfmclient&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;kfmclient&quot;</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">(</span><span class="s2">&quot;kfmclient&quot;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;x-www-browser&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;x-www-browser&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;x-www-browser&quot;</span><span class="p">))</span>

    <span class="c1"># The Mozilla/Netscape browsers</span>
    <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;mozilla-firefox&quot;</span><span class="p">,</span> <span class="s2">&quot;firefox&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;mozilla-firebird&quot;</span><span class="p">,</span> <span class="s2">&quot;firebird&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;iceweasel&quot;</span><span class="p">,</span> <span class="s2">&quot;iceape&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;seamonkey&quot;</span><span class="p">,</span> <span class="s2">&quot;mozilla&quot;</span><span class="p">,</span> <span class="s2">&quot;netscape&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="n">browser</span><span class="p">):</span>
            <span class="n">register</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Mozilla</span><span class="p">(</span><span class="n">browser</span><span class="p">))</span>

    <span class="c1"># Konqueror/kfm, the KDE browser.</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;kfm&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;kfm&quot;</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">(</span><span class="s2">&quot;kfm&quot;</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;konqueror&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;konqueror&quot;</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">,</span> <span class="n">Konqueror</span><span class="p">(</span><span class="s2">&quot;konqueror&quot;</span><span class="p">))</span>

    <span class="c1"># Gnome&#39;s Galeon and Epiphany</span>
    <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;galeon&quot;</span><span class="p">,</span> <span class="s2">&quot;epiphany&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="n">browser</span><span class="p">):</span>
            <span class="n">register</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Galeon</span><span class="p">(</span><span class="n">browser</span><span class="p">))</span>

    <span class="c1"># Skipstone, another Gtk/Mozilla based browser</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;skipstone&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;skipstone&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;skipstone&quot;</span><span class="p">))</span>

    <span class="c1"># Google Chrome/Chromium browsers</span>
    <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;google-chrome&quot;</span><span class="p">,</span> <span class="s2">&quot;chrome&quot;</span><span class="p">,</span> <span class="s2">&quot;chromium&quot;</span><span class="p">,</span> <span class="s2">&quot;chromium-browser&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="n">browser</span><span class="p">):</span>
            <span class="n">register</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Chrome</span><span class="p">(</span><span class="n">browser</span><span class="p">))</span>

    <span class="c1"># Opera, quite popular</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;opera&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;opera&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Opera</span><span class="p">(</span><span class="s2">&quot;opera&quot;</span><span class="p">))</span>

    <span class="c1"># Next, Mosaic -- old but still in use.</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;mosaic&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;mosaic&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="s2">&quot;mosaic&quot;</span><span class="p">))</span>

    <span class="c1"># Grail, the Python browser. Does anybody still use it?</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;grail&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;grail&quot;</span><span class="p">,</span> <span class="n">Grail</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<span class="c1"># Prefer X browsers if present</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;DISPLAY&quot;</span><span class="p">):</span>
    <span class="n">register_X_browsers</span><span class="p">()</span>

<span class="c1"># Also try console browsers</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;TERM&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;www-browser&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;www-browser&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="s2">&quot;www-browser&quot;</span><span class="p">))</span>
    <span class="c1"># The Links/elinks browsers &lt;http://artax.karlin.mff.cuni.cz/~mikulas/links/&gt;</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;links&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;links&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="s2">&quot;links&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;elinks&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;elinks&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Elinks</span><span class="p">(</span><span class="s2">&quot;elinks&quot;</span><span class="p">))</span>
    <span class="c1"># The Lynx browser &lt;http://lynx.isc.org/&gt;, &lt;http://lynx.browser.org/&gt;</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;lynx&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;lynx&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="s2">&quot;lynx&quot;</span><span class="p">))</span>
    <span class="c1"># The w3m browser &lt;http://w3m.sourceforge.net/&gt;</span>
    <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;w3m&quot;</span><span class="p">):</span>
        <span class="n">register</span><span class="p">(</span><span class="s2">&quot;w3m&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="s2">&quot;w3m&quot;</span><span class="p">))</span>

<span class="c1">#</span>
<span class="c1"># Platform support for Windows</span>
<span class="c1">#</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;win&quot;</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">WindowsDefault</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">startfile</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">WindowsError</span><span class="p">:</span>
                <span class="c1"># [Error 22] No application is associated with the specified</span>
                <span class="c1"># file for this operation: &#39;&lt;URL&gt;&#39;</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

    <span class="n">_tryorder</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_browsers</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># First try to use the default Windows browser</span>
    <span class="n">register</span><span class="p">(</span><span class="s2">&quot;windows-default&quot;</span><span class="p">,</span> <span class="n">WindowsDefault</span><span class="p">)</span>

    <span class="c1"># Detect some common Windows browsers, fallback to IE</span>
    <span class="n">iexplore</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PROGRAMFILES&quot;</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Program Files&quot;</span><span class="p">),</span>
                            <span class="s2">&quot;Internet Explorer</span><span class="se">\\</span><span class="s2">IEXPLORE.EXE&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;firefox&quot;</span><span class="p">,</span> <span class="s2">&quot;firebird&quot;</span><span class="p">,</span> <span class="s2">&quot;seamonkey&quot;</span><span class="p">,</span> <span class="s2">&quot;mozilla&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;netscape&quot;</span><span class="p">,</span> <span class="s2">&quot;opera&quot;</span><span class="p">,</span> <span class="n">iexplore</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_iscommand</span><span class="p">(</span><span class="n">browser</span><span class="p">):</span>
            <span class="n">register</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">BackgroundBrowser</span><span class="p">(</span><span class="n">browser</span><span class="p">))</span>

<span class="c1">#</span>
<span class="c1"># Platform support for MacOS</span>
<span class="c1">#</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;darwin&#39;</span><span class="p">:</span>
    <span class="c1"># Adapted from patch submitted to SourceForge by Steven J. Burr</span>
    <span class="k">class</span> <span class="nc">MacOSX</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Launcher class for Aqua browsers on Mac OS X</span>

<span class="sd">        Optionally specify a browser name on instantiation.  Note that this</span>
<span class="sd">        will not work for Aqua browsers if the user has moved the application</span>
<span class="sd">        package after installation.</span>

<span class="sd">        If no browser is specified, the default browser, as specified in the</span>
<span class="sd">        Internet System Preferences panel, will be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">assert</span> <span class="s2">&quot;&#39;&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">url</span>
            <span class="c1"># hack for local urls</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file:&#39;</span><span class="o">+</span><span class="n">url</span>

            <span class="c1"># new must be 0 or 1</span>
            <span class="n">new</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">new</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
                <span class="c1"># User called open, open_new or get without a browser parameter</span>
                <span class="n">script</span> <span class="o">=</span> <span class="s1">&#39;open location &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;%22&#39;</span><span class="p">)</span> <span class="c1"># opens in default browser</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># User called get and chose a browser</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;OmniWeb&quot;</span><span class="p">:</span>
                    <span class="n">toWindow</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Include toWindow parameter of OpenURL command for browsers</span>
                    <span class="c1"># that support it.  0 == new window; -1 == existing</span>
                    <span class="n">toWindow</span> <span class="o">=</span> <span class="s2">&quot;toWindow </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;OpenURL &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;%22&#39;</span><span class="p">)</span>
                <span class="n">script</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;tell application &quot;</span><span class="si">%s</span><span class="s1">&quot;</span>
<span class="s1">                                activate</span>
<span class="s1">                                </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"></span>
<span class="s1">                            end tell&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">toWindow</span><span class="p">)</span>
            <span class="c1"># Open pipe to AppleScript through osascript command</span>
            <span class="n">osapipe</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s2">&quot;osascript&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">osapipe</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># Write script to osascript&#39;s stdin</span>
            <span class="n">osapipe</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
            <span class="n">rc</span> <span class="o">=</span> <span class="n">osapipe</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">rc</span>

    <span class="k">class</span> <span class="nc">MacOSXOSAScript</span><span class="p">(</span><span class="n">BaseBrowser</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoraise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
                <span class="n">script</span> <span class="o">=</span> <span class="s1">&#39;open location &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;%22&#39;</span><span class="p">)</span> <span class="c1"># opens in default browser</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">script</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                   tell application &quot;</span><span class="si">%s</span><span class="s1">&quot;</span>
<span class="s1">                       activate</span>
<span class="s1">                       open location &quot;</span><span class="si">%s</span><span class="s1">&quot;</span>
<span class="s1">                   end</span>
<span class="s1">                   &#39;&#39;&#39;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;%22&#39;</span><span class="p">))</span>

            <span class="n">osapipe</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s2">&quot;osascript&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">osapipe</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="n">osapipe</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
            <span class="n">rc</span> <span class="o">=</span> <span class="n">osapipe</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">rc</span>


    <span class="c1"># Don&#39;t clear _tryorder or _browsers since OS X can use above Unix support</span>
    <span class="c1"># (but we prefer using the OS X specific stuff)</span>
    <span class="n">register</span><span class="p">(</span><span class="s2">&quot;safari&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">MacOSXOSAScript</span><span class="p">(</span><span class="s1">&#39;safari&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">register</span><span class="p">(</span><span class="s2">&quot;firefox&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">MacOSXOSAScript</span><span class="p">(</span><span class="s1">&#39;firefox&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">register</span><span class="p">(</span><span class="s2">&quot;MacOSX&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">MacOSXOSAScript</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="c1">#</span>
<span class="c1"># Platform support for OS/2</span>
<span class="c1">#</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;os2&quot;</span> <span class="ow">and</span> <span class="n">_iscommand</span><span class="p">(</span><span class="s2">&quot;netscape&quot;</span><span class="p">):</span>
    <span class="n">_tryorder</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_browsers</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">register</span><span class="p">(</span><span class="s2">&quot;os2netscape&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">GenericBrowser</span><span class="p">([</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;netscape&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">]),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="c1"># OK, now that we know what the default preference orders for each</span>
<span class="c1"># platform are, allow user to override them with the BROWSER variable.</span>
<span class="k">if</span> <span class="s2">&quot;BROWSER&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
    <span class="n">_userchoices</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;BROWSER&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">)</span>
    <span class="n">_userchoices</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

    <span class="c1"># Treat choices in same way as if passed into get() but do register</span>
    <span class="c1"># and prepend to _tryorder</span>
    <span class="k">for</span> <span class="n">cmdline</span> <span class="ow">in</span> <span class="n">_userchoices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cmdline</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="n">_synthesize</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cmd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">register</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">GenericBrowser</span><span class="p">(</span><span class="n">cmdline</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">cmdline</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># to make del work if _userchoices was empty</span>
    <span class="k">del</span> <span class="n">cmdline</span>
    <span class="k">del</span> <span class="n">_userchoices</span>

<span class="c1"># what to do if _tryorder is now empty?</span>


<div class="viewcode-block" id="main"><a class="viewcode-back" href="../generated/webbrowser.main.html#webbrowser.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">getopt</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Usage: </span><span class="si">%s</span><span class="s2"> [-n | -t] url</span>
<span class="s2">    -n: open new window</span>
<span class="s2">    -t: open new tab&quot;&quot;&quot;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">opts</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">getopt</span><span class="o">.</span><span class="n">getopt</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s1">&#39;ntd&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">getopt</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span>
        <span class="nb">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">msg</span>
        <span class="nb">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">usage</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">new_win</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">o</span> <span class="o">==</span> <span class="s1">&#39;-n&#39;</span><span class="p">:</span> <span class="n">new_win</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">o</span> <span class="o">==</span> <span class="s1">&#39;-t&#39;</span><span class="p">:</span> <span class="n">new_win</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">usage</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">new_win</span><span class="p">)</span>

    <span class="nb">print</span> <span class="s2">&quot;</span><span class="se">\a</span><span class="s2">&quot;</span></div>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>