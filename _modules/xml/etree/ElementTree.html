

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>xml.etree.ElementTree &mdash; Python Standard Library</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/py.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Python Standard Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../01to10.html">Ch 01 - 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../11to20.html">Ch 11 - 20</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../21to30.html">Ch 21 - 30</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../31to37.html">Ch 31 - 37</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_all.html">api</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Python Standard Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>xml.etree.ElementTree</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for xml.etree.ElementTree</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># ElementTree</span>
<span class="c1"># $Id: ElementTree.py 3440 2008-07-18 14:45:01Z fredrik $</span>
<span class="c1">#</span>
<span class="c1"># light-weight XML support for Python 2.3 and later.</span>
<span class="c1">#</span>
<span class="c1"># history (since 1.2.6):</span>
<span class="c1"># 2005-11-12 fl   added tostringlist/fromstringlist helpers</span>
<span class="c1"># 2006-07-05 fl   merged in selected changes from the 1.3 sandbox</span>
<span class="c1"># 2006-07-05 fl   removed support for 2.1 and earlier</span>
<span class="c1"># 2007-06-21 fl   added deprecation/future warnings</span>
<span class="c1"># 2007-08-25 fl   added doctype hook, added parser version attribute etc</span>
<span class="c1"># 2007-08-26 fl   added new serializer code (better namespace handling, etc)</span>
<span class="c1"># 2007-08-27 fl   warn for broken /tag searches on tree level</span>
<span class="c1"># 2007-09-02 fl   added html/text methods to serializer (experimental)</span>
<span class="c1"># 2007-09-05 fl   added method argument to tostring/tostringlist</span>
<span class="c1"># 2007-09-06 fl   improved error handling</span>
<span class="c1"># 2007-09-13 fl   added itertext, iterfind; assorted cleanups</span>
<span class="c1"># 2007-12-15 fl   added C14N hooks, copy method (experimental)</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 1999-2008 by Fredrik Lundh.  All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># fredrik@pythonware.com</span>
<span class="c1"># http://www.pythonware.com</span>
<span class="c1">#</span>
<span class="c1"># --------------------------------------------------------------------</span>
<span class="c1"># The ElementTree toolkit is</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 1999-2008 by Fredrik Lundh</span>
<span class="c1">#</span>
<span class="c1"># By obtaining, using, and/or copying this software and/or its</span>
<span class="c1"># associated documentation, you agree that you have read, understood,</span>
<span class="c1"># and will comply with the following terms and conditions:</span>
<span class="c1">#</span>
<span class="c1"># Permission to use, copy, modify, and distribute this software and</span>
<span class="c1"># its associated documentation for any purpose and without fee is</span>
<span class="c1"># hereby granted, provided that the above copyright notice appears in</span>
<span class="c1"># all copies, and that both that copyright notice and this permission</span>
<span class="c1"># notice appear in supporting documentation, and that the name of</span>
<span class="c1"># Secret Labs AB or the author not be used in advertising or publicity</span>
<span class="c1"># pertaining to distribution of the software without specific, written</span>
<span class="c1"># prior permission.</span>
<span class="c1">#</span>
<span class="c1"># SECRET LABS AB AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD</span>
<span class="c1"># TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANT-</span>
<span class="c1"># ABILITY AND FITNESS.  IN NO EVENT SHALL SECRET LABS AB OR THE AUTHOR</span>
<span class="c1"># BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY</span>
<span class="c1"># DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,</span>
<span class="c1"># WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS</span>
<span class="c1"># ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE</span>
<span class="c1"># OF THIS SOFTWARE.</span>
<span class="c1"># --------------------------------------------------------------------</span>

<span class="c1"># Licensed to PSF under a Contributor Agreement.</span>
<span class="c1"># See http://www.python.org/psf/license for licensing details.</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># public symbols</span>
    <span class="s2">&quot;Comment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dump&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Element&quot;</span><span class="p">,</span> <span class="s2">&quot;ElementTree&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fromstring&quot;</span><span class="p">,</span> <span class="s2">&quot;fromstringlist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iselement&quot;</span><span class="p">,</span> <span class="s2">&quot;iterparse&quot;</span><span class="p">,</span>
    <span class="s2">&quot;parse&quot;</span><span class="p">,</span> <span class="s2">&quot;ParseError&quot;</span><span class="p">,</span>
    <span class="s2">&quot;PI&quot;</span><span class="p">,</span> <span class="s2">&quot;ProcessingInstruction&quot;</span><span class="p">,</span>
    <span class="s2">&quot;QName&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SubElement&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tostring&quot;</span><span class="p">,</span> <span class="s2">&quot;tostringlist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TreeBuilder&quot;</span><span class="p">,</span>
    <span class="s2">&quot;VERSION&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XML&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XMLParser&quot;</span><span class="p">,</span> <span class="s2">&quot;XMLTreeBuilder&quot;</span><span class="p">,</span>
    <span class="p">]</span>

<span class="n">VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.3.0&quot;</span>

<span class="c1">##</span>
<span class="c1"># The &lt;b&gt;Element&lt;/b&gt; type is a flexible container object, designed to</span>
<span class="c1"># store hierarchical data structures in memory. The type can be</span>
<span class="c1"># described as a cross between a list and a dictionary.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># Each element has a number of properties associated with it:</span>
<span class="c1"># &lt;ul&gt;</span>
<span class="c1"># &lt;li&gt;a &lt;i&gt;tag&lt;/i&gt;. This is a string identifying what kind of data</span>
<span class="c1"># this element represents (the element type, in other words).&lt;/li&gt;</span>
<span class="c1"># &lt;li&gt;a number of &lt;i&gt;attributes&lt;/i&gt;, stored in a Python dictionary.&lt;/li&gt;</span>
<span class="c1"># &lt;li&gt;a &lt;i&gt;text&lt;/i&gt; string.&lt;/li&gt;</span>
<span class="c1"># &lt;li&gt;an optional &lt;i&gt;tail&lt;/i&gt; string.&lt;/li&gt;</span>
<span class="c1"># &lt;li&gt;a number of &lt;i&gt;child elements&lt;/i&gt;, stored in a Python sequence&lt;/li&gt;</span>
<span class="c1"># &lt;/ul&gt;</span>
<span class="c1">#</span>
<span class="c1"># To create an element instance, use the {@link #Element} constructor</span>
<span class="c1"># or the {@link #SubElement} factory function.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># The {@link #ElementTree} class can be used to wrap an element</span>
<span class="c1"># structure, and convert it from and to XML.</span>
<span class="c1">##</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>


<span class="k">class</span> <span class="nc">_SimpleElementPath</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># emulate pre-1.2 find/findtext/findall behaviour</span>
    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">element</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">elem</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="k">def</span> <span class="nf">findtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="k">return</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">iterfind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tag</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.//&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="p">[</span><span class="mi">3</span><span class="p">:]):</span>
                <span class="k">yield</span> <span class="n">elem</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">element</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">elem</span>
    <span class="k">def</span> <span class="nf">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">))</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">ElementPath</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">ElementPath</span> <span class="o">=</span> <span class="n">_SimpleElementPath</span><span class="p">()</span>

<span class="c1">##</span>
<span class="c1"># Parser error.  This is a subclass of &lt;b&gt;SyntaxError&lt;/b&gt;.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># In addition to the exception value, an exception instance contains a</span>
<span class="c1"># specific exception code in the &lt;b&gt;code&lt;/b&gt; attribute, and the line and</span>
<span class="c1"># column of the error in the &lt;b&gt;position&lt;/b&gt; attribute.</span>

<div class="viewcode-block" id="ParseError"><a class="viewcode-back" href="../../../generated/xml.etree.ElementTree.ParseError.html#xml.etree.ElementTree.ParseError">[docs]</a><span class="k">class</span> <span class="nc">ParseError</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1"># --------------------------------------------------------------------</span>

<span class="c1">##</span>
<span class="c1"># Checks if an object appears to be a valid element object.</span>
<span class="c1">#</span>
<span class="c1"># @param An element instance.</span>
<span class="c1"># @return A true value if this is an element object.</span>
<span class="c1"># @defreturn flag</span>

<div class="viewcode-block" id="iselement"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.iselement.html#xml.etree.ElementTree.iselement">[docs]</a><span class="k">def</span> <span class="nf">iselement</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
    <span class="c1"># FIXME: not sure about this; might be a better idea to look</span>
    <span class="c1"># for tag/attrib/text attributes</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Element</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">)</span></div>

<span class="c1">##</span>
<span class="c1"># Element class.  This class defines the Element interface, and</span>
<span class="c1"># provides a reference implementation of this interface.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># The element name, attribute names, and attribute values can be</span>
<span class="c1"># either ASCII strings (ordinary Python strings containing only 7-bit</span>
<span class="c1"># ASCII characters) or Unicode strings.</span>
<span class="c1">#</span>
<span class="c1"># @param tag The element name.</span>
<span class="c1"># @param attrib An optional dictionary, containing element attributes.</span>
<span class="c1"># @param **extra Additional attributes, given as keyword arguments.</span>
<span class="c1"># @see Element</span>
<span class="c1"># @see SubElement</span>
<span class="c1"># @see Comment</span>
<span class="c1"># @see ProcessingInstruction</span>

<div class="viewcode-block" id="Element"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.html#xml.etree.ElementTree.Element">[docs]</a><span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># &lt;tag attrib&gt;text&lt;child/&gt;...&lt;/tag&gt;tail</span>

    <span class="c1">##</span>
    <span class="c1"># (Attribute) Element tag.</span>

    <span class="n">tag</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">##</span>
    <span class="c1"># (Attribute) Element attribute dictionary.  Where possible, use</span>
    <span class="c1"># {@link #Element.get},</span>
    <span class="c1"># {@link #Element.set},</span>
    <span class="c1"># {@link #Element.keys}, and</span>
    <span class="c1"># {@link #Element.items} to access</span>
    <span class="c1"># element attributes.</span>

    <span class="n">attrib</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">##</span>
    <span class="c1"># (Attribute) Text before first subelement.  This is either a</span>
    <span class="c1"># string or the value None.  Note that if there was no text, this</span>
    <span class="c1"># attribute may be either None or an empty string, depending on</span>
    <span class="c1"># the parser.</span>

    <span class="n">text</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1">##</span>
    <span class="c1"># (Attribute) Text after this element&#39;s end tag, but before the</span>
    <span class="c1"># next sibling element&#39;s start tag.  This is either a string or</span>
    <span class="c1"># the value None.  Note that if there was no text, this attribute</span>
    <span class="c1"># may be either None or an empty string, depending on the parser.</span>

    <span class="n">tail</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># text after end tag, if any</span>

    <span class="c1"># constructor</span>

<div class="viewcode-block" id="Element.__init__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__init__.html#xml.etree.ElementTree.Element.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">extra</span><span class="p">):</span>
        <span class="n">attrib</span> <span class="o">=</span> <span class="n">attrib</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">attrib</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span> <span class="o">=</span> <span class="n">attrib</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Element.__repr__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__repr__.html#xml.etree.ElementTree.Element.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;Element </span><span class="si">%s</span><span class="s2"> at 0x</span><span class="si">%x</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

    <span class="c1">##</span>
    <span class="c1"># Creates a new element object of the same type as this element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param tag Element tag.</span>
    <span class="c1"># @param attrib Element attributes, given as a dictionary.</span>
    <span class="c1"># @return A new element instance.</span>

<div class="viewcode-block" id="Element.makeelement"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.makeelement.html#xml.etree.ElementTree.Element.makeelement">[docs]</a>    <span class="k">def</span> <span class="nf">makeelement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># (Experimental) Copies the current element.  This creates a</span>
    <span class="c1"># shallow copy; subelements will be shared with the original tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @return A new element instance.</span>

<div class="viewcode-block" id="Element.copy"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.copy.html#xml.etree.ElementTree.Element.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeelement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tail</span>
        <span class="n">elem</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="n">elem</span></div>

    <span class="c1">##</span>
    <span class="c1"># Returns the number of subelements.  Note that this only counts</span>
    <span class="c1"># full elements; to check if there&#39;s any content in an element, you</span>
    <span class="c1"># have to check both the length and the &lt;b&gt;text&lt;/b&gt; attribute.</span>
    <span class="c1">#</span>
    <span class="c1"># @return The number of subelements.</span>

<div class="viewcode-block" id="Element.__len__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__len__.html#xml.etree.ElementTree.Element.__len__">[docs]</a>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.__nonzero__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__nonzero__.html#xml.etree.ElementTree.Element.__nonzero__">[docs]</a>    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;The behavior of this method will change in future versions.  &quot;</span>
            <span class="s2">&quot;Use specific &#39;len(elem)&#39; or &#39;elem is not None&#39; test instead.&quot;</span><span class="p">,</span>
            <span class="ne">FutureWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="c1"># emulate old behaviour, for now</span></div>

    <span class="c1">##</span>
    <span class="c1"># Returns the given subelement, by index.</span>
    <span class="c1">#</span>
    <span class="c1"># @param index What subelement to return.</span>
    <span class="c1"># @return The given subelement.</span>
    <span class="c1"># @exception IndexError If the given element does not exist.</span>

<div class="viewcode-block" id="Element.__getitem__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__getitem__.html#xml.etree.ElementTree.Element.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

    <span class="c1">##</span>
    <span class="c1"># Replaces the given subelement, by index.</span>
    <span class="c1">#</span>
    <span class="c1"># @param index What subelement to replace.</span>
    <span class="c1"># @param element The new element value.</span>
    <span class="c1"># @exception IndexError If the given element does not exist.</span>

<div class="viewcode-block" id="Element.__setitem__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__setitem__.html#xml.etree.ElementTree.Element.__setitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="c1"># if isinstance(index, slice):</span>
        <span class="c1">#     for elt in element:</span>
        <span class="c1">#         assert iselement(elt)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span></div>

    <span class="c1">##</span>
    <span class="c1"># Deletes the given subelement, by index.</span>
    <span class="c1">#</span>
    <span class="c1"># @param index What subelement to delete.</span>
    <span class="c1"># @exception IndexError If the given element does not exist.</span>

<div class="viewcode-block" id="Element.__delitem__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.__delitem__.html#xml.etree.ElementTree.Element.__delitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

    <span class="c1">##</span>
    <span class="c1"># Adds a subelement to the end of this element.  In document order,</span>
    <span class="c1"># the new element will appear after the last existing subelement (or</span>
    <span class="c1"># directly after the text, if it&#39;s the first subelement), but before</span>
    <span class="c1"># the end tag for this element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param element The element to add.</span>

<div class="viewcode-block" id="Element.append"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.append.html#xml.etree.ElementTree.Element.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="c1"># assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Appends subelements from a sequence.</span>
    <span class="c1">#</span>
    <span class="c1"># @param elements A sequence object with zero or more elements.</span>
    <span class="c1"># @since 1.3</span>

<div class="viewcode-block" id="Element.extend"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.extend.html#xml.etree.ElementTree.Element.extend">[docs]</a>    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elements</span><span class="p">):</span>
        <span class="c1"># for element in elements:</span>
        <span class="c1">#     assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Inserts a subelement at the given position in this element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param index Where to insert the new subelement.</span>

<div class="viewcode-block" id="Element.insert"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.insert.html#xml.etree.ElementTree.Element.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="c1"># assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Removes a matching subelement.  Unlike the &lt;b&gt;find&lt;/b&gt; methods,</span>
    <span class="c1"># this method compares elements based on identity, not on tag</span>
    <span class="c1"># value or contents.  To remove subelements by other means, the</span>
    <span class="c1"># easiest way is often to use a list comprehension to select what</span>
    <span class="c1"># elements to keep, and use slice assignment to update the parent</span>
    <span class="c1"># element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param element What element to remove.</span>
    <span class="c1"># @exception ValueError If a matching element could not be found.</span>

<div class="viewcode-block" id="Element.remove"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.remove.html#xml.etree.ElementTree.Element.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="c1"># assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">element</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># (Deprecated) Returns all subelements.  The elements are returned</span>
    <span class="c1"># in document order.</span>
    <span class="c1">#</span>
    <span class="c1"># @return A list of subelements.</span>
    <span class="c1"># @defreturn list of Element instances</span>

<div class="viewcode-block" id="Element.getchildren"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.getchildren.html#xml.etree.ElementTree.Element.getchildren">[docs]</a>    <span class="k">def</span> <span class="nf">getchildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;This method will be removed in future versions.  &quot;</span>
            <span class="s2">&quot;Use &#39;list(elem)&#39; or iteration over elem instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finds the first matching subelement, by tag name or path.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return The first matching element, or None if no element was found.</span>
    <span class="c1"># @defreturn Element or None</span>

<div class="viewcode-block" id="Element.find"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.find.html#xml.etree.ElementTree.Element.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ElementPath</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finds text for the first matching subelement, by tag name or path.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @param default What to return if the element was not found.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return The text content of the first matching element, or the</span>
    <span class="c1">#     default value no element was found.  Note that if the element</span>
    <span class="c1">#     is found, but has no text content, this method returns an</span>
    <span class="c1">#     empty string.</span>
    <span class="c1"># @defreturn string</span>

<div class="viewcode-block" id="Element.findtext"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.findtext.html#xml.etree.ElementTree.Element.findtext">[docs]</a>    <span class="k">def</span> <span class="nf">findtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ElementPath</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">default</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finds all matching subelements, by tag name or path.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return A list or other sequence containing all matching elements,</span>
    <span class="c1">#    in document order.</span>
    <span class="c1"># @defreturn list of Element instances</span>

<div class="viewcode-block" id="Element.findall"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.findall.html#xml.etree.ElementTree.Element.findall">[docs]</a>    <span class="k">def</span> <span class="nf">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ElementPath</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finds all matching subelements, by tag name or path.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return An iterator or sequence containing all matching elements,</span>
    <span class="c1">#    in document order.</span>
    <span class="c1"># @defreturn a generated sequence of Element instances</span>

<div class="viewcode-block" id="Element.iterfind"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.iterfind.html#xml.etree.ElementTree.Element.iterfind">[docs]</a>    <span class="k">def</span> <span class="nf">iterfind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ElementPath</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Resets an element.  This function removes all subelements, clears</span>
    <span class="c1"># all attributes, and sets the &lt;b&gt;text&lt;/b&gt; and &lt;b&gt;tail&lt;/b&gt; attributes</span>
    <span class="c1"># to None.</span>

<div class="viewcode-block" id="Element.clear"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.clear.html#xml.etree.ElementTree.Element.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="bp">None</span></div>

    <span class="c1">##</span>
    <span class="c1"># Gets an element attribute.  Equivalent to &lt;b&gt;attrib.get&lt;/b&gt;, but</span>
    <span class="c1"># some implementations may handle this a bit more efficiently.</span>
    <span class="c1">#</span>
    <span class="c1"># @param key What attribute to look for.</span>
    <span class="c1"># @param default What to return if the attribute was not found.</span>
    <span class="c1"># @return The attribute value, or the default value, if the</span>
    <span class="c1">#     attribute was not found.</span>
    <span class="c1"># @defreturn string or None</span>

<div class="viewcode-block" id="Element.get"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.get.html#xml.etree.ElementTree.Element.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Sets an element attribute.  Equivalent to &lt;b&gt;attrib[key] = value&lt;/b&gt;,</span>
    <span class="c1"># but some implementations may handle this a bit more efficiently.</span>
    <span class="c1">#</span>
    <span class="c1"># @param key What attribute to set.</span>
    <span class="c1"># @param value The attribute value.</span>

<div class="viewcode-block" id="Element.set"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.set.html#xml.etree.ElementTree.Element.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

    <span class="c1">##</span>
    <span class="c1"># Gets a list of attribute names.  The names are returned in an</span>
    <span class="c1"># arbitrary order (just like for an ordinary Python dictionary).</span>
    <span class="c1"># Equivalent to &lt;b&gt;attrib.keys()&lt;/b&gt;.</span>
    <span class="c1">#</span>
    <span class="c1"># @return A list of element attribute names.</span>
    <span class="c1"># @defreturn list of strings</span>

<div class="viewcode-block" id="Element.keys"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.keys.html#xml.etree.ElementTree.Element.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

    <span class="c1">##</span>
    <span class="c1"># Gets element attributes, as a sequence.  The attributes are</span>
    <span class="c1"># returned in an arbitrary order.  Equivalent to &lt;b&gt;attrib.items()&lt;/b&gt;.</span>
    <span class="c1">#</span>
    <span class="c1"># @return A list of (name, value) tuples for all attributes.</span>
    <span class="c1"># @defreturn list of (string, string) tuples</span>

<div class="viewcode-block" id="Element.items"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.items.html#xml.etree.ElementTree.Element.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">items</span><span class="p">()</span></div>

    <span class="c1">##</span>
    <span class="c1"># Creates a tree iterator.  The iterator loops over this element</span>
    <span class="c1"># and all subelements, in document order, and returns all elements</span>
    <span class="c1"># with a matching tag.</span>
    <span class="c1"># &lt;p&gt;</span>
    <span class="c1"># If the tree structure is modified during iteration, new or removed</span>
    <span class="c1"># elements may or may not be included.  To get a stable set, use the</span>
    <span class="c1"># list() function on the iterator, and loop over the resulting list.</span>
    <span class="c1">#</span>
    <span class="c1"># @param tag What tags to look for (default is to return all elements).</span>
    <span class="c1"># @return An iterator containing all the matching elements.</span>
    <span class="c1"># @defreturn iterator</span>

<div class="viewcode-block" id="Element.iter"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.iter.html#xml.etree.ElementTree.Element.iter">[docs]</a>    <span class="k">def</span> <span class="nf">iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">tag</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">e</span></div>

    <span class="c1"># compatibility</span>
<div class="viewcode-block" id="Element.getiterator"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.getiterator.html#xml.etree.ElementTree.Element.getiterator">[docs]</a>    <span class="k">def</span> <span class="nf">getiterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># Change for a DeprecationWarning in 1.4</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;This method will be removed in future versions.  &quot;</span>
            <span class="s2">&quot;Use &#39;elem.iter()&#39; or &#39;list(elem.iter())&#39; instead.&quot;</span><span class="p">,</span>
            <span class="ne">PendingDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span></div>

    <span class="c1">##</span>
    <span class="c1"># Creates a text iterator.  The iterator loops over this element</span>
    <span class="c1"># and all subelements, in document order, and returns all inner</span>
    <span class="c1"># text.</span>
    <span class="c1">#</span>
    <span class="c1"># @return An iterator containing all inner text.</span>
    <span class="c1"># @defreturn iterator</span>

<div class="viewcode-block" id="Element.itertext"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Element.itertext.html#xml.etree.ElementTree.Element.itertext">[docs]</a>    <span class="k">def</span> <span class="nf">itertext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">)</span> <span class="ow">and</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">itertext</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">s</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">e</span><span class="o">.</span><span class="n">tail</span></div></div>

<span class="c1"># compatibility</span>
<span class="n">_Element</span> <span class="o">=</span> <span class="n">_ElementInterface</span> <span class="o">=</span> <span class="n">Element</span>

<span class="c1">##</span>
<span class="c1"># Subelement factory.  This function creates an element instance, and</span>
<span class="c1"># appends it to an existing element.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># The element name, attribute names, and attribute values can be</span>
<span class="c1"># either 8-bit ASCII strings or Unicode strings.</span>
<span class="c1">#</span>
<span class="c1"># @param parent The parent element.</span>
<span class="c1"># @param tag The subelement name.</span>
<span class="c1"># @param attrib An optional dictionary, containing element attributes.</span>
<span class="c1"># @param **extra Additional attributes, given as keyword arguments.</span>
<span class="c1"># @return An element instance.</span>
<span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="SubElement"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.SubElement.html#xml.etree.ElementTree.SubElement">[docs]</a><span class="k">def</span> <span class="nf">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">extra</span><span class="p">):</span>
    <span class="n">attrib</span> <span class="o">=</span> <span class="n">attrib</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">attrib</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">makeelement</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="p">)</span>
    <span class="n">parent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">element</span></div>

<span class="c1">##</span>
<span class="c1"># Comment element factory.  This factory function creates a special</span>
<span class="c1"># element that will be serialized as an XML comment by the standard</span>
<span class="c1"># serializer.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># The comment string can be either an 8-bit ASCII string or a Unicode</span>
<span class="c1"># string.</span>
<span class="c1">#</span>
<span class="c1"># @param text A string containing the comment string.</span>
<span class="c1"># @return An element instance, representing a comment.</span>
<span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="Comment"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.Comment.html#xml.etree.ElementTree.Comment">[docs]</a><span class="k">def</span> <span class="nf">Comment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">Comment</span><span class="p">)</span>
    <span class="n">element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">return</span> <span class="n">element</span></div>

<span class="c1">##</span>
<span class="c1"># PI element factory.  This factory function creates a special element</span>
<span class="c1"># that will be serialized as an XML processing instruction by the standard</span>
<span class="c1"># serializer.</span>
<span class="c1">#</span>
<span class="c1"># @param target A string containing the PI target.</span>
<span class="c1"># @param text A string containing the PI contents, if any.</span>
<span class="c1"># @return An element instance, representing a PI.</span>
<span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="ProcessingInstruction"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ProcessingInstruction.html#xml.etree.ElementTree.ProcessingInstruction">[docs]</a><span class="k">def</span> <span class="nf">ProcessingInstruction</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">ProcessingInstruction</span><span class="p">)</span>
    <span class="n">element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">target</span>
    <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
        <span class="n">element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">text</span>
    <span class="k">return</span> <span class="n">element</span></div>

<span class="n">PI</span> <span class="o">=</span> <span class="n">ProcessingInstruction</span>

<span class="c1">##</span>
<span class="c1"># QName wrapper.  This can be used to wrap a QName attribute value, in</span>
<span class="c1"># order to get proper namespace handling on output.</span>
<span class="c1">#</span>
<span class="c1"># @param text A string containing the QName value, in the form {uri}local,</span>
<span class="c1">#     or, if the tag argument is given, the URI part of a QName.</span>
<span class="c1"># @param tag Optional tag.  If given, the first argument is interpreted as</span>
<span class="c1">#     a URI, and this argument is interpreted as a local name.</span>
<span class="c1"># @return An opaque object, representing the QName.</span>

<div class="viewcode-block" id="QName"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.QName.html#xml.etree.ElementTree.QName">[docs]</a><span class="k">class</span> <span class="nc">QName</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<div class="viewcode-block" id="QName.__init__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.QName.__init__.html#xml.etree.ElementTree.QName.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_or_uri</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
            <span class="n">text_or_uri</span> <span class="o">=</span> <span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">}</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">text_or_uri</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text_or_uri</span></div>
<div class="viewcode-block" id="QName.__str__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.QName.__str__.html#xml.etree.ElementTree.QName.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span></div>
<div class="viewcode-block" id="QName.__hash__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.QName.__hash__.html#xml.etree.ElementTree.QName.__hash__">[docs]</a>    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div>
<div class="viewcode-block" id="QName.__cmp__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.QName.__cmp__.html#xml.etree.ElementTree.QName.__cmp__">[docs]</a>    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></div></div>

<span class="c1"># --------------------------------------------------------------------</span>

<span class="c1">##</span>
<span class="c1"># ElementTree wrapper class.  This class represents an entire element</span>
<span class="c1"># hierarchy, and adds some extra support for serialization to and from</span>
<span class="c1"># standard XML.</span>
<span class="c1">#</span>
<span class="c1"># @param element Optional root element.</span>
<span class="c1"># @keyparam file Optional file handle or file name.  If given, the</span>
<span class="c1">#     tree is initialized with the contents of this XML file.</span>

<div class="viewcode-block" id="ElementTree"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.html#xml.etree.ElementTree.ElementTree">[docs]</a><span class="k">class</span> <span class="nc">ElementTree</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="ElementTree.__init__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.__init__.html#xml.etree.ElementTree.ElementTree.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert element is None or iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">element</span> <span class="c1"># first node</span>
        <span class="k">if</span> <span class="nb">file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Gets the root element for this tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @return An element instance.</span>
    <span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="ElementTree.getroot"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.getroot.html#xml.etree.ElementTree.ElementTree.getroot">[docs]</a>    <span class="k">def</span> <span class="nf">getroot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span></div>

    <span class="c1">##</span>
    <span class="c1"># Replaces the root element for this tree.  This discards the</span>
    <span class="c1"># current contents of the tree, and replaces it with the given</span>
    <span class="c1"># element.  Use with care.</span>
    <span class="c1">#</span>
    <span class="c1"># @param element An element instance.</span>

<div class="viewcode-block" id="ElementTree._setroot"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree._setroot.html#xml.etree.ElementTree.ElementTree._setroot">[docs]</a>    <span class="k">def</span> <span class="nf">_setroot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="c1"># assert iselement(element)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">element</span></div>

    <span class="c1">##</span>
    <span class="c1"># Loads an external XML document into this element tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @param source A file name or file object.  If a file object is</span>
    <span class="c1">#     given, it only has to implement a &lt;b&gt;read(n)&lt;/b&gt; method.</span>
    <span class="c1"># @keyparam parser An optional parser instance.  If not given, the</span>
    <span class="c1">#     standard {@link XMLParser} parser is used.</span>
    <span class="c1"># @return The document root element.</span>
    <span class="c1"># @defreturn Element</span>
    <span class="c1"># @exception ParseError If the parser fails to parse the document.</span>

<div class="viewcode-block" id="ElementTree.parse"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.parse.html#xml.etree.ElementTree.ElementTree.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">close_source</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
            <span class="n">close_source</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
                <span class="n">parser</span> <span class="o">=</span> <span class="n">XMLParser</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">TreeBuilder</span><span class="p">())</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">65536</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">close_source</span><span class="p">:</span>
                <span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="c1">##</span>
    <span class="c1"># Creates a tree iterator for the root element.  The iterator loops</span>
    <span class="c1"># over all elements in this tree, in document order.</span>
    <span class="c1">#</span>
    <span class="c1"># @param tag What tags to look for (default is to return all elements)</span>
    <span class="c1"># @return An iterator.</span>
    <span class="c1"># @defreturn iterator</span>

<div class="viewcode-block" id="ElementTree.iter"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.iter.html#xml.etree.ElementTree.ElementTree.iter">[docs]</a>    <span class="k">def</span> <span class="nf">iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span></div>

    <span class="c1"># compatibility</span>
<div class="viewcode-block" id="ElementTree.getiterator"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.getiterator.html#xml.etree.ElementTree.ElementTree.getiterator">[docs]</a>    <span class="k">def</span> <span class="nf">getiterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># Change for a DeprecationWarning in 1.4</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;This method will be removed in future versions.  &quot;</span>
            <span class="s2">&quot;Use &#39;tree.iter()&#39; or &#39;list(tree.iter())&#39; instead.&quot;</span><span class="p">,</span>
            <span class="ne">PendingDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span></div>

    <span class="c1">##</span>
    <span class="c1"># Same as getroot().find(path), starting at the root of the</span>
    <span class="c1"># tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return The first matching element, or None if no element was found.</span>
    <span class="c1"># @defreturn Element or None</span>

<div class="viewcode-block" id="ElementTree.find"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.find.html#xml.etree.ElementTree.ElementTree.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">path</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;This search is broken in 1.3 and earlier, and will be &quot;</span>
                <span class="s2">&quot;fixed in a future version.  If you rely on the current &quot;</span>
                <span class="s2">&quot;behaviour, change it to </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">,</span>
                <span class="ne">FutureWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Same as getroot().findtext(path), starting at the root of the tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @param default What to return if the element was not found.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return The text content of the first matching element, or the</span>
    <span class="c1">#     default value no element was found.  Note that if the element</span>
    <span class="c1">#     is found, but has no text content, this method returns an</span>
    <span class="c1">#     empty string.</span>
    <span class="c1"># @defreturn string</span>

<div class="viewcode-block" id="ElementTree.findtext"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.findtext.html#xml.etree.ElementTree.ElementTree.findtext">[docs]</a>    <span class="k">def</span> <span class="nf">findtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">path</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;This search is broken in 1.3 and earlier, and will be &quot;</span>
                <span class="s2">&quot;fixed in a future version.  If you rely on the current &quot;</span>
                <span class="s2">&quot;behaviour, change it to </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">,</span>
                <span class="ne">FutureWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">default</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Same as getroot().findall(path), starting at the root of the tree.</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return A list or iterator containing all matching elements,</span>
    <span class="c1">#    in document order.</span>
    <span class="c1"># @defreturn list of Element instances</span>

<div class="viewcode-block" id="ElementTree.findall"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.findall.html#xml.etree.ElementTree.ElementTree.findall">[docs]</a>    <span class="k">def</span> <span class="nf">findall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">path</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;This search is broken in 1.3 and earlier, and will be &quot;</span>
                <span class="s2">&quot;fixed in a future version.  If you rely on the current &quot;</span>
                <span class="s2">&quot;behaviour, change it to </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">,</span>
                <span class="ne">FutureWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finds all matching subelements, by tag name or path.</span>
    <span class="c1"># Same as getroot().iterfind(path).</span>
    <span class="c1">#</span>
    <span class="c1"># @param path What element to look for.</span>
    <span class="c1"># @keyparam namespaces Optional namespace prefix map.</span>
    <span class="c1"># @return An iterator or sequence containing all matching elements,</span>
    <span class="c1">#    in document order.</span>
    <span class="c1"># @defreturn a generated sequence of Element instances</span>

<div class="viewcode-block" id="ElementTree.iterfind"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.iterfind.html#xml.etree.ElementTree.ElementTree.iterfind">[docs]</a>    <span class="k">def</span> <span class="nf">iterfind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">path</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;This search is broken in 1.3 and earlier, and will be &quot;</span>
                <span class="s2">&quot;fixed in a future version.  If you rely on the current &quot;</span>
                <span class="s2">&quot;behaviour, change it to </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">,</span>
                <span class="ne">FutureWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Writes the element tree to a file, as XML.</span>
    <span class="c1">#</span>
    <span class="c1"># @def write(file, **options)</span>
    <span class="c1"># @param file A file name, or a file object opened for writing.</span>
    <span class="c1"># @param **options Options, given as keyword arguments.</span>
    <span class="c1"># @keyparam encoding Optional output encoding (default is US-ASCII).</span>
    <span class="c1"># @keyparam xml_declaration Controls if an XML declaration should</span>
    <span class="c1">#     be added to the file.  Use False for never, True for always,</span>
    <span class="c1">#     None for only if not US-ASCII or UTF-8.  None is default.</span>
    <span class="c1"># @keyparam default_namespace Sets the default XML namespace (for &quot;xmlns&quot;).</span>
    <span class="c1"># @keyparam method Optional output method (&quot;xml&quot;, &quot;html&quot;, &quot;text&quot; or</span>
    <span class="c1">#     &quot;c14n&quot;; default is &quot;xml&quot;).</span>

<div class="viewcode-block" id="ElementTree.write"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.write.html#xml.etree.ElementTree.ElementTree.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_or_filename</span><span class="p">,</span>
              <span class="c1"># keyword arguments</span>
              <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">xml_declaration</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">default_namespace</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">method</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># assert self._root is not None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;xml&quot;</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_serialize</span><span class="p">:</span>
            <span class="c1"># FIXME: raise an ImportError for c14n if ElementC14N is missing?</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unknown method </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">method</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">file_or_filename</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">):</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="n">file_or_filename</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_or_filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
        <span class="n">write</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">write</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">encoding</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;c14n&quot;</span><span class="p">:</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;us-ascii&quot;</span>
        <span class="k">elif</span> <span class="n">xml_declaration</span> <span class="ow">or</span> <span class="p">(</span><span class="n">xml_declaration</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span>
                                 <span class="n">encoding</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;us-ascii&quot;</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span>
                <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;</span><span class="si">%s</span><span class="s2">&#39;?&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span>
            <span class="n">_serialize_text</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qnames</span><span class="p">,</span> <span class="n">namespaces</span> <span class="o">=</span> <span class="n">_namespaces</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">default_namespace</span>
                <span class="p">)</span>
            <span class="n">serialize</span> <span class="o">=</span> <span class="n">_serialize</span><span class="p">[</span><span class="n">method</span><span class="p">]</span>
            <span class="n">serialize</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_or_filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">file</span><span class="p">:</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ElementTree.write_c14n"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.ElementTree.write_c14n.html#xml.etree.ElementTree.ElementTree.write_c14n">[docs]</a>    <span class="k">def</span> <span class="nf">write_c14n</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">file</span><span class="p">):</span>
        <span class="c1"># lxml.etree compatibility.  use output method instead</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;c14n&quot;</span><span class="p">)</span></div></div>

<span class="c1"># --------------------------------------------------------------------</span>
<span class="c1"># serialization support</span>

<span class="k">def</span> <span class="nf">_namespaces</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">default_namespace</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># identify namespaces used in this tree</span>

    <span class="c1"># maps qnames to *encoded* prefix:local names</span>
    <span class="n">qnames</span> <span class="o">=</span> <span class="p">{</span><span class="bp">None</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>

    <span class="c1"># maps uri:s to prefixes</span>
    <span class="n">namespaces</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">default_namespace</span><span class="p">:</span>
        <span class="n">namespaces</span><span class="p">[</span><span class="n">default_namespace</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_qname</span><span class="p">(</span><span class="n">qname</span><span class="p">):</span>
        <span class="c1"># calculate serialized qname representation</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">qname</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;{&quot;</span><span class="p">:</span>
                <span class="n">uri</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">qname</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="n">namespaces</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="n">_namespace_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;ns</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">namespaces</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">prefix</span> <span class="o">!=</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span>
                        <span class="n">namespaces</span><span class="p">[</span><span class="n">uri</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span>
                <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
                    <span class="n">qnames</span><span class="p">[</span><span class="n">qname</span><span class="p">]</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">tag</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">qnames</span><span class="p">[</span><span class="n">qname</span><span class="p">]</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="c1"># default element</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">default_namespace</span><span class="p">:</span>
                    <span class="c1"># FIXME: can this be handled in XML 1.0?</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;cannot use non-qualified names with &quot;</span>
                        <span class="s2">&quot;default_namespace option&quot;</span>
                        <span class="p">)</span>
                <span class="n">qnames</span><span class="p">[</span><span class="n">qname</span><span class="p">]</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="n">qname</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">qname</span><span class="p">)</span>

    <span class="c1"># populate qname and namespaces table</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">iterate</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">iter</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">iterate</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">getiterator</span> <span class="c1"># cET compatibility</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">iterate</span><span class="p">():</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">text</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qnames</span><span class="p">:</span>
                <span class="n">add_qname</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qnames</span><span class="p">:</span>
                <span class="n">add_qname</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">Comment</span> <span class="ow">and</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">PI</span><span class="p">:</span>
            <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">text</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qnames</span><span class="p">:</span>
                <span class="n">add_qname</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">QName</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qnames</span><span class="p">:</span>
                <span class="n">add_qname</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">QName</span><span class="p">)</span> <span class="ow">and</span> <span class="n">text</span><span class="o">.</span><span class="n">text</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qnames</span><span class="p">:</span>
            <span class="n">add_qname</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">qnames</span><span class="p">,</span> <span class="n">namespaces</span>

<span class="k">def</span> <span class="nf">_serialize_xml</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">):</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">Comment</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;!--</span><span class="si">%s</span><span class="s2">--&gt;&quot;</span> <span class="o">%</span> <span class="n">_encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">ProcessingInstruction</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;?</span><span class="si">%s</span><span class="s2">?&gt;&quot;</span> <span class="o">%</span> <span class="n">_encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">qnames</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">:</span>
                <span class="n">_serialize_xml</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">items</span> <span class="ow">or</span> <span class="n">namespaces</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">namespaces</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
                                       <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># sort on prefix</span>
                        <span class="k">if</span> <span class="n">k</span><span class="p">:</span>
                            <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">k</span>
                        <span class="n">write</span><span class="p">(</span><span class="s2">&quot; xmlns</span><span class="si">%s</span><span class="s2">=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">k</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span>
                            <span class="n">_escape_attrib</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
                            <span class="p">))</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>  <span class="c1"># lexical order</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">text</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">qnames</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">text</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">_escape_attrib</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
                    <span class="n">write</span><span class="p">(</span><span class="s2">&quot; </span><span class="si">%s</span><span class="s2">=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qnames</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">v</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">text</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span>
                <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                    <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">:</span>
                    <span class="n">_serialize_xml</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;/&quot;</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">write</span><span class="p">(</span><span class="s2">&quot; /&gt;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>

<span class="n">HTML_EMPTY</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;basefont&quot;</span><span class="p">,</span> <span class="s2">&quot;br&quot;</span><span class="p">,</span> <span class="s2">&quot;col&quot;</span><span class="p">,</span> <span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="s2">&quot;hr&quot;</span><span class="p">,</span>
              <span class="s2">&quot;img&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="s2">&quot;isindex&quot;</span><span class="p">,</span> <span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;param&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">HTML_EMPTY</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">HTML_EMPTY</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">_serialize_html</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="n">namespaces</span><span class="p">):</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">Comment</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;!--</span><span class="si">%s</span><span class="s2">--&gt;&quot;</span> <span class="o">%</span> <span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">ProcessingInstruction</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;?</span><span class="si">%s</span><span class="s2">?&gt;&quot;</span> <span class="o">%</span> <span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">qnames</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">:</span>
                <span class="n">_serialize_html</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">items</span> <span class="ow">or</span> <span class="n">namespaces</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">namespaces</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">namespaces</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
                                       <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># sort on prefix</span>
                        <span class="k">if</span> <span class="n">k</span><span class="p">:</span>
                            <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">k</span>
                        <span class="n">write</span><span class="p">(</span><span class="s2">&quot; xmlns</span><span class="si">%s</span><span class="s2">=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">k</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span>
                            <span class="n">_escape_attrib</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
                            <span class="p">))</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>  <span class="c1"># lexical order</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">text</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">QName</span><span class="p">):</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">qnames</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">text</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">_escape_attrib_html</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
                    <span class="c1"># FIXME: handle boolean attributes</span>
                    <span class="n">write</span><span class="p">(</span><span class="s2">&quot; </span><span class="si">%s</span><span class="s2">=</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qnames</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">v</span><span class="p">))</span>
            <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
            <span class="n">ltag</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ltag</span> <span class="o">==</span> <span class="s2">&quot;script&quot;</span> <span class="ow">or</span> <span class="n">ltag</span> <span class="o">==</span> <span class="s2">&quot;style&quot;</span><span class="p">:</span>
                    <span class="n">write</span><span class="p">(</span><span class="n">_encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">:</span>
                <span class="n">_serialize_html</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">qnames</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ltag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">HTML_EMPTY</span><span class="p">:</span>
                <span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;/&quot;</span> <span class="o">+</span> <span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="n">_escape_cdata</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">_serialize_text</span><span class="p">(</span><span class="n">write</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">itertext</span><span class="p">():</span>
        <span class="n">write</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="p">:</span>
        <span class="n">write</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">))</span>

<span class="n">_serialize</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;xml&quot;</span><span class="p">:</span> <span class="n">_serialize_xml</span><span class="p">,</span>
    <span class="s2">&quot;html&quot;</span><span class="p">:</span> <span class="n">_serialize_html</span><span class="p">,</span>
    <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">_serialize_text</span><span class="p">,</span>
<span class="c1"># this optional method is imported at the end of the module</span>
<span class="c1">#   &quot;c14n&quot;: _serialize_c14n,</span>
<span class="p">}</span>

<span class="c1">##</span>
<span class="c1"># Registers a namespace prefix.  The registry is global, and any</span>
<span class="c1"># existing mapping for either the given prefix or the namespace URI</span>
<span class="c1"># will be removed.</span>
<span class="c1">#</span>
<span class="c1"># @param prefix Namespace prefix.</span>
<span class="c1"># @param uri Namespace uri.  Tags and attributes in this namespace</span>
<span class="c1">#     will be serialized with the given prefix, if at all possible.</span>
<span class="c1"># @exception ValueError If the prefix is reserved, or is otherwise</span>
<span class="c1">#     invalid.</span>

<div class="viewcode-block" id="register_namespace"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.register_namespace.html#xml.etree.ElementTree.register_namespace">[docs]</a><span class="k">def</span> <span class="nf">register_namespace</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;ns\d+$&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Prefix format reserved for internal use&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_namespace_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">uri</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">_namespace_map</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
    <span class="n">_namespace_map</span><span class="p">[</span><span class="n">uri</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span></div>

<span class="n">_namespace_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># &quot;well-known&quot; namespace prefixes</span>
    <span class="s2">&quot;http://www.w3.org/XML/1998/namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;xml&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">:</span> <span class="s2">&quot;html&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span><span class="p">:</span> <span class="s2">&quot;rdf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://schemas.xmlsoap.org/wsdl/&quot;</span><span class="p">:</span> <span class="s2">&quot;wsdl&quot;</span><span class="p">,</span>
    <span class="c1"># xml schema</span>
    <span class="s2">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="p">:</span> <span class="s2">&quot;xs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="p">:</span> <span class="s2">&quot;xsi&quot;</span><span class="p">,</span>
    <span class="c1"># dublin core</span>
    <span class="s2">&quot;http://purl.org/dc/elements/1.1/&quot;</span><span class="p">:</span> <span class="s2">&quot;dc&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">_raise_serialization_error</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
        <span class="s2">&quot;cannot serialize </span><span class="si">%r</span><span class="s2"> (type </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">_encode</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_escape_cdata</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
    <span class="c1"># escape character data</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># it&#39;s worth avoiding do-nothing calls for strings that are</span>
        <span class="c1"># shorter than 500 character, or so.  assume that&#39;s, by far,</span>
        <span class="c1"># the most common case in most applications.</span>
        <span class="k">if</span> <span class="s2">&quot;&amp;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;&lt;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;&gt;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_escape_attrib</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
    <span class="c1"># escape attribute value</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;&amp;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;&lt;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;&gt;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;#10;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_escape_attrib_html</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
    <span class="c1"># escape attribute value</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;&amp;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;&gt;&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
        <span class="n">_raise_serialization_error</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># --------------------------------------------------------------------</span>

<span class="c1">##</span>
<span class="c1"># Generates a string representation of an XML element, including all</span>
<span class="c1"># subelements.</span>
<span class="c1">#</span>
<span class="c1"># @param element An Element instance.</span>
<span class="c1"># @keyparam encoding Optional output encoding (default is US-ASCII).</span>
<span class="c1"># @keyparam method Optional output method (&quot;xml&quot;, &quot;html&quot;, &quot;text&quot; or</span>
<span class="c1">#     &quot;c14n&quot;; default is &quot;xml&quot;).</span>
<span class="c1"># @return An encoded string containing the XML data.</span>
<span class="c1"># @defreturn string</span>

<div class="viewcode-block" id="tostring"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.tostring.html#xml.etree.ElementTree.tostring">[docs]</a><span class="k">def</span> <span class="nf">tostring</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">dummy</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">()</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">append</span>
    <span class="n">ElementTree</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<span class="c1">##</span>
<span class="c1"># Generates a string representation of an XML element, including all</span>
<span class="c1"># subelements.  The string is returned as a sequence of string fragments.</span>
<span class="c1">#</span>
<span class="c1"># @param element An Element instance.</span>
<span class="c1"># @keyparam encoding Optional output encoding (default is US-ASCII).</span>
<span class="c1"># @keyparam method Optional output method (&quot;xml&quot;, &quot;html&quot;, &quot;text&quot; or</span>
<span class="c1">#     &quot;c14n&quot;; default is &quot;xml&quot;).</span>
<span class="c1"># @return A sequence object containing the XML data.</span>
<span class="c1"># @defreturn sequence</span>
<span class="c1"># @since 1.3</span>

<div class="viewcode-block" id="tostringlist"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.tostringlist.html#xml.etree.ElementTree.tostringlist">[docs]</a><span class="k">def</span> <span class="nf">tostringlist</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">dummy</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">()</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">append</span>
    <span class="n">ElementTree</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="c1"># FIXME: merge small fragments into larger parts</span>
    <span class="k">return</span> <span class="n">data</span></div>

<span class="c1">##</span>
<span class="c1"># Writes an element tree or element structure to sys.stdout.  This</span>
<span class="c1"># function should be used for debugging only.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># The exact output format is implementation dependent.  In this</span>
<span class="c1"># version, it&#39;s written as an ordinary XML file.</span>
<span class="c1">#</span>
<span class="c1"># @param elem An element tree or an individual element.</span>

<div class="viewcode-block" id="dump"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.dump.html#xml.etree.ElementTree.dump">[docs]</a><span class="k">def</span> <span class="nf">dump</span><span class="p">(</span><span class="n">elem</span><span class="p">):</span>
    <span class="c1"># debugging</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">ElementTree</span><span class="p">):</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="n">elem</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">tail</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">tail</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tail</span> <span class="ow">or</span> <span class="n">tail</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<span class="c1"># --------------------------------------------------------------------</span>
<span class="c1"># parsing</span>

<span class="c1">##</span>
<span class="c1"># Parses an XML document into an element tree.</span>
<span class="c1">#</span>
<span class="c1"># @param source A filename or file object containing XML data.</span>
<span class="c1"># @param parser An optional parser instance.  If not given, the</span>
<span class="c1">#     standard {@link XMLParser} parser is used.</span>
<span class="c1"># @return An ElementTree instance</span>

<div class="viewcode-block" id="parse"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.parse.html#xml.etree.ElementTree.parse">[docs]</a><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="p">()</span>
    <span class="n">tree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tree</span></div>

<span class="c1">##</span>
<span class="c1"># Parses an XML document into an element tree incrementally, and reports</span>
<span class="c1"># what&#39;s going on to the user.</span>
<span class="c1">#</span>
<span class="c1"># @param source A filename or file object containing XML data.</span>
<span class="c1"># @param events A list of events to report back.  If omitted, only &quot;end&quot;</span>
<span class="c1">#     events are reported.</span>
<span class="c1"># @param parser An optional parser instance.  If not given, the</span>
<span class="c1">#     standard {@link XMLParser} parser is used.</span>
<span class="c1"># @return A (event, elem) iterator.</span>

<div class="viewcode-block" id="iterparse"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.iterparse.html#xml.etree.ElementTree.iterparse">[docs]</a><span class="k">def</span> <span class="nf">iterparse</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">close_source</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>
        <span class="n">close_source</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
            <span class="n">parser</span> <span class="o">=</span> <span class="n">XMLParser</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">TreeBuilder</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">_IterParseIterator</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">close_source</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">close_source</span><span class="p">:</span>
            <span class="n">source</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">raise</span></div>

<span class="k">class</span> <span class="nc">_IterParseIterator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">close_source</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_file</span> <span class="o">=</span> <span class="n">source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close_file</span> <span class="o">=</span> <span class="n">close_source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">parser</span>
        <span class="c1"># wire up the parser for event reporting</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_parser</span>
        <span class="n">append</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_events</span><span class="o">.</span><span class="n">append</span>
        <span class="k">if</span> <span class="n">events</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">events</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">parser</span><span class="o">.</span><span class="n">ordered_attributes</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">parser</span><span class="o">.</span><span class="n">specified_attributes</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">,</span>
                                <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_start_list</span><span class="p">):</span>
                        <span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">start</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">)))</span>
                    <span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="n">handler</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">,</span>
                                <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_start</span><span class="p">):</span>
                        <span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">start</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">)))</span>
                    <span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="n">handler</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">,</span>
                            <span class="n">end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">_end</span><span class="p">):</span>
                    <span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">end</span><span class="p">(</span><span class="n">tag</span><span class="p">)))</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="n">handler</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;start-ns&quot;</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">uri</span> <span class="o">=</span> <span class="p">(</span><span class="n">uri</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">UnicodeError</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="p">(</span><span class="n">prefix</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">uri</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">StartNamespaceDeclHandler</span> <span class="o">=</span> <span class="n">handler</span>
            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;end-ns&quot;</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">append</span><span class="p">):</span>
                    <span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
                <span class="n">parser</span><span class="o">.</span><span class="n">EndNamespaceDeclHandler</span> <span class="o">=</span> <span class="n">handler</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unknown event </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_events</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">return</span> <span class="n">item</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">:</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_error</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="k">raise</span> <span class="n">e</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span>
                    <span class="k">break</span>
                <span class="c1"># load event buffer</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_events</span><span class="p">[:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">16384</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">SyntaxError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_error</span> <span class="o">=</span> <span class="n">exc</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_close_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">raise</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_close_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

<span class="c1">##</span>
<span class="c1"># Parses an XML document from a string constant.  This function can</span>
<span class="c1"># be used to embed &quot;XML literals&quot; in Python code.</span>
<span class="c1">#</span>
<span class="c1"># @param source A string containing XML data.</span>
<span class="c1"># @param parser An optional parser instance.  If not given, the</span>
<span class="c1">#     standard {@link XMLParser} parser is used.</span>
<span class="c1"># @return An Element instance.</span>
<span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="XML"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XML.html#xml.etree.ElementTree.XML">[docs]</a><span class="k">def</span> <span class="nf">XML</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">XMLParser</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">TreeBuilder</span><span class="p">())</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<span class="c1">##</span>
<span class="c1"># Parses an XML document from a string constant, and also returns</span>
<span class="c1"># a dictionary which maps from element id:s to elements.</span>
<span class="c1">#</span>
<span class="c1"># @param source A string containing XML data.</span>
<span class="c1"># @param parser An optional parser instance.  If not given, the</span>
<span class="c1">#     standard {@link XMLParser} parser is used.</span>
<span class="c1"># @return A tuple containing an Element instance and a dictionary.</span>
<span class="c1"># @defreturn (Element, dictionary)</span>

<div class="viewcode-block" id="XMLID"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLID.html#xml.etree.ElementTree.XMLID">[docs]</a><span class="k">def</span> <span class="nf">XMLID</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">XMLParser</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">TreeBuilder</span><span class="p">())</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span><span class="p">:</span>
            <span class="n">ids</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span>
    <span class="k">return</span> <span class="n">tree</span><span class="p">,</span> <span class="n">ids</span></div>

<span class="c1">##</span>
<span class="c1"># Parses an XML document from a string constant.  Same as {@link #XML}.</span>
<span class="c1">#</span>
<span class="c1"># @def fromstring(text)</span>
<span class="c1"># @param source A string containing XML data.</span>
<span class="c1"># @return An Element instance.</span>
<span class="c1"># @defreturn Element</span>

<span class="n">fromstring</span> <span class="o">=</span> <span class="n">XML</span>

<span class="c1">##</span>
<span class="c1"># Parses an XML document from a sequence of string fragments.</span>
<span class="c1">#</span>
<span class="c1"># @param sequence A list or other sequence containing XML data fragments.</span>
<span class="c1"># @param parser An optional parser instance.  If not given, the</span>
<span class="c1">#     standard {@link XMLParser} parser is used.</span>
<span class="c1"># @return An Element instance.</span>
<span class="c1"># @defreturn Element</span>
<span class="c1"># @since 1.3</span>

<div class="viewcode-block" id="fromstringlist"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.fromstringlist.html#xml.etree.ElementTree.fromstringlist">[docs]</a><span class="k">def</span> <span class="nf">fromstringlist</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">XMLParser</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">TreeBuilder</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<span class="c1"># --------------------------------------------------------------------</span>

<span class="c1">##</span>
<span class="c1"># Generic element structure builder.  This builder converts a sequence</span>
<span class="c1"># of {@link #TreeBuilder.start}, {@link #TreeBuilder.data}, and {@link</span>
<span class="c1"># #TreeBuilder.end} method calls to a well-formed element structure.</span>
<span class="c1"># &lt;p&gt;</span>
<span class="c1"># You can use this class to build an element structure using a custom XML</span>
<span class="c1"># parser, or a parser for some other XML-like format.</span>
<span class="c1">#</span>
<span class="c1"># @param element_factory Optional element factory.  This factory</span>
<span class="c1">#    is called to create new Element instances, as necessary.</span>

<div class="viewcode-block" id="TreeBuilder"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.html#xml.etree.ElementTree.TreeBuilder">[docs]</a><span class="k">class</span> <span class="nc">TreeBuilder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="TreeBuilder.__init__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.__init__.html#xml.etree.ElementTree.TreeBuilder.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element_factory</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># data collector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elem</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># element stack</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># last element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tail</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># true if we&#39;re after an end tag</span>
        <span class="k">if</span> <span class="n">element_factory</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">element_factory</span> <span class="o">=</span> <span class="n">Element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_factory</span> <span class="o">=</span> <span class="n">element_factory</span></div>

    <span class="c1">##</span>
    <span class="c1"># Flushes the builder buffers, and returns the toplevel document</span>
    <span class="c1"># element.</span>
    <span class="c1">#</span>
    <span class="c1"># @return An Element instance.</span>
    <span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="TreeBuilder.close"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.close.html#xml.etree.ElementTree.TreeBuilder.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_elem</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;missing end tags&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="s2">&quot;missing toplevel element&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span></div>

<div class="viewcode-block" id="TreeBuilder._flush"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder._flush.html#xml.etree.ElementTree.TreeBuilder._flush">[docs]</a>    <span class="k">def</span> <span class="nf">_flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tail</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">tail</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s2">&quot;internal error (tail)&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">text</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s2">&quot;internal error (text)&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">[]</span></div>

    <span class="c1">##</span>
    <span class="c1"># Adds text to the current element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param data A string.  This should be either an 8-bit string</span>
    <span class="c1">#    containing ASCII text, or a Unicode string.</span>

<div class="viewcode-block" id="TreeBuilder.data"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.data.html#xml.etree.ElementTree.TreeBuilder.data">[docs]</a>    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Opens a new element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param tag The element name.</span>
    <span class="c1"># @param attrib A dictionary containing element attributes.</span>
    <span class="c1"># @return The opened element.</span>
    <span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="TreeBuilder.start"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.start.html#xml.etree.ElementTree.TreeBuilder.start">[docs]</a>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flush</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last</span> <span class="o">=</span> <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_factory</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elem</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_elem</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_elem</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tail</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">elem</span></div>

    <span class="c1">##</span>
    <span class="c1"># Closes the current element.</span>
    <span class="c1">#</span>
    <span class="c1"># @param tag The element name.</span>
    <span class="c1"># @return The closed element.</span>
    <span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="TreeBuilder.end"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.TreeBuilder.end.html#xml.etree.ElementTree.TreeBuilder.end">[docs]</a>    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flush</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elem</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">tag</span><span class="p">,</span>\
               <span class="s2">&quot;end tag mismatch (expected </span><span class="si">%s</span><span class="s2">, got </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">_last</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tail</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last</span></div></div>

<span class="c1">##</span>
<span class="c1"># Element structure builder for XML source data, based on the</span>
<span class="c1"># &lt;b&gt;expat&lt;/b&gt; parser.</span>
<span class="c1">#</span>
<span class="c1"># @keyparam target Target object.  If omitted, the builder uses an</span>
<span class="c1">#     instance of the standard {@link #TreeBuilder} class.</span>
<span class="c1"># @keyparam html Predefine HTML entities.  This flag is not supported</span>
<span class="c1">#     by the current implementation.</span>
<span class="c1"># @keyparam encoding Optional encoding.  If given, the value overrides</span>
<span class="c1">#     the encoding specified in the XML file.</span>
<span class="c1"># @see #ElementTree</span>
<span class="c1"># @see #TreeBuilder</span>

<div class="viewcode-block" id="XMLParser"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser.html#xml.etree.ElementTree.XMLParser">[docs]</a><span class="k">class</span> <span class="nc">XMLParser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="XMLParser.__init__"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser.__init__.html#xml.etree.ElementTree.XMLParser.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">xml.parsers</span> <span class="kn">import</span> <span class="n">expat</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">pyexpat</span> <span class="kn">as</span> <span class="nn">expat</span>
            <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                    <span class="s2">&quot;No module named expat; use SimpleXMLTreeBuilder instead&quot;</span>
                    <span class="p">)</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">ParserCreate</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">target</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="n">TreeBuilder</span><span class="p">()</span>
        <span class="c1"># underscored names are provided for compatibility only</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># name memo cache</span>
        <span class="c1"># callbacks</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">DefaultHandlerExpand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span>
        <span class="c1"># optional callbacks</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">CommentHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">ProcessingInstructionHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pi</span>
        <span class="c1"># let expat do the buffering, if supported</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">buffer_text</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># use new-style attribute handling, if supported</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">ordered_attributes</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">specified_attributes</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_list</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entity</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;Expat </span><span class="si">%d</span><span class="s2">.</span><span class="si">%d</span><span class="s2">.</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">expat</span><span class="o">.</span><span class="n">version_info</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># unknown</span></div>

<div class="viewcode-block" id="XMLParser._raiseerror"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._raiseerror.html#xml.etree.ElementTree.XMLParser._raiseerror">[docs]</a>    <span class="k">def</span> <span class="nf">_raiseerror</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">ParseError</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">err</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">code</span>
        <span class="n">err</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">offset</span>
        <span class="k">raise</span> <span class="n">err</span></div>

<div class="viewcode-block" id="XMLParser._fixtext"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._fixtext.html#xml.etree.ElementTree.XMLParser._fixtext">[docs]</a>    <span class="k">def</span> <span class="nf">_fixtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="c1"># convert text string to ascii, if possible</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">text</span></div>

<div class="viewcode-block" id="XMLParser._fixname"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._fixname.html#xml.etree.ElementTree.XMLParser._fixname">[docs]</a>    <span class="k">def</span> <span class="nf">_fixname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="c1"># expand qname, and convert name string to ascii, if possible</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">key</span>
            <span class="k">if</span> <span class="s2">&quot;}&quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span> <span class="o">+</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="XMLParser._start"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._start.html#xml.etree.ElementTree.XMLParser._start">[docs]</a>    <span class="k">def</span> <span class="nf">_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">):</span>
        <span class="n">fixname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixname</span>
        <span class="n">fixtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">fixname</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">attrib</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attrib_in</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attrib</span><span class="p">[</span><span class="n">fixname</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">fixtext</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="p">)</span></div>

<div class="viewcode-block" id="XMLParser._start_list"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._start_list.html#xml.etree.ElementTree.XMLParser._start_list">[docs]</a>    <span class="k">def</span> <span class="nf">_start_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrib_in</span><span class="p">):</span>
        <span class="n">fixname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixname</span>
        <span class="n">fixtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="n">fixname</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="n">attrib</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">attrib_in</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">attrib_in</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">attrib</span><span class="p">[</span><span class="n">fixname</span><span class="p">(</span><span class="n">attrib_in</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span> <span class="o">=</span> <span class="n">fixtext</span><span class="p">(</span><span class="n">attrib_in</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">attrib</span><span class="p">)</span></div>

<div class="viewcode-block" id="XMLParser._data"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._data.html#xml.etree.ElementTree.XMLParser._data">[docs]</a>    <span class="k">def</span> <span class="nf">_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span><span class="p">(</span><span class="n">text</span><span class="p">))</span></div>

<div class="viewcode-block" id="XMLParser._end"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._end.html#xml.etree.ElementTree.XMLParser._end">[docs]</a>    <span class="k">def</span> <span class="nf">_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixname</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span></div>

<div class="viewcode-block" id="XMLParser._comment"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._comment.html#xml.etree.ElementTree.XMLParser._comment">[docs]</a>    <span class="k">def</span> <span class="nf">_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">comment</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">comment</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span><span class="p">(</span><span class="n">data</span><span class="p">))</span></div>

<div class="viewcode-block" id="XMLParser._pi"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._pi.html#xml.etree.ElementTree.XMLParser._pi">[docs]</a>    <span class="k">def</span> <span class="nf">_pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">pi</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pi</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fixtext</span><span class="p">(</span><span class="n">data</span><span class="p">))</span></div>

<div class="viewcode-block" id="XMLParser._default"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser._default.html#xml.etree.ElementTree.XMLParser._default">[docs]</a>    <span class="k">def</span> <span class="nf">_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">:</span>
            <span class="c1"># deal with undefined entities</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity</span><span class="p">[</span><span class="n">text</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">xml.parsers</span> <span class="kn">import</span> <span class="n">expat</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">expat</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;undefined entity </span><span class="si">%s</span><span class="s2">: line </span><span class="si">%d</span><span class="s2">, column </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">ErrorLineNumber</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">ErrorColumnNumber</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="n">err</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="mi">11</span> <span class="c1"># XML_ERROR_UNDEFINED_ENTITY</span>
                <span class="n">err</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">ErrorLineNumber</span>
                <span class="n">err</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">ErrorColumnNumber</span>
                <span class="k">raise</span> <span class="n">err</span>
        <span class="k">elif</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s2">&quot;&lt;&quot;</span> <span class="ow">and</span> <span class="n">text</span><span class="p">[:</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&lt;!DOCTYPE&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># inside a doctype declaration</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># parse doctype contents</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">return</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;PUBLIC&quot;</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">pubid</span><span class="p">,</span> <span class="n">system</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span>
                <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;SYSTEM&quot;</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">system</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span>
                    <span class="n">pubid</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="k">if</span> <span class="n">pubid</span><span class="p">:</span>
                    <span class="n">pubid</span> <span class="o">=</span> <span class="n">pubid</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="s2">&quot;doctype&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">doctype</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pubid</span><span class="p">,</span> <span class="n">system</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_XMLParser__doctype</span><span class="p">:</span>
                    <span class="c1"># warn about deprecated call</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_XMLParser__doctype</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pubid</span><span class="p">,</span> <span class="n">system</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pubid</span><span class="p">,</span> <span class="n">system</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="o">=</span> <span class="bp">None</span></div>

    <span class="c1">##</span>
    <span class="c1"># (Deprecated) Handles a doctype declaration.</span>
    <span class="c1">#</span>
    <span class="c1"># @param name Doctype name.</span>
    <span class="c1"># @param pubid Public identifier.</span>
    <span class="c1"># @param system System identifier.</span>

<div class="viewcode-block" id="XMLParser.doctype"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser.doctype.html#xml.etree.ElementTree.XMLParser.doctype">[docs]</a>    <span class="k">def</span> <span class="nf">doctype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pubid</span><span class="p">,</span> <span class="n">system</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method of XMLParser is deprecated.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;This method of XMLParser is deprecated.  Define doctype() &quot;</span>
            <span class="s2">&quot;method on the TreeBuilder target.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span></div>

    <span class="c1"># sentinel, if doctype is redefined in a subclass</span>
    <span class="n">__doctype</span> <span class="o">=</span> <span class="n">doctype</span>

    <span class="c1">##</span>
    <span class="c1"># Feeds data to the parser.</span>
    <span class="c1">#</span>
    <span class="c1"># @param data Encoded data.</span>

<div class="viewcode-block" id="XMLParser.feed"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser.feed.html#xml.etree.ElementTree.XMLParser.feed">[docs]</a>    <span class="k">def</span> <span class="nf">feed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_raiseerror</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>

    <span class="c1">##</span>
    <span class="c1"># Finishes feeding data to the parser.</span>
    <span class="c1">#</span>
    <span class="c1"># @return An element structure.</span>
    <span class="c1"># @defreturn Element</span>

<div class="viewcode-block" id="XMLParser.close"><a class="viewcode-back" href="../../../generated/generated/xml.etree.ElementTree.XMLParser.close.html#xml.etree.ElementTree.XMLParser.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># end of data</span>
        <span class="k">except</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_raiseerror</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="c1"># get rid of circular references</span>
        <span class="k">return</span> <span class="n">tree</span></div></div>

<span class="c1"># compatibility</span>
<span class="n">XMLTreeBuilder</span> <span class="o">=</span> <span class="n">XMLParser</span>

<span class="c1"># workaround circular import.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">ElementC14N</span> <span class="kn">import</span> <span class="n">_serialize_c14n</span>
    <span class="n">_serialize</span><span class="p">[</span><span class="s2">&quot;c14n&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_serialize_c14n</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>