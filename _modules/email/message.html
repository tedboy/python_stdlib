

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>email.message &mdash; Python Standard Library</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/py.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Standard Library" href="../../index.html"/>
        <link rel="up" title="email" href="../email.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Python Standard Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../01to10.html">Ch 01 - 10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11to20.html">Ch 11 - 20</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../21to30.html">Ch 21 - 30</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../31to37.html">Ch 31 - 37</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_all.html">api</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Python Standard Library</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../email.html">email</a> &raquo;</li>
        
      <li>email.message</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for email.message</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (C) 2001-2006 Python Software Foundation</span>
<span class="c1"># Author: Barry Warsaw</span>
<span class="c1"># Contact: email-sig@python.org</span>

<span class="sd">&quot;&quot;&quot;Basic message object for the email package object model.&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Message&#39;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">uu</span>
<span class="kn">import</span> <span class="nn">binascii</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">cStringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="c1"># Intrapackage imports</span>
<span class="kn">import</span> <span class="nn">email.charset</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">errors</span>

<span class="n">SEMISPACE</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span>

<span class="c1"># Regular expression that matches `special&#39; characters in parameters, the</span>
<span class="c1"># existence of which force quoting of the parameter value.</span>
<span class="n">tspecials</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;[ \(\)&lt;&gt;@,;:</span><span class="se">\\</span><span class="s1">&quot;/\[\]\?=]&#39;</span><span class="p">)</span>


<span class="c1"># Helper functions</span>
<span class="k">def</span> <span class="nf">_splitparam</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
    <span class="c1"># Split header parameters.  BAW: this may be too simple.  It isn&#39;t</span>
    <span class="c1"># strictly RFC 2045 (section 5.1) compliant, but it catches most headers</span>
    <span class="c1"># found in the wild.  We may eventually need a full fledged parser</span>
    <span class="c1"># eventually.</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">sep</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sep</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">b</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_formatparam</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">quote</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience function to format and return a key=value pair.</span>

<span class="sd">    This will quote the value if needed or if quote is true.  If value is a</span>
<span class="sd">    three tuple (charset, language, value), it will be encoded according</span>
<span class="sd">    to RFC2231 rules.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># A tuple is used for RFC 2231 encoded parameter values where items</span>
        <span class="c1"># are (charset, language, value).  charset is a string, not a Charset</span>
        <span class="c1"># instance.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="c1"># Encode as per RFC 2231</span>
            <span class="n">param</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">encode_rfc2231</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="c1"># BAW: Please check this.  I think that if quote is set it should</span>
        <span class="c1"># force quoting even if not necessary.</span>
        <span class="k">if</span> <span class="n">quote</span> <span class="ow">or</span> <span class="n">tspecials</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">utils</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">param</span>

<span class="k">def</span> <span class="nf">_parseparam</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">plist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">s</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">end</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">))</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">end</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">plist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">end</span><span class="p">:]</span>
    <span class="k">return</span> <span class="n">plist</span>


<span class="k">def</span> <span class="nf">_unquotevalue</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="c1"># This is different than utils.collapse_rfc2231_value() because it doesn&#39;t</span>
    <span class="c1"># try to convert the value to a unicode.  Message.get_param() and</span>
    <span class="c1"># Message.get_params() are both currently defined to return the tuple in</span>
    <span class="c1"># the face of RFC 2231 parameters.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">utils</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>




<span class="k">class</span> <span class="nc">Message</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Basic message object.</span>

<span class="sd">    A message object is defined as something that has a bunch of RFC 2822</span>
<span class="sd">    headers and a payload.  It may optionally have an envelope header</span>
<span class="sd">    (a.k.a. Unix-From or From_ header).  If the message is a container (i.e. a</span>
<span class="sd">    multipart or a message/rfc822), then the payload is a list of Message</span>
<span class="sd">    objects, otherwise it is a string.</span>

<span class="sd">    Message objects implement part of the `mapping&#39; interface, which assumes</span>
<span class="sd">    there is exactly one occurrence of the header per message.  Some headers</span>
<span class="sd">    do in fact appear multiple times (e.g. Received) and for those headers,</span>
<span class="sd">    you must use the explicit API to set or get all the headers.  Not all of</span>
<span class="sd">    the mapping methods are implemented.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unixfrom</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_charset</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># Defaults for multipart messages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">epilogue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Default content type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_type</span> <span class="o">=</span> <span class="s1">&#39;text/plain&#39;</span>

<div class="viewcode-block" id="Message.__str__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__str__.html#mailbox.Message.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the entire formatted message as a string.</span>
<span class="sd">        This includes the headers, body, and envelope header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_string</span><span class="p">(</span><span class="n">unixfrom</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.as_string"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.as_string.html#mailbox.Message.as_string">[docs]</a>    <span class="k">def</span> <span class="nf">as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unixfrom</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the entire formatted message as a string.</span>
<span class="sd">        Optional `unixfrom&#39; when True, means include the Unix From_ envelope</span>
<span class="sd">        header.</span>

<span class="sd">        This is a convenience method and may not generate the message exactly</span>
<span class="sd">        as you intend because by default it mangles lines that begin with</span>
<span class="sd">        &quot;From &quot;.  For more flexibility, use the flatten() method of a</span>
<span class="sd">        Generator instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">email.generator</span> <span class="kn">import</span> <span class="n">Generator</span>
        <span class="n">fp</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">Generator</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unixfrom</span><span class="o">=</span><span class="n">unixfrom</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span></div>

<div class="viewcode-block" id="Message.is_multipart"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.is_multipart.html#mailbox.Message.is_multipart">[docs]</a>    <span class="k">def</span> <span class="nf">is_multipart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if the message consists of multiple parts.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span></div>

    <span class="c1">#</span>
    <span class="c1"># Unix From_ line</span>
    <span class="c1">#</span>
<div class="viewcode-block" id="Message.set_unixfrom"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_unixfrom.html#mailbox.Message.set_unixfrom">[docs]</a>    <span class="k">def</span> <span class="nf">set_unixfrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unixfrom</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unixfrom</span> <span class="o">=</span> <span class="n">unixfrom</span></div>

<div class="viewcode-block" id="Message.get_unixfrom"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_unixfrom.html#mailbox.Message.get_unixfrom">[docs]</a>    <span class="k">def</span> <span class="nf">get_unixfrom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unixfrom</span></div>

    <span class="c1">#</span>
    <span class="c1"># Payload manipulation.</span>
    <span class="c1">#</span>
<div class="viewcode-block" id="Message.attach"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.attach.html#mailbox.Message.attach">[docs]</a>    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the given payload to the current payload.</span>

<span class="sd">        The current payload will always be a list of objects after this method</span>
<span class="sd">        is called.  If you want to set the payload to a scalar object, use</span>
<span class="sd">        set_payload() instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="p">[</span><span class="n">payload</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.get_payload"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_payload.html#mailbox.Message.get_payload">[docs]</a>    <span class="k">def</span> <span class="nf">get_payload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">decode</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a reference to the payload.</span>

<span class="sd">        The payload will either be a list object or a string.  If you mutate</span>
<span class="sd">        the list object, you modify the message&#39;s payload in place.  Optional</span>
<span class="sd">        i returns that index into the payload.</span>

<span class="sd">        Optional decode is a flag indicating whether the payload should be</span>
<span class="sd">        decoded or not, according to the Content-Transfer-Encoding header</span>
<span class="sd">        (default is False).</span>

<span class="sd">        When True and the message is not a multipart, the payload will be</span>
<span class="sd">        decoded if this header&#39;s value is `quoted-printable&#39; or `base64&#39;.  If</span>
<span class="sd">        some other encoding is used, or the header is missing, or if the</span>
<span class="sd">        payload has bogus data (i.e. bogus base64 or uuencoded data), the</span>
<span class="sd">        payload is returned as-is.</span>

<span class="sd">        If the message is a multipart and the decode flag is True, then None</span>
<span class="sd">        is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Expected list, got </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">decode</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">():</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="n">cte</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content-transfer-encoding&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">cte</span> <span class="o">==</span> <span class="s1">&#39;quoted-printable&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">_qdecode</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cte</span> <span class="o">==</span> <span class="s1">&#39;base64&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">_bdecode</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">binascii</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
                    <span class="c1"># Incorrect padding</span>
                    <span class="k">return</span> <span class="n">payload</span>
            <span class="k">elif</span> <span class="n">cte</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;x-uuencode&#39;</span><span class="p">,</span> <span class="s1">&#39;uuencode&#39;</span><span class="p">,</span> <span class="s1">&#39;uue&#39;</span><span class="p">,</span> <span class="s1">&#39;x-uue&#39;</span><span class="p">):</span>
                <span class="n">sfp</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">uu</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">payload</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">sfp</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                    <span class="n">payload</span> <span class="o">=</span> <span class="n">sfp</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
                <span class="k">except</span> <span class="n">uu</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
                    <span class="c1"># Some decoding problem</span>
                    <span class="k">return</span> <span class="n">payload</span>
        <span class="c1"># Everything else, including encodings with 8bit or 7bit are returned</span>
        <span class="c1"># unchanged.</span>
        <span class="k">return</span> <span class="n">payload</span></div>

<div class="viewcode-block" id="Message.set_payload"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_payload.html#mailbox.Message.set_payload">[docs]</a>    <span class="k">def</span> <span class="nf">set_payload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">charset</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the payload to the given value.</span>

<span class="sd">        Optional charset sets the message&#39;s default character set.  See</span>
<span class="sd">        set_charset() for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="n">payload</span>
        <span class="k">if</span> <span class="n">charset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_charset</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.set_charset"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_charset.html#mailbox.Message.set_charset">[docs]</a>    <span class="k">def</span> <span class="nf">set_charset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">charset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the charset of the payload to a given character set.</span>

<span class="sd">        charset can be a Charset instance, a string naming a character set, or</span>
<span class="sd">        None.  If it is a string it will be converted to a Charset instance.</span>
<span class="sd">        If charset is None, the charset parameter will be removed from the</span>
<span class="sd">        Content-Type field.  Anything else will generate a TypeError.</span>

<span class="sd">        The message will be assumed to be of type text/* encoded with</span>
<span class="sd">        charset.input_charset.  It will be converted to charset.output_charset</span>
<span class="sd">        and encoded properly, if needed, when generating the plain text</span>
<span class="sd">        representation of the message.  MIME headers (MIME-Version,</span>
<span class="sd">        Content-Type, Content-Transfer-Encoding) will be added as needed.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">charset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">del_param</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_charset</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">charset</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">charset</span><span class="o">.</span><span class="n">Charset</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="n">email</span><span class="o">.</span><span class="n">charset</span><span class="o">.</span><span class="n">Charset</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span>
        <span class="c1"># BAW: should we accept strings that can serve as arguments to the</span>
        <span class="c1"># Charset constructor?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_charset</span> <span class="o">=</span> <span class="n">charset</span>
        <span class="k">if</span> <span class="s1">&#39;MIME-Version&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;MIME-Version&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Content-Type&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">,</span>
                            <span class="n">charset</span><span class="o">=</span><span class="n">charset</span><span class="o">.</span><span class="n">get_output_charset</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="n">charset</span><span class="o">.</span><span class="n">get_output_charset</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">charset</span><span class="o">.</span><span class="n">output_charset</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span> <span class="o">!=</span> <span class="n">charset</span><span class="o">.</span><span class="n">get_output_charset</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="n">charset</span><span class="o">.</span><span class="n">body_encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Content-Transfer-Encoding&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">cte</span> <span class="o">=</span> <span class="n">charset</span><span class="o">.</span><span class="n">get_body_encoding</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cte</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_payload</span> <span class="o">=</span> <span class="n">charset</span><span class="o">.</span><span class="n">body_encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_payload</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Transfer-Encoding&#39;</span><span class="p">,</span> <span class="n">cte</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.get_charset"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_charset.html#mailbox.Message.get_charset">[docs]</a>    <span class="k">def</span> <span class="nf">get_charset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the Charset instance associated with the message&#39;s payload.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_charset</span></div>

    <span class="c1">#</span>
    <span class="c1"># MAPPING INTERFACE (partial)</span>
    <span class="c1">#</span>
<div class="viewcode-block" id="Message.__len__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__len__.html#mailbox.Message.__len__">[docs]</a>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the total number of headers, including duplicates.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.__getitem__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__getitem__.html#mailbox.Message.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a header value.</span>

<span class="sd">        Return None if the header is missing instead of raising an exception.</span>

<span class="sd">        Note that if the header appeared multiple times, exactly which</span>
<span class="sd">        occurrence gets returned is undefined.  Use get_all() to get all</span>
<span class="sd">        the values matching a header field name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.__setitem__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__setitem__.html#mailbox.Message.__setitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the value of a header.</span>

<span class="sd">        Note: this does not overwrite an existing header with the same field</span>
<span class="sd">        name.  Use __delitem__() first to delete any existing headers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span></div>

<div class="viewcode-block" id="Message.__delitem__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__delitem__.html#mailbox.Message.__delitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete all occurrences of a header, if present.</span>

<span class="sd">        Does not raise an exception if the header is missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">newheaders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">newheaders</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">newheaders</span></div>

<div class="viewcode-block" id="Message.__contains__"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.__contains__.html#mailbox.Message.__contains__">[docs]</a>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">]</span></div>

<div class="viewcode-block" id="Message.has_key"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.has_key.html#mailbox.Message.has_key">[docs]</a>    <span class="k">def</span> <span class="nf">has_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return true if the message contains the header.&quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">missing</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">missing</span></div>

<div class="viewcode-block" id="Message.keys"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.keys.html#mailbox.Message.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all the message&#39;s header field names.</span>

<span class="sd">        These will be sorted in the order they appeared in the original</span>
<span class="sd">        message, or were added to the message, and may contain duplicates.</span>
<span class="sd">        Any fields deleted and re-inserted are always appended to the header</span>
<span class="sd">        list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">]</span></div>

<div class="viewcode-block" id="Message.values"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.values.html#mailbox.Message.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all the message&#39;s header values.</span>

<span class="sd">        These will be sorted in the order they appeared in the original</span>
<span class="sd">        message, or were added to the message, and may contain duplicates.</span>
<span class="sd">        Any fields deleted and re-inserted are always appended to the header</span>
<span class="sd">        list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">]</span></div>

<div class="viewcode-block" id="Message.items"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.items.html#mailbox.Message.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all the message&#39;s header fields and values.</span>

<span class="sd">        These will be sorted in the order they appeared in the original</span>
<span class="sd">        message, or were added to the message, and may contain duplicates.</span>
<span class="sd">        Any fields deleted and re-inserted are always appended to the header</span>
<span class="sd">        list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[:]</span></div>

<div class="viewcode-block" id="Message.get"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get.html#mailbox.Message.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a header value.</span>

<span class="sd">        Like __getitem__() but return failobj instead of None when the field</span>
<span class="sd">        is missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">failobj</span></div>

    <span class="c1">#</span>
    <span class="c1"># Additional useful stuff</span>
    <span class="c1">#</span>

<div class="viewcode-block" id="Message.get_all"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_all.html#mailbox.Message.get_all">[docs]</a>    <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all the values for the named field.</span>

<span class="sd">        These will be sorted in the order they appeared in the original</span>
<span class="sd">        message, and may contain duplicates.  Any fields deleted and</span>
<span class="sd">        re-inserted are always appended to the header list.</span>

<span class="sd">        If no such fields exist, failobj is returned (defaults to None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="k">return</span> <span class="n">values</span></div>

<div class="viewcode-block" id="Message.add_header"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.add_header.html#mailbox.Message.add_header">[docs]</a>    <span class="k">def</span> <span class="nf">add_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">_value</span><span class="p">,</span> <span class="o">**</span><span class="n">_params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extended header setting.</span>

<span class="sd">        name is the header field to add.  keyword arguments can be used to set</span>
<span class="sd">        additional parameters for the header field, with underscores converted</span>
<span class="sd">        to dashes.  Normally the parameter will be added as key=&quot;value&quot; unless</span>
<span class="sd">        value is None, in which case only the key will be added.  If a</span>
<span class="sd">        parameter value contains non-ASCII characters it must be specified as a</span>
<span class="sd">        three-tuple of (charset, language, value), in which case it will be</span>
<span class="sd">        encoded according to RFC2231 rules.</span>

<span class="sd">        Example:</span>

<span class="sd">        msg.add_header(&#39;content-disposition&#39;, &#39;attachment&#39;, filename=&#39;bud.gif&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_formatparam</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">),</span> <span class="n">v</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">_name</span><span class="p">,</span> <span class="n">SEMISPACE</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Message.replace_header"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.replace_header.html#mailbox.Message.replace_header">[docs]</a>    <span class="k">def</span> <span class="nf">replace_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replace a header.</span>

<span class="sd">        Replace the first matching header found in the message, retaining</span>
<span class="sd">        header order and case.  If no matching header was found, a KeyError is</span>
<span class="sd">        raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_name</span> <span class="o">=</span> <span class="n">_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">_name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">_value</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">_name</span><span class="p">)</span></div>

    <span class="c1">#</span>
    <span class="c1"># Use these three methods instead of the three above.</span>
    <span class="c1">#</span>

<div class="viewcode-block" id="Message.get_content_type"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_content_type.html#mailbox.Message.get_content_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_content_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the message&#39;s content type.</span>

<span class="sd">        The returned string is coerced to lower case of the form</span>
<span class="sd">        `maintype/subtype&#39;.  If there was no Content-Type header in the</span>
<span class="sd">        message, the default type as given by get_default_type() will be</span>
<span class="sd">        returned.  Since according to RFC 2045, messages always have a default</span>
<span class="sd">        type this will always return a value.</span>

<span class="sd">        RFC 2045 defines a message&#39;s default type to be text/plain unless it</span>
<span class="sd">        appears inside a multipart/digest container, in which case it would be</span>
<span class="sd">        message/rfc822.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content-type&#39;</span><span class="p">,</span> <span class="n">missing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="c1"># This should have no parameters</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_default_type</span><span class="p">()</span>
        <span class="n">ctype</span> <span class="o">=</span> <span class="n">_splitparam</span><span class="p">(</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="c1"># RFC 2045, section 5.2 says if its invalid, use text/plain</span>
        <span class="k">if</span> <span class="n">ctype</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;text/plain&#39;</span>
        <span class="k">return</span> <span class="n">ctype</span></div>

<div class="viewcode-block" id="Message.get_content_maintype"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_content_maintype.html#mailbox.Message.get_content_maintype">[docs]</a>    <span class="k">def</span> <span class="nf">get_content_maintype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the message&#39;s main content type.</span>

<span class="sd">        This is the `maintype&#39; part of the string returned by</span>
<span class="sd">        get_content_type().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ctype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Message.get_content_subtype"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_content_subtype.html#mailbox.Message.get_content_subtype">[docs]</a>    <span class="k">def</span> <span class="nf">get_content_subtype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the message&#39;s sub-content type.</span>

<span class="sd">        This is the `subtype&#39; part of the string returned by</span>
<span class="sd">        get_content_type().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ctype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="Message.get_default_type"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_default_type.html#mailbox.Message.get_default_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_default_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the `default&#39; content type.</span>

<span class="sd">        Most messages have a default content type of text/plain, except for</span>
<span class="sd">        messages that are subparts of multipart/digest containers.  Such</span>
<span class="sd">        subparts have a default content type of message/rfc822.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_type</span></div>

<div class="viewcode-block" id="Message.set_default_type"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_default_type.html#mailbox.Message.set_default_type">[docs]</a>    <span class="k">def</span> <span class="nf">set_default_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the `default&#39; content type.</span>

<span class="sd">        ctype should be either &quot;text/plain&quot; or &quot;message/rfc822&quot;, although this</span>
<span class="sd">        is not enforced.  The default content type is not stored in the</span>
<span class="sd">        Content-Type header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_type</span> <span class="o">=</span> <span class="n">ctype</span></div>

<div class="viewcode-block" id="Message._get_params_preserve"><a class="viewcode-back" href="../../generated/generated/mailbox.Message._get_params_preserve.html#mailbox.Message._get_params_preserve">[docs]</a>    <span class="k">def</span> <span class="nf">_get_params_preserve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span>
        <span class="c1"># Like get_params() but preserves the quoting of values.  BAW:</span>
        <span class="c1"># should this be part of the public interface?</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">missing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">_parseparam</span><span class="p">(</span><span class="s1">&#39;;&#39;</span> <span class="o">+</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># Must have been a bare attribute</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">val</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">decode_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">params</span></div>

<div class="viewcode-block" id="Message.get_params"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_params.html#mailbox.Message.get_params">[docs]</a>    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;content-type&#39;</span><span class="p">,</span> <span class="n">unquote</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the message&#39;s Content-Type parameters, as a list.</span>

<span class="sd">        The elements of the returned list are 2-tuples of key/value pairs, as</span>
<span class="sd">        split on the `=&#39; sign.  The left hand side of the `=&#39; is the key,</span>
<span class="sd">        while the right hand side is the value.  If there is no `=&#39; sign in</span>
<span class="sd">        the parameter the value is the empty string.  The value is as</span>
<span class="sd">        described in the get_param() method.</span>

<span class="sd">        Optional failobj is the object to return if there is no Content-Type</span>
<span class="sd">        header.  Optional header is the header to search instead of</span>
<span class="sd">        Content-Type.  If unquote is True, the value is unquoted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_params_preserve</span><span class="p">(</span><span class="n">missing</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="k">if</span> <span class="n">unquote</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="n">_unquotevalue</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">params</span></div>

<div class="viewcode-block" id="Message.get_param"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_param.html#mailbox.Message.get_param">[docs]</a>    <span class="k">def</span> <span class="nf">get_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;content-type&#39;</span><span class="p">,</span>
                  <span class="n">unquote</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the parameter value if found in the Content-Type header.</span>

<span class="sd">        Optional failobj is the object to return if there is no Content-Type</span>
<span class="sd">        header, or the Content-Type header has no such parameter.  Optional</span>
<span class="sd">        header is the header to search instead of Content-Type.</span>

<span class="sd">        Parameter keys are always compared case insensitively.  The return</span>
<span class="sd">        value can either be a string, or a 3-tuple if the parameter was RFC</span>
<span class="sd">        2231 encoded.  When it&#39;s a 3-tuple, the elements of the value are of</span>
<span class="sd">        the form (CHARSET, LANGUAGE, VALUE).  Note that both CHARSET and</span>
<span class="sd">        LANGUAGE can be None, in which case you should consider VALUE to be</span>
<span class="sd">        encoded in the us-ascii charset.  You can usually ignore LANGUAGE.</span>

<span class="sd">        Your application should be prepared to deal with 3-tuple return</span>
<span class="sd">        values, and can convert the parameter to a Unicode string like so:</span>

<span class="sd">            param = msg.get_param(&#39;foo&#39;)</span>
<span class="sd">            if isinstance(param, tuple):</span>
<span class="sd">                param = unicode(param[2], param[0] or &#39;us-ascii&#39;)</span>

<span class="sd">        In any case, the parameter value (either the returned string, or the</span>
<span class="sd">        VALUE item in the 3-tuple) is always unquoted, unless unquote is set</span>
<span class="sd">        to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_params_preserve</span><span class="p">(</span><span class="n">failobj</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">param</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">unquote</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">_unquotevalue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">failobj</span></div>

<div class="viewcode-block" id="Message.set_param"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_param.html#mailbox.Message.set_param">[docs]</a>    <span class="k">def</span> <span class="nf">set_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="n">requote</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                  <span class="n">charset</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a parameter in the Content-Type header.</span>

<span class="sd">        If the parameter already exists in the header, its value will be</span>
<span class="sd">        replaced with the new value.</span>

<span class="sd">        If header is Content-Type and has not yet been defined for this</span>
<span class="sd">        message, it will be set to &quot;text/plain&quot; and the new parameter and</span>
<span class="sd">        value will be appended as per RFC 2045.</span>

<span class="sd">        An alternate header can be specified in the header argument, and all</span>
<span class="sd">        parameters will be quoted as necessary unless requote is False.</span>

<span class="sd">        If charset is specified, the parameter will be encoded according to RFC</span>
<span class="sd">        2231.  Optional language specifies the RFC 2231 language, defaulting</span>
<span class="sd">        to the empty string.  Both charset and language should be strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="n">charset</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">header</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;content-type&#39;</span><span class="p">:</span>
            <span class="n">ctype</span> <span class="o">=</span> <span class="s1">&#39;text/plain&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ctype</span><span class="p">:</span>
                <span class="n">ctype</span> <span class="o">=</span> <span class="n">_formatparam</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">requote</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ctype</span> <span class="o">=</span> <span class="n">SEMISPACE</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">ctype</span><span class="p">,</span> <span class="n">_formatparam</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">requote</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">old_param</span><span class="p">,</span> <span class="n">old_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_params</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
                                                        <span class="n">unquote</span><span class="o">=</span><span class="n">requote</span><span class="p">):</span>
                <span class="n">append_param</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">if</span> <span class="n">old_param</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">param</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="n">append_param</span> <span class="o">=</span> <span class="n">_formatparam</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">requote</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">append_param</span> <span class="o">=</span> <span class="n">_formatparam</span><span class="p">(</span><span class="n">old_param</span><span class="p">,</span> <span class="n">old_value</span><span class="p">,</span> <span class="n">requote</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">ctype</span><span class="p">:</span>
                    <span class="n">ctype</span> <span class="o">=</span> <span class="n">append_param</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ctype</span> <span class="o">=</span> <span class="n">SEMISPACE</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">ctype</span><span class="p">,</span> <span class="n">append_param</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">ctype</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctype</span></div>

<div class="viewcode-block" id="Message.del_param"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.del_param.html#mailbox.Message.del_param">[docs]</a>    <span class="k">def</span> <span class="nf">del_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;content-type&#39;</span><span class="p">,</span> <span class="n">requote</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove the given parameter completely from the Content-Type header.</span>

<span class="sd">        The header will be re-written in place without the parameter or its</span>
<span class="sd">        value. All values will be quoted as necessary unless requote is</span>
<span class="sd">        False.  Optional header specifies an alternative to the Content-Type</span>
<span class="sd">        header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">new_ctype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_params</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">unquote</span><span class="o">=</span><span class="n">requote</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="n">param</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">new_ctype</span><span class="p">:</span>
                    <span class="n">new_ctype</span> <span class="o">=</span> <span class="n">_formatparam</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">requote</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_ctype</span> <span class="o">=</span> <span class="n">SEMISPACE</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">new_ctype</span><span class="p">,</span>
                                                <span class="n">_formatparam</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">requote</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">new_ctype</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_ctype</span></div>

<div class="viewcode-block" id="Message.set_type"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_type.html#mailbox.Message.set_type">[docs]</a>    <span class="k">def</span> <span class="nf">set_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="n">requote</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the main type and subtype for the Content-Type header.</span>

<span class="sd">        type must be a string in the form &quot;maintype/subtype&quot;, otherwise a</span>
<span class="sd">        ValueError is raised.</span>

<span class="sd">        This method replaces the Content-Type header, keeping all the</span>
<span class="sd">        parameters in place.  If requote is False, this leaves the existing</span>
<span class="sd">        header&#39;s quoting as is.  Otherwise, the parameters will be quoted (the</span>
<span class="sd">        default).</span>

<span class="sd">        An alternative header can be specified in the header argument.  When</span>
<span class="sd">        the Content-Type header is set, we&#39;ll always also add a MIME-Version</span>
<span class="sd">        header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># BAW: should we be strict?</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>
        <span class="c1"># Set the Content-Type, you get a MIME-Version</span>
        <span class="k">if</span> <span class="n">header</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;content-type&#39;</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;mime-version&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;MIME-Version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1.0&#39;</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
            <span class="k">return</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_params</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span> <span class="n">unquote</span><span class="o">=</span><span class="n">requote</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span>
        <span class="bp">self</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="c1"># Skip the first param; it&#39;s the old type.</span>
        <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">requote</span><span class="p">)</span></div>

<div class="viewcode-block" id="Message.get_filename"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_filename.html#mailbox.Message.get_filename">[docs]</a>    <span class="k">def</span> <span class="nf">get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the filename associated with the payload if present.</span>

<span class="sd">        The filename is extracted from the Content-Disposition header&#39;s</span>
<span class="sd">        `filename&#39; parameter, and it is unquoted.  If that header is missing</span>
<span class="sd">        the `filename&#39; parameter, this method falls back to looking for the</span>
<span class="sd">        `name&#39; parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="n">missing</span><span class="p">,</span> <span class="s1">&#39;content-disposition&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">missing</span><span class="p">,</span> <span class="s1">&#39;content-type&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">collapse_rfc2231_value</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

<div class="viewcode-block" id="Message.get_boundary"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_boundary.html#mailbox.Message.get_boundary">[docs]</a>    <span class="k">def</span> <span class="nf">get_boundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the boundary associated with the payload if present.</span>

<span class="sd">        The boundary is extracted from the Content-Type header&#39;s `boundary&#39;</span>
<span class="sd">        parameter, and it is unquoted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">boundary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;boundary&#39;</span><span class="p">,</span> <span class="n">missing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">boundary</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="c1"># RFC 2046 says that boundaries may begin but not end in w/s</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">collapse_rfc2231_value</span><span class="p">(</span><span class="n">boundary</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span></div>

<div class="viewcode-block" id="Message.set_boundary"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.set_boundary.html#mailbox.Message.set_boundary">[docs]</a>    <span class="k">def</span> <span class="nf">set_boundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">boundary</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the boundary parameter in Content-Type to &#39;boundary&#39;.</span>

<span class="sd">        This is subtly different than deleting the Content-Type header and</span>
<span class="sd">        adding a new one with a new boundary parameter via add_header().  The</span>
<span class="sd">        main difference is that using the set_boundary() method preserves the</span>
<span class="sd">        order of the Content-Type header in the original message.</span>

<span class="sd">        HeaderParseError is raised if the message has no Content-Type header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_params_preserve</span><span class="p">(</span><span class="n">missing</span><span class="p">,</span> <span class="s1">&#39;content-type&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="c1"># There was no Content-Type header, and we don&#39;t know what type</span>
            <span class="c1"># to set it to, so raise an exception.</span>
            <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">HeaderParseError</span><span class="p">(</span><span class="s1">&#39;No Content-Type header found&#39;</span><span class="p">)</span>
        <span class="n">newparams</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">foundp</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">pk</span><span class="p">,</span> <span class="n">pv</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pk</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;boundary&#39;</span><span class="p">:</span>
                <span class="n">newparams</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">boundary</span><span class="p">))</span>
                <span class="n">foundp</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newparams</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pk</span><span class="p">,</span> <span class="n">pv</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">foundp</span><span class="p">:</span>
            <span class="c1"># The original Content-Type header had no boundary attribute.</span>
            <span class="c1"># Tack one on the end.  BAW: should we raise an exception</span>
            <span class="c1"># instead???</span>
            <span class="n">newparams</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">boundary</span><span class="p">))</span>
        <span class="c1"># Replace the existing Content-Type header with the new value</span>
        <span class="n">newheaders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">h</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;content-type&#39;</span><span class="p">:</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">newparams</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
                <span class="n">newheaders</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">SEMISPACE</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)))</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">newheaders</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="n">newheaders</span></div>

<div class="viewcode-block" id="Message.get_content_charset"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_content_charset.html#mailbox.Message.get_content_charset">[docs]</a>    <span class="k">def</span> <span class="nf">get_content_charset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the charset parameter of the Content-Type header.</span>

<span class="sd">        The returned string is always coerced to lower case.  If there is no</span>
<span class="sd">        Content-Type header, or if that header has no charset parameter,</span>
<span class="sd">        failobj is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">charset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="n">missing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">charset</span> <span class="ow">is</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="c1"># RFC 2231 encoded, so decode it, and it better end up as ascii.</span>
            <span class="n">pcharset</span> <span class="o">=</span> <span class="n">charset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;us-ascii&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># LookupError will be raised if the charset isn&#39;t known to</span>
                <span class="c1"># Python.  UnicodeError will be raised if the encoded text</span>
                <span class="c1"># contains a character not in the charset.</span>
                <span class="n">charset</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">charset</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">pcharset</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;us-ascii&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">LookupError</span><span class="p">,</span> <span class="ne">UnicodeError</span><span class="p">):</span>
                <span class="n">charset</span> <span class="o">=</span> <span class="n">charset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="c1"># charset character must be in us-ascii range</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">charset</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">charset</span><span class="p">,</span> <span class="s1">&#39;us-ascii&#39;</span><span class="p">)</span>
            <span class="n">charset</span> <span class="o">=</span> <span class="n">charset</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;us-ascii&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">failobj</span>
        <span class="c1"># RFC 2046, $4.1.2 says charsets are not case sensitive</span>
        <span class="k">return</span> <span class="n">charset</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div>

<div class="viewcode-block" id="Message.get_charsets"><a class="viewcode-back" href="../../generated/generated/mailbox.Message.get_charsets.html#mailbox.Message.get_charsets">[docs]</a>    <span class="k">def</span> <span class="nf">get_charsets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">failobj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list containing the charset(s) used in this message.</span>

<span class="sd">        The returned list of items describes the Content-Type headers&#39;</span>
<span class="sd">        charset parameter for this message and all the subparts in its</span>
<span class="sd">        payload.</span>

<span class="sd">        Each item will either be a string (the value of the charset parameter</span>
<span class="sd">        in the Content-Type header of that part) or the value of the</span>
<span class="sd">        &#39;failobj&#39; parameter (defaults to None), if the part does not have a</span>
<span class="sd">        main MIME type of &quot;text&quot;, or the charset is not defined.</span>

<span class="sd">        The list will contain one string for each part of the message, plus</span>
<span class="sd">        one for the container message (i.e. self), so that a non-multipart</span>
<span class="sd">        message will still return a list of length 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">part</span><span class="o">.</span><span class="n">get_content_charset</span><span class="p">(</span><span class="n">failobj</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span></div>

    <span class="c1"># I.e. def walk(self): ...</span>
    <span class="kn">from</span> <span class="nn">email.iterators</span> <span class="kn">import</span> <span class="n">walk</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>